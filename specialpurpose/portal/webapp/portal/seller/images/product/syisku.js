
(function(a,b){function ci(a){return d.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cf(a){if(!b_[a]){var b=d("<"+a+">").appendTo("body"),c=b.css("display");b.remove();if(c==="none"||c==="")c="block";b_[a]=c}return b_[a]}function ce(a,b){var c={};d.each(cd.concat.apply([],cd.slice(0,b)),function(){c[this]=a});return c}function b$(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function bZ(){try{return new a.XMLHttpRequest}catch(b){}}function bY(){d(a).unload(function(){for(var a in bW)bW[a](0,1)})}function bS(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var e=a.dataTypes,f={},g,h,i=e.length,j,k=e[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h==="string"&&(f[h.toLowerCase()]=a.converters[h]);l=k,k=e[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=f[m]||f["* "+k];if(!n){p=b;for(o in f){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=f[j[1]+" "+k];if(p){o=f[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&d.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function bR(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function bQ(a,b,c,e){if(d.isArray(b)&&b.length)d.each(b,function(b,f){c||bs.test(a)?e(a,f):bQ(a+"["+(typeof f==="object"||d.isArray(f)?b:"")+"]",f,c,e)});else if(c||b==null||typeof b!=="object")e(a,b);else if(d.isArray(b)||d.isEmptyObject(b))e(a,"");else for(var f in b)bQ(a+"["+f+"]",b[f],c,e)}function bP(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bJ,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l==="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bP(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bP(a,c,d,e,"*",g));return l}function bO(a){return function(b,c){typeof b!=="string"&&(c=b,b="*");if(d.isFunction(c)){var e=b.toLowerCase().split(bD),f=0,g=e.length,h,i,j;for(;f<g;f++)h=e[f],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bq(a,b,c){var e=b==="width"?bk:bl,f=b==="width"?a.offsetWidth:a.offsetHeight;if(c==="border")return f;d.each(e,function(){c||(f-=parseFloat(d.css(a,"padding"+this))||0),c==="margin"?f+=parseFloat(d.css(a,"margin"+this))||0:f-=parseFloat(d.css(a,"border"+this+"Width"))||0});return f}function bc(a,b){b.src?d.ajax({url:b.src,async:!1,dataType:"script"}):d.globalEval(b.text||b.textContent||b.innerHTML||""),b.parentNode&&b.parentNode.removeChild(b)}function bb(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function ba(a,b){if(b.nodeType===1){var c=b.nodeName.toLowerCase();b.clearAttributes(),b.mergeAttributes(a);if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(d.expando)}}function _(a,b){if(b.nodeType===1&&d.hasData(a)){var c=d.expando,e=d.data(a),f=d.data(b,e);if(e=e[c]){var g=e.events;f=f[c]=d.extend({},e);if(g){delete f.handle,f.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)d.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function $(a,b){return d.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Q(a,b,c){if(d.isFunction(b))return d.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return d.grep(a,function(a,d){return a===b===c});if(typeof b==="string"){var e=d.grep(a,function(a){return a.nodeType===1});if(L.test(b))return d.filter(b,e,!c);b=d.filter(b,e)}return d.grep(a,function(a,e){return d.inArray(a,b)>=0===c})}function P(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function H(a,b){return(a&&a!=="*"?a+".":"")+b.replace(t,"`").replace(u,"&")}function G(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p=[],q=[],s=d._data(this,"events");if(a.liveFired!==this&&s&&s.live&&!a.target.disabled&&(!a.button||a.type!=="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var t=s.live.slice(0);for(i=0;i<t.length;i++)g=t[i],g.origType.replace(r,"")===a.type?q.push(g.selector):t.splice(i--,1);f=d(a.target).closest(q,a.currentTarget);for(j=0,k=f.length;j<k;j++){m=f[j];for(i=0;i<t.length;i++){g=t[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,e=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,e=d(a.relatedTarget).closest(g.selector)[0];(!e||e!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){f=p[j];if(c&&f.level>c)break;a.currentTarget=f.elem,a.data=f.handleObj.data,a.handleObj=f.handleObj,o=f.handleObj.origHandler.apply(f.elem,arguments);if(o===!1||a.isPropagationStopped()){c=f.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function E(a,c,e){var f=d.extend({},e[0]);f.type=a,f.originalEvent={},f.liveFired=b,d.event.handle.call(c,f),f.isDefaultPrevented()&&e[0].preventDefault()}function y(){return!0}function x(){return!1}function i(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function h(a,c,e){if(e===b&&a.nodeType===1){e=a.getAttribute("data-"+c);if(typeof e==="string"){try{e=e==="true"?!0:e==="false"?!1:e==="null"?null:d.isNaN(e)?g.test(e)?d.parseJSON(e):e:parseFloat(e)}catch(f){}d.data(a,c,e)}else e=b}return e}var c=a.document,d=function(){function G(){if(!d.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(G,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=navigator.userAgent,w,x,y,z=Object.prototype.toString,A=Object.prototype.hasOwnProperty,B=Array.prototype.push,C=Array.prototype.slice,D=String.prototype.trim,E=Array.prototype.indexOf,F={};d.fn=d.prototype={constructor:d,init:function(a,e,f){var g,i,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!e&&c.body){this.context=c,this[0]=c.body,this.selector="body",this.length=1;return this}if(typeof a==="string"){g=h.exec(a);if(!g||!g[1]&&e)return!e||e.jquery?(e||f).find(a):this.constructor(e).find(a);if(g[1]){e=e instanceof d?e[0]:e,k=e?e.ownerDocument||e:c,j=m.exec(a),j?d.isPlainObject(e)?(a=[c.createElement(j[1])],d.fn.attr.call(a,e,!0)):a=[k.createElement(j[1])]:(j=d.buildFragment([g[1]],[k]),a=(j.cacheable?d.clone(j.fragment):j.fragment).childNodes);return d.merge(this,a)}i=c.getElementById(g[2]);if(i&&i.parentNode){if(i.id!==g[2])return f.find(a);this.length=1,this[0]=i}this.context=c,this.selector=a;return this}if(d.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.5.2",length:0,size:function(){return this.length},toArray:function(){return C.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?B.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")");return e},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady(),x.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(C.apply(this,arguments),"slice",C.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:B,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i==="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!=="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){a.$=f,b&&(a.jQuery=e);return d},isReady:!1,readyWait:1,ready:function(a){a===!0&&d.readyWait--;if(!d.readyWait||a!==!0&&!d.isReady){if(!c.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;x.resolveWith(c,[d]),d.fn.trigger&&d(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!x){x=d._Deferred();if(c.readyState==="complete")return setTimeout(d.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",y,!1),a.addEventListener("load",d.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",y),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}c.documentElement.doScroll&&b&&G()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a==="object"&&"setInterval"in a},isNaN:function(a){return a==null||!l.test(a)||isNaN(a)},type:function(a){return a==null?String(a):F[z.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;if(a.constructor&&!A.call(a,"constructor")&&!A.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a){}return c===b||A.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=d.trim(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(b,c,e){a.DOMParser?(e=new DOMParser,c=e.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),e=c.documentElement,(!e||!e.nodeName||e.nodeName==="parsererror")&&d.error("Invalid XML: "+b);return c},noop:function(){},globalEval:function(a){if(a&&i.test(a)){var b=c.head||c.getElementsByTagName("head")[0]||c.documentElement,e=c.createElement("script");d.support.scriptEval()?e.appendChild(c.createTextNode(a)):e.text=a,b.insertBefore(e,b.firstChild),b.removeChild(e)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(var j=a[0];g<h&&c.call(j,g,j)!==!1;j=a[++g]){}return a},trim:D?function(a){return a==null?"":D.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?B.call(c,a):d.merge(c,a)}return c},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,b,c){var d=[],e;for(var f=0,g=a.length;f<g;f++)e=b(a[f],f,c),e!=null&&(d[d.length]=e);return d.concat.apply([],d)},guid:1,proxy:function(a,c,e){arguments.length===2&&(typeof c==="string"?(e=a,a=e[c],c=b):c&&!d.isFunction(c)&&(e=c,c=b)),!c&&a&&(c=function(){return a.apply(e||this,arguments)}),a&&(c.guid=a.guid=a.guid||c.guid||d.guid++);return c},access:function(a,c,e,f,g,h){var i=a.length;if(typeof c==="object"){for(var j in c)d.access(a,j,c[j],f,g,e);return a}if(e!==b){f=!h&&f&&d.isFunction(e);for(var k=0;k<i;k++)g(a[k],c,f?e.call(a[k],k,g(a[k],c)):e,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.subclass=this.subclass,a.fn.init=function b(b,c){c&&c instanceof d&&!(c instanceof a)&&(c=a(c));return d.fn.init.call(this,b,c,e)},a.fn.init.prototype=a.fn;var e=a(c);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){F["[object "+b+"]"]=b.toLowerCase()}),w=d.uaMatch(v),w.browser&&(d.browser[w.browser]=!0,d.browser.version=w.version),d.browser.webkit&&(d.browser.safari=!0),E&&(d.inArray=function(a,b){return E.call(b,a)}),i.test(" ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(c),c.addEventListener?y=function(){c.removeEventListener("DOMContentLoaded",y,!1),d.ready()}:c.attachEvent&&(y=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",y),d.ready())});return d}(),e="then done fail isResolved isRejected promise".split(" "),f=[].slice;d.extend({_Deferred:function(){var a=[],b,c,e,f={done:function(){if(!e){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=d.type(i),j==="array"?f.done.apply(f,i):j==="function"&&a.push(i);k&&f.resolveWith(k[0],k[1])}return this},resolveWith:function(d,f){if(!e&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(d,f)}finally{b=[d,f],c=0}}return this},resolve:function(){f.resolveWith(this,arguments);return this},isResolved:function(){return c||b},cancel:function(){e=1,a=[];return this}};return f},Deferred:function(a){var b=d._Deferred(),c=d._Deferred(),f;d.extend(b,{then:function(a,c){b.done(a).fail(c);return this},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,promise:function(a){if(a==null){if(f)return f;f=a={}}var c=e.length;while(c--)a[e[c]]=b[e[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?f.call(arguments,0):c,--g||h.resolveWith(h,f.call(b,0))}}var b=arguments,c=0,e=b.length,g=e,h=e<=1&&a&&d.isFunction(a.promise)?a:d.Deferred();if(e>1){for(;c<e;c++)b[c]&&d.isFunction(b[c].promise)?b[c].promise().then(i(c),h.reject):--g;g||h.resolveWith(h,b)}else h!==a&&h.resolveWith(h,e?[a]:[]);return h.promise()}}),function(){d.support={};var b=c.createElement("div");b.style.display="none",b.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var e=b.getElementsByTagName("*"),f=b.getElementsByTagName("a")[0],g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=b.getElementsByTagName("input")[0];if(e&&e.length&&f){d.support={leadingWhitespace:b.firstChild.nodeType===3,tbody:!b.getElementsByTagName("tbody").length,htmlSerialize:!!b.getElementsByTagName("link").length,style:/red/.test(f.getAttribute("style")),hrefNormalized:f.getAttribute("href")==="/a",opacity:/^0.55$/.test(f.style.opacity),cssFloat:!!f.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,deleteExpando:!0,optDisabled:!1,checkClone:!1,noCloneEvent:!0,noCloneChecked:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0,reliableMarginRight:!0},i.checked=!0,d.support.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,d.support.optDisabled=!h.disabled;var j=null;d.support.scriptEval=function(){if(j===null){var b=c.documentElement,e=c.createElement("script"),f="script"+d.now();try{e.appendChild(c.createTextNode("window."+f+"=1;"))}catch(g){}b.insertBefore(e,b.firstChild),a[f]?(j=!0,delete a[f]):j=!1,b.removeChild(e)}return j};try{delete b.test}catch(k){d.support.deleteExpando=!1}!b.addEventListener&&b.attachEvent&&b.fireEvent&&(b.attachEvent("onclick",function l(){d.support.noCloneEvent=!1,b.detachEvent("onclick",l)}),b.cloneNode(!0).fireEvent("onclick")),b=c.createElement("div"),b.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var m=c.createDocumentFragment();m.appendChild(b.firstChild),d.support.checkClone=m.cloneNode(!0).cloneNode(!0).lastChild.checked,d(function(){var a=c.createElement("div"),b=c.getElementsByTagName("body")[0];if(b){a.style.width=a.style.paddingLeft="1px",b.appendChild(a),d.boxModel=d.support.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,d.support.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",d.support.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";var e=a.getElementsByTagName("td");d.support.reliableHiddenOffsets=e[0].offsetHeight===0,e[0].style.display="",e[1].style.display="none",d.support.reliableHiddenOffsets=d.support.reliableHiddenOffsets&&e[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(a.style.width="1px",a.style.marginRight="0",d.support.reliableMarginRight=(parseInt(c.defaultView.getComputedStyle(a,null).marginRight,10)||0)===0),b.removeChild(a).style.display="none",a=e=null}});var n=function(a){var b=c.createElement("div");a="on"+a;if(!b.attachEvent)return!0;var d=a in b;d||(b.setAttribute(a,"return;"),d=typeof b[a]==="function");return d};d.support.submitBubbles=n("submit"),d.support.changeBubbles=n("change"),b=e=f=null}}();var g=/^(?:\{.*\}|\[.*\])$/;d.extend({cache:{},uuid:0,expando:"jQuery"+(d.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?d.cache[a[d.expando]]:a[d.expando];return!!a&&!i(a)},data:function(a,c,e,f){if(d.acceptData(a)){var g=d.expando,h=typeof c==="string",i,j=a.nodeType,k=j?d.cache:a,l=j?a[d.expando]:a[d.expando]&&d.expando;if((!l||f&&l&&!k[l][g])&&h&&e===b)return;l||(j?a[d.expando]=l=++d.uuid:l=d.expando),k[l]||(k[l]={},j||(k[l].toJSON=d.noop));if(typeof c==="object"||typeof c==="function")f?k[l][g]=d.extend(k[l][g],c):k[l]=d.extend(k[l],c);i=k[l],f&&(i[g]||(i[g]={}),i=i[g]),e!==b&&(i[c]=e);if(c==="events"&&!i[c])return i[g]&&i[g].events;return h?i[c]:i}},removeData:function(b,c,e){if(d.acceptData(b)){var f=d.expando,g=b.nodeType,h=g?d.cache:b,j=g?b[d.expando]:d.expando;if(!h[j])return;if(c){var k=e?h[j][f]:h[j];if(k){delete k[c];if(!i(k))return}}if(e){delete h[j][f];if(!i(h[j]))return}var l=h[j][f];d.support.deleteExpando||h!=a?delete h[j]:h[j]=null,l?(h[j]={},g||(h[j].toJSON=d.noop),h[j][f]=l):g&&(d.support.deleteExpando?delete b[d.expando]:b.removeAttribute?b.removeAttribute(d.expando):b[d.expando]=null)}},_data:function(a,b,c){return d.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=d.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),d.fn.extend({data:function(a,c){var e=null;if(typeof a==="undefined"){if(this.length){e=d.data(this[0]);if(this[0].nodeType===1){var f=this[0].attributes,g;for(var i=0,j=f.length;i<j;i++)g=f[i].name,g.indexOf("data-")===0&&(g=g.substr(5),h(this[0],g,e[g]))}}return e}if(typeof a==="object")return this.each(function(){d.data(this,a)});var k=a.split(".");k[1]=k[1]?"."+k[1]:"";if(c===b){e=this.triggerHandler("getData"+k[1]+"!",[k[0]]),e===b&&this.length&&(e=d.data(this[0],a),e=h(this[0],a,e));return e===b&&k[1]?this.data(k[0]):e}return this.each(function(){var b=d(this),e=[k[0],c];b.triggerHandler("setData"+k[1]+"!",e),d.data(this,a,c),b.triggerHandler("changeData"+k[1]+"!",e)})},removeData:function(a){return this.each(function(){d.removeData(this,a)})}}),d.extend({queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var e=d._data(a,b);if(!c)return e||[];!e||d.isArray(c)?e=d._data(a,b,d.makeArray(c)):e.push(c);return e}},dequeue:function(a,b){b=b||"fx";var c=d.queue(a,b),e=c.shift();e==="inprogress"&&(e=c.shift()),e&&(b==="fx"&&c.unshift("inprogress"),e.call(a,function(){d.dequeue(a,b)})),c.length||d.removeData(a,b+"queue",!0)}}),d.fn.extend({queue:function(a,c){typeof a!=="string"&&(c=a,a="fx");if(c===b)return d.queue(this[0],a);return this.each(function(b){var e=d.queue(this,a,c);a==="fx"&&e[0]!=="inprogress"&&d.dequeue(this,a)})},dequeue:function(a){return this.each(function(){d.dequeue(this,a)})},delay:function(a,b){a=d.fx?d.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){d.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var j=/[\n\t\r]/g,k=/\s+/,l=/\r/g,m=/^(?:href|src|style)$/,n=/^(?:button|input)$/i,o=/^(?:button|input|object|select|textarea)$/i,p=/^a(?:rea)?$/i,q=/^(?:radio|checkbox)$/i;d.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"},d.fn.extend({attr:function(a,b){return d.access(this,a,b,!0,d.attr)},removeAttr:function(a,b){return this.each(function(){d.attr(this,a,""),this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(d.isFunction(a))return this.each(function(b){var c=d(this);c.addClass(a.call(this,b,c.attr("class")))});if(a&&typeof a==="string"){var b=(a||"").split(k);for(var c=0,e=this.length;c<e;c++){var f=this[c];if(f.nodeType===1)if(f.className){var g=" "+f.className+" ",h=f.className;for(var i=0,j=b.length;i<j;i++)g.indexOf(" "+b[i]+" ")<0&&(h+=" "+b[i]);f.className=d.trim(h)}else f.className=a}}return this},removeClass:function(a){if(d.isFunction(a))return this.each(function(b){var c=d(this);c.removeClass(a.call(this,b,c.attr("class")))});if(a&&typeof a==="string"||a===b){var c=(a||"").split(k);for(var e=0,f=this.length;e<f;e++){var g=this[e];if(g.nodeType===1&&g.className)if(a){var h=(" "+g.className+" ").replace(j," ");for(var i=0,l=c.length;i<l;i++)h=h.replace(" "+c[i]+" "," ");g.className=d.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,e=typeof b==="boolean";if(d.isFunction(a))return this.each(function(c){var e=d(this);e.toggleClass(a.call(this,c,e.attr("class"),b),b)});return this.each(function(){if(c==="string"){var f,g=0,h=d(this),i=b,j=a.split(k);while(f=j[g++])i=e?i:!h.hasClass(f),h[i?"addClass":"removeClass"](f)}else if(c==="undefined"||c==="boolean")this.className&&d._data(this,"__className__",this.className),this.className=this.className||a===!1?"":d._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(j," ").indexOf(b)>-1)return!0;return!1},val:function(a){if(!arguments.length){var c=this[0];if(c){if(d.nodeName(c,"option")){var e=c.attributes.value;return!e||e.specified?c.value:c.text}if(d.nodeName(c,"select")){var f=c.selectedIndex,g=[],h=c.options,i=c.type==="select-one";if(f<0)return null;for(var j=i?f:0,k=i?f+1:h.length;j<k;j++){var m=h[j];if(m.selected&&(d.support.optDisabled?!m.disabled:m.getAttribute("disabled")===null)&&(!m.parentNode.disabled||!d.nodeName(m.parentNode,"optgroup"))){a=d(m).val();if(i)return a;g.push(a)}}if(i&&!g.length&&h.length)return d(h[f]).val();return g}if(q.test(c.type)&&!d.support.checkOn)return c.getAttribute("value")===null?"on":c.value;return(c.value||"").replace(l,"")}return b}var n=d.isFunction(a);return this.each(function(b){var c=d(this),e=a;if(this.nodeType===1){n&&(e=a.call(this,b,c.val())),e==null?e="":typeof e==="number"?e+="":d.isArray(e)&&(e=d.map(e,function(a){return a==null?"":a+""}));if(d.isArray(e)&&q.test(this.type))this.checked=d.inArray(c.val(),e)>=0;else if(d.nodeName(this,"select")){var f=d.makeArray(e);d("option",this).each(function(){this.selected=d.inArray(d(this).val(),f)>=0}),f.length||(this.selectedIndex=-1)}else this.value=e}})}}),d.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,e,f){if(!a||a.nodeType===3||a.nodeType===8||a.nodeType===2)return b;if(f&&c in d.attrFn)return d(a)[c](e);var g=a.nodeType!==1||!d.isXMLDoc(a),h=e!==b;c=g&&d.props[c]||c;if(a.nodeType===1){var i=m.test(c);if(c==="selected"&&!d.support.optSelected){var j=a.parentNode;j&&(j.selectedIndex,j.parentNode&&j.parentNode.selectedIndex)}if((c in a||a[c]!==b)&&g&&!i){h&&(c==="type"&&n.test(a.nodeName)&&a.parentNode&&d.error("type property can't be changed"),e===null?a.nodeType===1&&a.removeAttribute(c):a[c]=e);if(d.nodeName(a,"form")&&a.getAttributeNode(c))return a.getAttributeNode(c).nodeValue;if(c==="tabIndex"){var k=a.getAttributeNode("tabIndex");return k&&k.specified?k.value:o.test(a.nodeName)||p.test(a.nodeName)&&a.href?0:b}return a[c]}if(!d.support.style&&g&&c==="style"){h&&(a.style.cssText=""+e);return a.style.cssText}h&&a.setAttribute(c,""+e);if(!a.attributes[c]&&(a.hasAttribute&&!a.hasAttribute(c)))return b;var l=!d.support.hrefNormalized&&g&&i?a.getAttribute(c,2):a.getAttribute(c);return l===null?b:l}h&&(a[c]=e);return a[c]}});var r=/\.(.*)$/,s=/^(?:textarea|input|select)$/i,t=/\./g,u=/ /g,v=/[^\w\s.|`]/g,w=function(a){return a.replace(v,"\\$&")};d.event={add:function(c,e,f,g){if(c.nodeType!==3&&c.nodeType!==8){try{d.isWindow(c)&&(c!==a&&!c.frameElement)&&(c=a)}catch(h){}if(f===!1)f=x;else if(!f)return;var i,j;f.handler&&(i=f,f=i.handler),f.guid||(f.guid=d.guid++);var k=d._data(c);if(!k)return;var l=k.events,m=k.handle;l||(k.events=l={}),m||(k.handle=m=function(a){return typeof d!=="undefined"&&d.event.triggered!==a.type?d.event.handle.apply(m.elem,arguments):b}),m.elem=c,e=e.split(" ");var n,o=0,p;while(n=e[o++]){j=i?d.extend({},i):{handler:f,data:g},n.indexOf(".")>-1?(p=n.split("."),n=p.shift(),j.namespace=p.slice(0).sort().join(".")):(p=[],j.namespace=""),j.type=n,j.guid||(j.guid=f.guid);var q=l[n],r=d.event.special[n]||{};if(!q){q=l[n]=[];if(!r.setup||r.setup.call(c,g,p,m)===!1)c.addEventListener?c.addEventListener(n,m,!1):c.attachEvent&&c.attachEvent("on"+n,m)}r.add&&(r.add.call(c,j),j.handler.guid||(j.handler.guid=f.guid)),q.push(j),d.event.global[n]=!0}c=null}},global:{},remove:function(a,c,e,f){if(a.nodeType!==3&&a.nodeType!==8){e===!1&&(e=x);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=d.hasData(a)&&d._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(e=c.handler,c=c.type);if(!c||typeof c==="string"&&c.charAt(0)==="."){c=c||"";for(h in t)d.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+d.map(m.slice(0).sort(),w).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!e){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))d.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=d.event.special[h]||{};for(j=f||0;j<p.length;j++){q=p[j];if(e.guid===q.guid){if(l||n.test(q.namespace))f==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(f!=null)break}}if(p.length===0||f!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&d.removeEvent(a,h,s.handle),g=null,delete t[h]}if(d.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,d.isEmptyObject(s)&&d.removeData(a,b,!0)}}},trigger:function(a,c,e){var f=a.type||a,g=arguments[3];if(!g){a=typeof a==="object"?a[d.expando]?a:d.extend(d.Event(f),a):d.Event(f),f.indexOf("!")>=0&&(a.type=f=f.slice(0,-1),a.exclusive=!0),e||(a.stopPropagation(),d.event.global[f]&&d.each(d.cache,function(){var b=d.expando,e=this[b];e&&e.events&&e.events[f]&&d.event.trigger(a,c,e.handle.elem)}));if(!e||e.nodeType===3||e.nodeType===8)return b;a.result=b,a.target=e,c=d.makeArray(c),c.unshift(a)}a.currentTarget=e;var h=d._data(e,"handle");h&&h.apply(e,c);var i=e.parentNode||e.ownerDocument;try{e&&e.nodeName&&d.noData[e.nodeName.toLowerCase()]||e["on"+f]&&e["on"+f].apply(e,c)===!1&&(a.result=!1,a.preventDefault())}catch(j){}if(!a.isPropagationStopped()&&i)d.event.trigger(a,c,i,!0);else if(!a.isDefaultPrevented()){var k,l=a.target,m=f.replace(r,""),n=d.nodeName(l,"a")&&m==="click",o=d.event.special[m]||{};if((!o._default||o._default.call(e,a)===!1)&&!n&&!(l&&l.nodeName&&d.noData[l.nodeName.toLowerCase()])){try{l[m]&&(k=l["on"+m],k&&(l["on"+m]=null),d.event.triggered=a.type,l[m]())}catch(p){}k&&(l["on"+m]=k),d.event.triggered=b}}},handle:function(c){var e,f,g,h,i,j=[],k=d.makeArray(arguments);c=k[0]=d.event.fix(c||a.event),c.currentTarget=this,e=c.type.indexOf(".")<0&&!c.exclusive,e||(g=c.type.split("."),c.type=g.shift(),j=g.slice(0).sort(),h=new RegExp("(^|\\.)"+j.join("\\.(?:.*\\.)?")+"(\\.|$)")),c.namespace=c.namespace||j.join("."),i=d._data(this,"events"),f=(i||{})[c.type];if(i&&f){f=f.slice(0);for(var l=0,m=f.length;l<m;l++){var n=f[l];if(e||h.test(n.namespace)){c.handler=n.handler,c.data=n.data,c.handleObj=n;var o=n.handler.apply(this,k);o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[d.expando])return a;var e=a;a=d.Event(e);for(var f=this.props.length,g;f;)g=this.props[--f],a[g]=e[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=c.documentElement,i=c.body;a.pageX=a.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h&&h.clientLeft||i&&i.clientLeft||0),a.pageY=a.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h&&h.clientTop||i&&i.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:d.proxy,special:{ready:{setup:d.bindReady,teardown:d.noop},live:{add:function(a){d.event.add(this,H(a.origType,a.selector),d.extend({},a,{handler:G,guid:a.handler.guid}))},remove:function(a){d.event.remove(this,H(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){d.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},d.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},d.Event=function(a){if(!this.preventDefault)return new d.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?y:x):this.type=a,this.timeStamp=d.now(),this[d.expando]=!0},d.Event.prototype={preventDefault:function(){this.isDefaultPrevented=y;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=y;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=y,this.stopPropagation()},isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x};var z=function(a){var b=a.relatedTarget;try{if(b&&b!==c&&!b.parentNode)return;while(b&&b!==this)b=b.parentNode;b!==this&&(a.type=a.data,d.event.handle.apply(this,arguments))}catch(e){}},A=function(a){a.type=a.data,d.event.handle.apply(this,arguments)};d.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){d.event.special[a]={setup:function(c){d.event.add(this,b,c&&c.selector?A:z,a)},teardown:function(a){d.event.remove(this,b,a&&a.selector?A:z)}}}),d.support.submitBubbles||(d.event.special.submit={setup:function(a,b){if(this.nodeName&&this.nodeName.toLowerCase()!=="form")d.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&d(b).closest("form").length&&E("submit",this,arguments)}),d.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&d(b).closest("form").length&&a.keyCode===13&&E("submit",this,arguments)});else return!1},teardown:function(a){d.event.remove(this,".specialSubmit")}});if(!d.support.changeBubbles){var B,C=function(a){var b=a.type,c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?d.map(a.options,function(a){return a.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(c=a.selectedIndex);return c},D=function D(a){var c=a.target,e,f;if(s.test(c.nodeName)&&!c.readOnly){e=d._data(c,"_change_data"),f=C(c),(a.type!=="focusout"||c.type!=="radio")&&d._data(c,"_change_data",f);if(e===b||f===e)return;if(e!=null||f)a.type="change",a.liveFired=b,d.event.trigger(a,arguments[1],c)}};d.event.special.change={filters:{focusout:D,beforedeactivate:D,click:function(a){var b=a.target,c=b.type;(c==="radio"||c==="checkbox"||b.nodeName.toLowerCase()==="select")&&D.call(this,a)},keydown:function(a){var b=a.target,c=b.type;(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&D.call(this,a)},beforeactivate:function(a){var b=a.target;d._data(b,"_change_data",C(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in B)d.event.add(this,c+".specialChange",B[c]);return s.test(this.nodeName)},teardown:function(a){d.event.remove(this,".specialChange");return s.test(this.nodeName)}},B=d.event.special.change.filters,B.focus=B.beforeactivate}c.addEventListener&&d.each({focus:"focusin",blur:"focusout"},function(a,b){function f(a){var c=d.event.fix(a);c.type=b,c.originalEvent={},d.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var e=0;d.event.special[b]={setup:function(){e++===0&&c.addEventListener(a,f,!0)},teardown:function(){--e===0&&c.removeEventListener(a,f,!0)}}}),d.each(["bind","one"],function(a,c){d.fn[c]=function(a,e,f){if(typeof a==="object"){for(var g in a)this[c](g,e,a[g],f);return this}if(d.isFunction(e)||e===!1)f=e,e=b;var h=c==="one"?d.proxy(f,function(a){d(this).unbind(a,h);return f.apply(this,arguments)}):f;if(a==="unload"&&c!=="one")this.one(a,e,f);else for(var i=0,j=this.length;i<j;i++)d.event.add(this[i],a,h,e);return this}}),d.fn.extend({unbind:function(a,b){if(typeof a!=="object"||a.preventDefault)for(var e=0,f=this.length;e<f;e++)d.event.remove(this[e],a,b);else for(var c in a)this.unbind(c,a[c]);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){d.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var c=d.Event(a);c.preventDefault(),c.stopPropagation(),d.event.trigger(c,b,this[0]);return c.result}},toggle:function(a){var b=arguments,c=1;while(c<b.length)d.proxy(a,b[c++]);return this.click(d.proxy(a,function(e){var f=(d._data(this,"lastToggle"+a.guid)||0)%c;d._data(this,"lastToggle"+a.guid,f+1),e.preventDefault();return b[f].apply(this,arguments)||!1}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var F={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};d.each(["live","die"],function(a,c){d.fn[c]=function(a,e,f,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:d(this.context);if(typeof a==="object"&&!a.preventDefault){for(var o in a)n[c](o,e,a[o],m);return this}d.isFunction(e)&&(f=e,e=b),a=(a||"").split(" ");while((h=a[i++])!=null){j=r.exec(h),k="",j&&(k=j[0],h=h.replace(r,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,h==="focus"||h==="blur"?(a.push(F[h]+k),h=h+k):h=(F[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)d.event.add(n[p],"live."+H(h,m),{data:e,selector:m,handler:f,origType:h,origHandler:f,preType:l});else n.unbind("live."+H(h,m),f)}return this}}),d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){d.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},d.attrFn&&(d.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!=="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,e,g){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!=="string")return e;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(f.call(n)==="[object Array]")if(u)if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&e.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&e.push(j[t]);else e.push.apply(e,n);else p(n,e);o&&(k(o,h,e,g),k.uniqueSort(e));return e};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(f){if(f===!0)continue}else g=o=!0}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b==="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=u;typeof b==="string"&&!j.test(b)&&(b=b.toLowerCase(),d=b,g=t),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=u;typeof b==="string"&&!j.test(b)&&(b=b.toLowerCase(),d=b,g=t),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"text"===c&&(b===c||b===null)},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(f.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length==="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(a===b){g=!0;return 0}if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!=="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};d.find=k,d.expr=k.selectors,d.expr[":"]=d.expr.filters,d.unique=k.uniqueSort,d.text=k.getText,d.isXMLDoc=k.isXML,d.contains=k.contains}();var I=/Until$/,J=/^(?:parents|prevUntil|prevAll)/,K=/,/,L=/^.[^:#\[\.,]*$/,M=Array.prototype.slice,N=d.expr.match.POS,O={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({find:function(a){var b=this.pushStack("","find",a),c=0;for(var e=0,f=this.length;e<f;e++){c=b.length,d.find(a,this[e],b);if(e>0)for(var g=c;g<b.length;g++)for(var h=0;h<c;h++)if(b[h]===b[g]){b.splice(g--,1);break}}return b},has:function(a){var b=d(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(d.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(Q(this,a,!1),"not",a)},filter:function(a){return this.pushStack(Q(this,a,!0),"filter",a)},is:function(a){return!!a&&d.filter(a,this).length>0},closest:function(a,b){var c=[],e,f,g=this[0];if(d.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(e=0,f=a.length;e<f;e++)i=a[e],j[i]||(j[i]=d.expr.match.POS.test(i)?d(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:d(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=N.test(a)?d(a,b||this.context):null;for(e=0,f=this.length;e<f;e++){g=this[e];while(g){if(l?l.index(g)>-1:d.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b)break}}c=c.length>1?d.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a||typeof a==="string")return d.inArray(this[0],a?d(a):this.parent().children());return d.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==="string"?d(a,b):d.makeArray(a),e=d.merge(this.get(),c);return this.pushStack(P(c[0])||P(e[0])?e:d.unique(e))},andSelf:function(){return this.add(this.prevObject)}}),d.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return d.dir(a,"parentNode")},parentsUntil:function(a,b,c){return d.dir(a,"parentNode",c)},next:function(a){return d.nth(a,2,"nextSibling")},prev:function(a){return d.nth(a,2,"previousSibling")},nextAll:function(a){return d.dir(a,"nextSibling")},prevAll:function(a){return d.dir(a,"previousSibling")},nextUntil:function(a,b,c){return d.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return d.dir(a,"previousSibling",c)},siblings:function(a){return d.sibling(a.parentNode.firstChild,a)},children:function(a){return d.sibling(a.firstChild)},contents:function(a){return d.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:d.makeArray(a.childNodes)}},function(a,b){d.fn[a]=function(c,e){var f=d.map(this,b,c),g=M.call(arguments);I.test(a)||(e=c),e&&typeof e==="string"&&(f=d.filter(e,f)),f=this.length>1&&!O[a]?d.unique(f):f,(this.length>1||K.test(e))&&J.test(a)&&(f=f.reverse());return this.pushStack(f,a,g.join(","))}}),d.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?d.find.matchesSelector(b[0],a)?[b[0]]:[]:d.find.matches(a,b)},dir:function(a,c,e){var f=[],g=a[c];while(g&&g.nodeType!==9&&(e===b||g.nodeType!==1||!d(g).is(e)))g.nodeType===1&&f.push(g),g=g[c];return f},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var R=/ jQuery\d+="(?:\d+|null)"/g,S=/^\s+/,T=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,U=/<([\w:]+)/,V=/<tbody/i,W=/<|&#?\w+;/,X=/<(?:script|object|embed|option|style)/i,Y=/checked\s*(?:[^=]|=\s*.checked.)/i,Z={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Z.optgroup=Z.option,Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td,d.support.htmlSerialize||(Z._default=[1,"div<div>","</div>"]),d.fn.extend({text:function(a){if(d.isFunction(a))return this.each(function(b){var c=d(this);c.text(a.call(this,b,c.text()))});if(typeof a!=="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return d.text(this)},wrapAll:function(a){if(d.isFunction(a))return this.each(function(b){d(this).wrapAll(a.call(this,b))});if(this[0]){var b=d(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(d.isFunction(a))return this.each(function(b){d(this).wrapInner(a.call(this,b))});return this.each(function(){var b=d(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){d(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=d(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,d(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,e;(e=this[c])!=null;c++)if(!a||d.filter(a,[e]).length)!b&&e.nodeType===1&&(d.cleanData(e.getElementsByTagName("*")),d.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&d.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return d.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(R,""):null;if(typeof a!=="string"||X.test(a)||!d.support.leadingWhitespace&&S.test(a)||Z[(U.exec(a)||["",""])[1].toLowerCase()])d.isFunction(a)?this.each(function(b){var c=d(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(T,"<$1></$2>");try{for(var c=0,e=this.length;c<e;c++)this[c].nodeType===1&&(d.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(f){this.empty().append(a)}}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(d.isFunction(a))return this.each(function(b){var c=d(this),e=c.html();c.replaceWith(a.call(this,b,e))});typeof a!=="string"&&(a=d(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;d(this).remove(),b?d(b).before(a):d(c).append(a)})}return this.length?this.pushStack(d(d.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,e){var f,g,h,i,j=a[0],k=[];if(!d.support.checkClone&&arguments.length===3&&typeof j==="string"&&Y.test(j))return this.each(function(){d(this).domManip(a,c,e,!0)});if(d.isFunction(j))return this.each(function(f){var g=d(this);a[0]=j.call(this,f,c?g.html():b),g.domManip(a,c,e)});if(this[0]){i=j&&j.parentNode,d.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?f={fragment:i}:f=d.buildFragment(a,this,k),h=f.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&d.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)e.call(c?$(this[l],g):this[l],f.cacheable||m>1&&l<n?d.clone(h,!0,!0):h)}k.length&&d.each(k,bc)}return this}}),d.buildFragment=function(a,b,e){var f,g,h,i=b&&b[0]?b[0].ownerDocument||b[0]:c;a.length===1&&typeof a[0]==="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!X.test(a[0])&&(d.support.checkClone||!Y.test(a[0]))&&(g=!0,h=d.fragments[a[0]],h&&(h!==1&&(f=h))),f||(f=i.createDocumentFragment(),d.clean(a,i,f,e)),g&&(d.fragments[a[0]]=h?f:1);return{fragment:f,cacheable:g}},d.fragments={},d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){d.fn[a]=function(c){var e=[],f=d(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&f.length===1){f[b](this[0]);return this}for(var h=0,i=f.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();d(f[h])[b](j),e=e.concat(j)}return this.pushStack(e,a,f.selector)}}),d.extend({clone:function(a,b,c){var e=a.cloneNode(!0),f,g,h;if((!d.support.noCloneEvent||!d.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!d.isXMLDoc(a)){ba(a,e),f=bb(a),g=bb(e);for(h=0;f[h];++h)ba(f[h],g[h])}if(b){_(a,e);if(c){f=bb(a),g=bb(e);for(h=0;f[h];++h)_(f[h],g[h])}}return e},clean:function(a,b,e,f){b=b||c,typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var g=[];for(var h=0,i;(i=a[h])!=null;h++){typeof i==="number"&&(i+="");if(!i)continue;if(typeof i!=="string"||W.test(i)){if(typeof i==="string"){i=i.replace(T,"<$1></$2>");var j=(U.exec(i)||["",""])[1].toLowerCase(),k=Z[j]||Z._default,l=k[0],m=b.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!d.support.tbody){var n=V.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(var p=o.length-1;p>=0;--p)d.nodeName(o[p],"tbody")&&!o[p].childNodes.length&&o[p].parentNode.removeChild(o[p])}!d.support.leadingWhitespace&&S.test(i)&&m.insertBefore(b.createTextNode(S.exec(i)[0]),m.firstChild),i=m.childNodes}}else i=b.createTextNode(i);i.nodeType?g.push(i):g=d.merge(g,i)}if(e)for(h=0;g[h];h++)!f||!d.nodeName(g[h],"script")||g[h].type&&g[h].type.toLowerCase()!=="text/javascript"?(g[h].nodeType===1&&g.splice.apply(g,[h+1,0].concat(d.makeArray(g[h].getElementsByTagName("script")))),e.appendChild(g[h])):f.push(g[h].parentNode?g[h].parentNode.removeChild(g[h]):g[h]);return g},cleanData:function(a){var b,c,e=d.cache,f=d.expando,g=d.event.special,h=d.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&d.noData[j.nodeName.toLowerCase()])continue;c=j[d.expando];if(c){b=e[c]&&e[c][f];if(b&&b.events){for(var k in b.events)g[k]?d.event.remove(j,k):d.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[d.expando]:j.removeAttribute&&j.removeAttribute(d.expando),delete e[c]}}}});var bd=/alpha\([^)]*\)/i,be=/opacity=([^)]*)/,bf=/-([a-z])/ig,bg=/([A-Z]|^ms)/g,bh=/^-?\d+(?:px)?$/i,bi=/^-?\d/,bj={position:"absolute",visibility:"hidden",display:"block"},bk=["Left","Right"],bl=["Top","Bottom"],bm,bn,bo,bp=function(a,b){return b.toUpperCase()};d.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return d.access(this,a,c,!0,function(a,c,e){return e!==b?d.style(a,c,e):d.css(a,c)})},d.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bm(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{"float":d.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,e,f){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var g,h=d.camelCase(c),i=a.style,j=d.cssHooks[h];c=d.cssProps[h]||h;if(e===b){if(j&&"get"in j&&(g=j.get(a,!1,f))!==b)return g;return i[c]}if(typeof e==="number"&&isNaN(e)||e==null)return;typeof e==="number"&&!d.cssNumber[h]&&(e+="px");if(!j||!("set"in j)||(e=j.set(a,e))!==b)try{i[c]=e}catch(k){}}},css:function(a,c,e){var f,g=d.camelCase(c),h=d.cssHooks[g];c=d.cssProps[g]||g;if(h&&"get"in h&&(f=h.get(a,!0,e))!==b)return f;if(bm)return bm(a,c,g)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]},camelCase:function(a){return a.replace(bf,bp)}}),d.curCSS=d.css,d.each(["height","width"],function(a,b){d.cssHooks[b]={get:function(a,c,e){var f;if(c){a.offsetWidth!==0?f=bq(a,b,e):d.swap(a,bj,function(){f=bq(a,b,e)});if(f<=0){f=bm(a,b,b),f==="0px"&&bo&&(f=bo(a,b,b));if(f!=null)return f===""||f==="auto"?"0px":f}if(f<0||f==null){f=a.style[b];return f===""||f==="auto"?"0px":f}return typeof f==="string"?f:f+"px"}},set:function(a,b){if(!bh.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),d.support.opacity||(d.cssHooks.opacity={get:function(a,b){return be.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style;c.zoom=1;var e=d.isNaN(b)?"":"alpha(opacity="+b*100+")",f=c.filter||"";c.filter=bd.test(f)?f.replace(bd,e):c.filter+" "+e}}),d(function(){d.support.reliableMarginRight||(d.cssHooks.marginRight={get:function(a,b){var c;d.swap(a,{display:"inline-block"},function(){b?c=bm(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bn=function(a,c,e){var f,g,h;e=e.replace(bg,"-$1").toLowerCase();if(!(g=a.ownerDocument.defaultView))return b;if(h=g.getComputedStyle(a,null))f=h.getPropertyValue(e),f===""&&!d.contains(a.ownerDocument.documentElement,a)&&(f=d.style(a,e));return f}),c.documentElement.currentStyle&&(bo=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bh.test(d)&&bi.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bm=bn||bo,d.expr&&d.expr.filters&&(d.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!d.support.reliableHiddenOffsets&&(a.style.display||d.css(a,"display"))==="none"},d.expr.filters.visible=function(a){return!d.expr.filters.hidden(a)});var br=/%20/g,bs=/\[\]$/,bt=/\r?\n/g,bu=/#.*$/,bv=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bw=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bx=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,by=/^(?:GET|HEAD)$/,bz=/^\/\//,bA=/\?/,bB=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bC=/^(?:select|textarea)/i,bD=/\s+/,bE=/([?&])_=[^&]*/,bF=/(^|\-)([a-z])/g,bG=function(a,b,c){return b+c.toUpperCase()},bH=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bI=d.fn.load,bJ={},bK={},bL,bM;try{bL=c.location.href}catch(bN){bL=c.createElement("a"),bL.href="",bL=bL.href}bM=bH.exec(bL.toLowerCase())||[],d.fn.extend({load:function(a,c,e){if(typeof a!=="string"&&bI)return bI.apply(this,arguments);if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var g=a.slice(f,a.length);a=a.slice(0,f)}var h="GET";c&&(d.isFunction(c)?(e=c,c=b):typeof c==="object"&&(c=d.param(c,d.ajaxSettings.traditional),h="POST"));var i=this;d.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?d("<div>").append(c.replace(bB,"")).find(g):c)),e&&i.each(e,[c,b,a])}});return this},serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?d.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bC.test(this.nodeName)||bw.test(this.type))}).map(function(a,b){var c=d(this).val();return c==null?null:d.isArray(c)?d.map(c,function(a,c){return{name:b.name,value:a.replace(bt,"\r\n")}}):{name:b.name,value:c.replace(bt,"\r\n")}}).get()}}),d.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){d.fn[b]=function(a){return this.bind(b,a)}}),d.each(["get","post"],function(a,c){d[c]=function(a,e,f,g){d.isFunction(e)&&(g=g||f,f=e,e=b);return d.ajax({type:c,url:a,data:e,success:f,dataType:g})}}),d.extend({getScript:function(a,c){return d.get(a,b,c,"script")},getJSON:function(a,b,c){return d.get(a,b,c,"json")},ajaxSetup:function(a,b){b?d.extend(!0,a,d.ajaxSettings,b):(b=a,a=d.extend(!0,d.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in d.ajaxSettings&&(a[c]=d.ajaxSettings[c]);return a},ajaxSettings:{url:bL,isLocal:bx.test(bM[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML}},ajaxPrefilter:bO(bJ),ajaxTransport:bO(bK),ajax:function(a,c){function v(a,c,l,n){if(r!==2){r=2,p&&clearTimeout(p),o=b,m=n||"",u.readyState=a?4:0;var q,t,v,w=l?bR(e,u,l):b,x,y;if(a>=200&&a<300||a===304){if(e.ifModified){if(x=u.getResponseHeader("Last-Modified"))d.lastModified[k]=x;if(y=u.getResponseHeader("Etag"))d.etag[k]=y}if(a===304)c="notmodified",q=!0;else try{t=bS(e,w),c="success",q=!0}catch(z){c="parsererror",v=z}}else{v=c;if(!c||a)c="error",a<0&&(a=0)}u.status=a,u.statusText=c,q?h.resolveWith(f,[t,c,u]):h.rejectWith(f,[u,c,v]),u.statusCode(j),j=b,s&&g.trigger("ajax"+(q?"Success":"Error"),[u,e,q?t:v]),i.resolveWith(f,[u,c]),s&&(g.trigger("ajaxComplete",[u,e]),--d.active||d.event.trigger("ajaxStop"))}}typeof a==="object"&&(c=a,a=b),c=c||{};var e=d.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof d)?d(f):d.event,h=d.Deferred(),i=d._Deferred(),j=e.statusCode||{},k,l={},m,n,o,p,q,r=0,s,t,u={readyState:0,setRequestHeader:function(a,b){r||(l[a.toLowerCase().replace(bF,bG)]=b);return this},getAllResponseHeaders:function(){return r===2?m:null},getResponseHeader:function(a){var c;if(r===2){if(!n){n={};while(c=bv.exec(m))n[c[1].toLowerCase()]=c[2]}c=n[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){r||(e.mimeType=a);return this},abort:function(a){a=a||"abort",o&&o.abort(a),v(0,a);return this}};h.promise(u),u.success=u.done,u.error=u.fail,u.complete=i.done,u.statusCode=function(a){if(a){var b;if(r<2)for(b in a)j[b]=[j[b],a[b]];else b=a[u.status],u.then(b,b)}return this},e.url=((a||e.url)+"").replace(bu,"").replace(bz,bM[1]+"//"),e.dataTypes=d.trim(e.dataType||"*").toLowerCase().split(bD),e.crossDomain==null&&(q=bH.exec(e.url.toLowerCase()),e.crossDomain=q&&(q[1]!=bM[1]||q[2]!=bM[2]||(q[3]||(q[1]==="http:"?80:443))!=(bM[3]||(bM[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!=="string"&&(e.data=d.param(e.data,e.traditional)),bP(bJ,e,c,u);if(r===2)return!1;s=e.global,e.type=e.type.toUpperCase(),e.hasContent=!by.test(e.type),s&&d.active++===0&&d.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bA.test(e.url)?"&":"?")+e.data),k=e.url;if(e.cache===!1){var w=d.now(),x=e.url.replace(bE,"$1_="+w);e.url=x+(x===e.url?(bA.test(e.url)?"&":"?")+"_="+w:"")}}if(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)l["Content-Type"]=e.contentType;e.ifModified&&(k=k||e.url,d.lastModified[k]&&(l["If-Modified-Since"]=d.lastModified[k]),d.etag[k]&&(l["If-None-Match"]=d.etag[k])),l.Accept=e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"];for(t in e.headers)u.setRequestHeader(t,e.headers[t]);if(e.beforeSend&&(e.beforeSend.call(f,u,e)===!1||r===2)){u.abort();return!1}for(t in{success:1,error:1,complete:1})u[t](e[t]);o=bP(bK,e,c,u);if(o){u.readyState=1,s&&g.trigger("ajaxSend",[u,e]),e.async&&e.timeout>0&&(p=setTimeout(function(){u.abort("timeout")},e.timeout));try{r=1,o.send(l,v)}catch(y){status<2?v(-1,y):d.error(y)}}else v(-1,"No Transport");return u},param:function(a,c){var e=[],f=function(a,b){b=d.isFunction(b)?b():b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=d.ajaxSettings.traditional);if(d.isArray(a)||a.jquery&&!d.isPlainObject(a))d.each(a,function(){f(this.name,this.value)});else for(var g in a)bQ(g,a[g],c,f);return e.join("&").replace(br,"+")}}),d.extend({active:0,lastModified:{},etag:{}});var bT=d.now(),bU=/(\=)\?(&|$)|\?\?/i;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return d.expando+"_"+bT++}}),d.ajaxPrefilter("json jsonp",function(b,c,e){var f=typeof b.data==="string";if(b.dataTypes[0]==="jsonp"||c.jsonpCallback||c.jsonp!=null||b.jsonp!==!1&&(bU.test(b.url)||f&&bU.test(b.data))){var g,h=b.jsonpCallback=d.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2",m=function(){a[h]=i,g&&d.isFunction(i)&&a[h](g[0])};b.jsonp!==!1&&(j=j.replace(bU,l),b.url===j&&(f&&(k=k.replace(bU,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},e.then(m,m),b.converters["script json"]=function(){g||d.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){d.globalEval(a);return a}}}),d.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),d.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var bV=d.now(),bW,bX;d.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&bZ()||b$()}:bZ,bX=d.ajaxSettings.xhr(),d.support.ajax=!!bX,d.support.cors=bX&&"withCredentials"in bX,bX=b,d.support.ajax&&d.ajaxTransport(function(a){if(!a.crossDomain||d.support.cors){var c;return{send:function(e,f){var g=a.xhr(),h,i;a.username?g.open(a.type,a.url,a.async,a.username,a.password):g.open(a.type,a.url,a.async);if(a.xhrFields)for(i in a.xhrFields)g[i]=a.xhrFields[i];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType),!a.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(a.hasContent&&a.data||null),c=function(e,i){var j,k,l,m,n;try{if(c&&(i||g.readyState===4)){c=b,h&&(g.onreadystatechange=d.noop,delete bW[h]);if(i)g.readyState!==4&&g.abort();else{j=g.status,l=g.getAllResponseHeaders(),m={},n=g.responseXML,n&&n.documentElement&&(m.xml=n),m.text=g.responseText;try{k=g.statusText}catch(o){k=""}j||!a.isLocal||a.crossDomain?j===1223&&(j=204):j=m.text?200:404}}}catch(p){i||f(-1,p)}m&&f(j,k,m,l)},a.async&&g.readyState!==4?(bW||(bW={},bY()),h=bV++,g.onreadystatechange=bW[h]=c):c()},abort:function(){c&&c(0,1)}}}});var b_={},ca=/^(?:toggle|show|hide)$/,cb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cc,cd=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];d.fn.extend({show:function(a,b,c){var e,f;if(a||a===0)return this.animate(ce("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)e=this[g],f=e.style.display,!d._data(e,"olddisplay")&&f==="none"&&(f=e.style.display=""),f===""&&d.css(e,"display")==="none"&&d._data(e,"olddisplay",cf(e.nodeName));for(g=0;g<h;g++){e=this[g],f=e.style.display;if(f===""||f==="none")e.style.display=d._data(e,"olddisplay")||""}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ce("hide",3),a,b,c);for(var e=0,f=this.length;e<f;e++){var g=d.css(this[e],"display");g!=="none"&&!d._data(this[e],"olddisplay")&&d._data(this[e],"olddisplay",g)}for(e=0;e<f;e++)this[e].style.display="none";return this},_toggle:d.fn.toggle,toggle:function(a,b,c){var e=typeof a==="boolean";d.isFunction(a)&&d.isFunction(b)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var b=e?a:d(this).is(":hidden");d(this)[b?"show":"hide"]()}):this.animate(ce("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){var f=d.speed(b,c,e);if(d.isEmptyObject(a))return this.each(f.complete);return this[f.queue===!1?"each":"queue"](function(){var b=d.extend({},f),c,e=this.nodeType===1,g=e&&d(this).is(":hidden"),h=this;for(c in a){var i=d.camelCase(c);c!==i&&(a[i]=a[c],delete a[c],c=i);if(a[c]==="hide"&&g||a[c]==="show"&&!g)return b.complete.call(this);if(e&&(c==="height"||c==="width")){b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(d.css(this,"display")==="inline"&&d.css(this,"float")==="none")if(d.support.inlineBlockNeedsLayout){var j=cf(this.nodeName);j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)}else this.style.display="inline-block"}d.isArray(a[c])&&((b.specialEasing=b.specialEasing||{})[c]=a[c][1],a[c]=a[c][0])}b.overflow!=null&&(this.style.overflow="hidden"),b.curAnim=d.extend({},a),d.each(a,function(c,e){var f=new d.fx(h,b,c);if(ca.test(e))f[e==="toggle"?g?"show":"hide":e](a);else{var i=cb.exec(e),j=f.cur();if(i){var k=parseFloat(i[2]),l=i[3]||(d.cssNumber[c]?"":"px");l!=="px"&&(d.style(h,c,(k||1)+l),j=(k||1)/f.cur()*j,d.style(h,c,j+l)),i[1]&&(k=(i[1]==="-="?-1:1)*k+j),f.custom(j,k,l)}else f.custom(j,e,"")}});return!0})},stop:function(a,b){var c=d.timers;a&&this.queue([]),this.each(function(){for(var a=c.length-1;a>=0;a--)c[a].elem===this&&(b&&c[a](!0),c.splice(a,1))}),b||this.dequeue();return this}}),d.each({slideDown:ce("show",1),slideUp:ce("hide",1),slideToggle:ce("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){d.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),d.extend({speed:function(a,b,c){var e=a&&typeof a==="object"?d.extend({},a):{complete:c||!c&&b||d.isFunction(a)&&a,duration:a,easing:c&&b||b&&!d.isFunction(b)&&b};e.duration=d.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in d.fx.speeds?d.fx.speeds[e.duration]:d.fx.speeds._default,e.old=e.complete,e.complete=function(){e.queue!==!1&&d(this).dequeue(),d.isFunction(e.old)&&e.old.call(this)};return e},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),d.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(d.fx.step[this.prop]||d.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=d.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function g(a){return e.step(a)}var e=this,f=d.fx;this.startTime=d.now(),this.start=a,this.end=b,this.unit=c||this.unit||(d.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&d.timers.push(g)&&!cc&&(cc=setInterval(f.tick,f.interval))},show:function(){this.options.orig[this.prop]=d.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),d(this.elem).show()},hide:function(){this.options.orig[this.prop]=d.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=d.now(),c=!0;if(a||b>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var e in this.options.curAnim)this.options.curAnim[e]!==!0&&(c=!1);if(c){if(this.options.overflow!=null&&!d.support.shrinkWrapBlocks){var f=this.elem,g=this.options;d.each(["","X","Y"],function(a,b){f.style["overflow"+b]=g.overflow[a]})}this.options.hide&&d(this.elem).hide();if(this.options.hide||this.options.show)for(var h in this.options.curAnim)d.style(this.elem,h,this.options.orig[h]);this.options.complete.call(this.elem)}return!1}var i=b-this.startTime;this.state=i/this.options.duration;var j=this.options.specialEasing&&this.options.specialEasing[this.prop],k=this.options.easing||(d.easing.swing?"swing":"linear");this.pos=d.easing[j||k](this.state,i,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update();return!0}},d.extend(d.fx,{tick:function(){var a=d.timers;for(var b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||d.fx.stop()},interval:13,stop:function(){clearInterval(cc),cc=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){d.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),d.expr&&d.expr.filters&&(d.expr.filters.animated=function(a){return d.grep(d.timers,function(b){return a===b.elem}).length});var cg=/^t(?:able|d|h)$/i,ch=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?d.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){d.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,g=f.documentElement;if(!c||!d.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=f.body,i=ci(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||d.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||d.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:d.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){d.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);d.offset.initialize();var c,e=b.offsetParent,f=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(d.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===e&&(l+=b.offsetTop,m+=b.offsetLeft,d.offset.doesNotAddBorder&&(!d.offset.doesAddBorderForTableAndCells||!cg.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),f=e,e=b.offsetParent),d.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;d.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},d.offset={initialize:function(){var a=c.body,b=c.createElement("div"),e,f,g,h,i=parseFloat(d.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";d.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),e=b.firstChild,f=e.firstChild,h=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=f.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,f.style.position="fixed",f.style.top="20px",this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15,f.style.position=f.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),d.offset.initialize=d.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;d.offset.initialize(),d.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(d.css(a,"marginTop"))||0,c+=parseFloat(d.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var e=d.css(a,"position");e==="static"&&(a.style.position="relative");var f=d(a),g=f.offset(),h=d.css(a,"top"),i=d.css(a,"left"),j=(e==="absolute"||e==="fixed")&&d.inArray("auto",[h,i])>-1,k={},l={},m,n;j&&(l=f.position()),m=j?l.top:parseInt(h,10)||0,n=j?l.left:parseInt(i,10)||0,d.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):f.css(k)}},d.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),e=ch.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(d.css(a,"marginTop"))||0,c.left-=parseFloat(d.css(a,"marginLeft"))||0,e.top+=parseFloat(d.css(b[0],"borderTopWidth"))||0,e.left+=parseFloat(d.css(b[0],"borderLeftWidth"))||0;return{top:c.top-e.top,left:c.left-e.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&(!ch.test(a.nodeName)&&d.css(a,"position")==="static"))a=a.offsetParent;return a})}}),d.each(["Left","Top"],function(a,c){var e="scroll"+c;d.fn[e]=function(c){var f=this[0],g;if(!f)return null;if(c!==b)return this.each(function(){g=ci(this),g?g.scrollTo(a?d(g).scrollLeft():c,a?c:d(g).scrollTop()):this[e]=c});g=ci(f);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:d.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]}}),d.each(["Height","Width"],function(a,c){var e=c.toLowerCase();d.fn["inner"+c]=function(){return this[0]?parseFloat(d.css(this[0],e,"padding")):null},d.fn["outer"+c]=function(a){return this[0]?parseFloat(d.css(this[0],e,a?"margin":"border")):null},d.fn[e]=function(a){var f=this[0];if(!f)return a==null?null:this;if(d.isFunction(a))return this.each(function(b){var c=d(this);c[e](a.call(this,b,c[e]()))});if(d.isWindow(f)){var g=f.document.documentElement["client"+c];return f.document.compatMode==="CSS1Compat"&&g||f.document.body["client"+c]||g}if(f.nodeType===9)return Math.max(f.documentElement["client"+c],f.body["scroll"+c],f.documentElement["scroll"+c],f.body["offset"+c],f.documentElement["offset"+c]);if(a===b){var h=d.css(f,e),i=parseFloat(h);return d.isNaN(i)?h:i}return this.css(e,typeof a==="string"?a:a+"px")}}),a.jQuery=a.$=d})(window);
function initPageRendering(){$("html").css({"overflow":"hidden"});$("body").css({"overflow-x":"hidden"});var newHeight=$(window).height();$('body').height(newHeight);$('#postHelp').height(newHeight);$('#postMain').height(newHeight);$(window).resize(function(){var resizeHeight=$(window).height();$('body').height(resizeHeight);$('#postHelp').height(resizeHeight);$('#postMain').height(resizeHeight);resizeSyiRightBox();if($.browser.msie&&$.browser.version=="6.0"){resizeScrollIeBox();}});if($.browser.msie&&$.browser.version=="6.0"){ie6Scroll();}
returnTopHide();syiTranslate();resizeSyiRightBox();initViewPostHelp();}
function resizeScrollIeBox(){if($('#postHelp').css('display')=="none"){var resizeMainWidth=$(window).width();$("#postMain").width(resizeMainWidth);}else{var resizeMainWidth=$(window).width()-$('#postHelp').width();$("#postMain").width(resizeMainWidth);}}
function syiTranslate(){syiOnLineChatBox();var translateBox=$(".syi-translate > .show-translabox");$(translateBox).click(function(){if($(this).hasClass("hide-translabox")){$(this).removeClass("hide-translabox");$(this).next().hide();$("#translateBox").css({"width":"auto"});}else{$(this).addClass("hide-translabox");$(this).next().show();$("#translateBox").css({"width":"157px"});}});}
function resizeSyiRightBox(){var translateBoxTop=parseInt($("#translateBox").offset().top);$("#onLineChatBox").css({"top":(translateBoxTop+76)});}
function syiOnLineChatBox(){var onlinechatBox=$(".syi-onlinechat > .show-onlinechat");$(onlinechatBox).click(function(){if($(this).hasClass("hide-onlinechat")){$(this).removeClass("hide-onlinechat");$(this).next().hide();$("#onLineChatBox").css({"width":"auto"});}else{$(this).addClass("hide-onlinechat");$(this).next().show();$("#onLineChatBox").css({"width":"179px"});}});}
function returnTopHide(){if(returnTopHide.timer){clearTimeout(returnTopHide.timer);}
returnTopHide.timer=setTimeout(function(){var returntopbox=$(".syi-returntop > .returntopbox");var returntopboxScrollTop=$("#postMain").scrollTop();var returntopboxHeight=$("#postMain").height();if(returntopboxScrollTop>=(returntopboxHeight/4)){$(returntopbox).animate({opacity:'show'},800);}else{$(returntopbox).animate({opacity:'hide'},800);}
returnTopHide();},500);}
function initGuideBoxDl(){var initGuidePop=new Pop({oPop:"idPop_e",zIndex:3001,idOpen:["ViewNewUserWizard"],mode:["center","center"],idClose:["close_e","close_e_1","close_e_2"],cover:true,beCover:false,zIndexCover:2002,colorCover:"#c0c0c0",opactiyCover:0.5});$("#ViewNewUserWizard").click(function(){showGuideLazyLoad();});}
function initLayoutHelpIcon(){var helpiconshow=new Pop({oPop:"idPop_helpIconShow",zIndex:3001,idOpen:["idOpenHelpIconShow"],mode:["center","center"],idClose:["idPop_help_close01","idPop_help_close02"],cover:true,beCover:false,zIndexCover:2002,colorCover:"#c0c0c0",opactiyCover:0.5});}
function helpIconBtn(){initGuideBoxDl();initLayoutHelpIcon();var helpIconBtn=$(".helpicon");for(var i=0;i<helpIconBtn.length;i++){(function(){var index=i;$(helpIconBtn[index]).click(function(){var postHelp=$("#postHelp");var postMain=$("#postMain");var needHekpTipVal=$("#helpTipid").text();var defaultHelpTipVal=$(this).attr("helptipval");if(postHelp.css('display')=="none"){$(postHelp).css({"display":"block"});$(postMain).css({"margin-right":"235px"});$("#translateBox").css({right:261});$("#onLineChatBox").css({right:261});$("#returnTopBox").css({right:261});$("html").css({"overflow-y":"hidden"});if($.browser.msie&&$.browser.version=="6.0"){$("#translateBox").css({right:10});$("#onLineChatBox").css({right:10});$("#returnTopBox").css({right:10});var resizeMainWidth=$(window).width()-$('#postHelp').width();$("#postMain").width(resizeMainWidth);}}else{if(defaultHelpTipVal!=needHekpTipVal){if((helpIconBtn.length-1)!=index){return;}}
if($.cookie('syiHelpTipsLayer')!='yes'){$.cookie('syiHelpTipsLayer','yes',{expires:365,domain:'seller.dhgate.com'});$("#idOpenHelpIconShow").click();}
lastLeftPanelWidth=$('#postHelp').width();$(postHelp).css({"display":"none"});$(postMain).css({"margin-right":"0"});$("#translateBox").css({right:26});$("#onLineChatBox").css({right:26});$("#returnTopBox").css({right:26});if($.browser.msie&&$.browser.version=="6.0"){$("html").css({"overflow-y":"hidden"});$("#translateBox").css({right:10});$("#onLineChatBox").css({right:10});$("#returnTopBox").css({right:10});var resizeMainWidth=$(window).width();$("#postMain").width(resizeMainWidth);}else{$("html").css({"overflow-y":"auto"});}}});})();}}
function ie6Scroll(){if(ie6Scroll.timer){clearTimeout(ie6Scroll.timer);}
if($.browser.msie&&$.browser.version=="6.0"){var translateBox_y=($("#postMain").height()-$("#translateBox").height())/2+$("#postMain").scrollTop();var returnTopBox_y=($("#postMain").height()-$("#returnTopBox").height())/1+$("#postMain").scrollTop();$("#translateBox").css({"top":translateBox_y});$("#onLineChatBox").css({"top":translateBox_y+76});$("#returnTopBox").css({"top":returnTopBox_y});$("#product_cattr_container").css({"display":"inline","width":($(".postmargin").width()-50)});}
ie6Scroll.timer=setTimeout(function(){ie6Scroll();},10);}
function initViewPostHelp(){if($.cookie('syiHelpTipsLayer')!='yes'){$("#postHelp").css({"display":"block"});$("#postMain").css({"margin-right":"235px"});$("#translateBox").css({right:261});$("#onLineChatBox").css({right:261});$("#returnTopBox").css({right:261});if($.browser.msie&&$.browser.version=="6.0"){$("#translateBox").css({right:10});$("#onLineChatBox").css({right:10});$("#returnTopBox").css({right:10});var resizeMainWidth=$(window).width()-$('#postHelp').width();$("#postMain").width(resizeMainWidth);}}else{$("#postHelp").css({"display":"none"});$("#postMain").css({"margin-right":"0"});$("#translateBox").css({right:26});$("#onLineChatBox").css({right:26});$("#returnTopBox").css({right:26});if($.browser.msie&&$.browser.version=="6.0"){$("html").css({"overflow-y":"hidden"});$("#translateBox").css({right:10});$("#onLineChatBox").css({right:10});$("#returnTopBox").css({right:10});var resizeMainWidth=$(window).width();$("#postMain").width(resizeMainWidth);}}};
function showGuideLazyLoad(){var guidedBoxImgList=$("#guidedBoxImgList");var guidedBoxLazyLoadImg=$("#guidedBoxLazyLoadImg");var guidedBoxLazyLoadImgVal=$("#guidedBoxLazyLoadImg").html();if(guidedBoxLazyLoadImg.val()!=null){$(guidedBoxImgList).append(guidedBoxLazyLoadImgVal);guidedBoxLazyLoadImg.remove();}
showGuideBoxListImg();}
function showGuideBoxListImg(){var GuideList=$("#guidedBoxImgList > div"),GuidedBtnList=$("#guidedBoxBtnList > li"),GuidedNext=$(".guidednext"),GuidedPre=$(".guidedpre"),PageNumBox=$("#pagenumbox"),PageAllNum=$(".pageallnum"),GSBoxLeft=$(".gsboxleft"),GuideStartRead=$(".guidestartread");for(var i=0;i<GuidedBtnList.length;i++){(function(){var index=i;$(GuideStartRead).bind("click",function(){$(GuidedBtnList).hide();$(GuidedBtnList[1]).show();$(GuideList).hide();$(GuideList[1]).show();GSBoxLeft.show();PageNumBox.text(1);PageAllNum.text(GuidedBtnList.length-1);});$(GuidedNext[index]).bind("click",function(){$(GuidedBtnList).hide();$(GuideList).hide();$(GuidedBtnList[index+2]).show();$(GuideList[index+2]).show();PageNumBox.text(index+2);});$(GuidedPre[index]).bind("click",function(){$(GuidedBtnList).hide();$(GuideList).hide();$(GuidedBtnList[index+1]).show();$(GuideList[index+1]).show();PageNumBox.text(index+1);});})();}}
var Pop=function(options){this.isIE=(document.all)?true:false;this.isIE6=this.isIE&&(navigator.userAgent.indexOf('MSIE 6.0')!=-1);this.isIE6?this.position="absolute":this.position="fixed";this.SetOptions(options);this.mode=this.options.mode;this.zIndex=this.options.zIndex;this.left=this.options.left;this.right=this.options.right;this.top=this.options.top;this.bottom=this.options.bottom;this.oPop=$("#"+this.options.oPop);this.oPop.css({position:this.position,"z-index":this.zIndex});this.oPop.appendTo("body");if(this.options.beCover){this.Start();this.Initialization();this.FullScreen(this.heightDocument,this.widthDocument);}
if(!!this.options.idShrink)this.Shrink(this.options.idShrink);if(this.options.idClose.length!=0)this.Close(this.options.idClose);this.options.idOpen.length!=0?this.Open(this.options.idOpen):this.Start();};Pop.prototype={SetOptions:function(options){this.options={oPop:"idPop",zIndex:"999",left:0,right:0,top:0,bottom:0,mode:["left","top"],beCover:false,cover:false,zIndexCover:888,colorCover:"#000",opactiyCover:0.5,idShrink:null,minHeight:0,maxHeight:0,classOne:null,classTwo:null,idOpen:[],idClose:[]};$.extend(this.options,options||{});},Initialization:function(){this.widthPop=this.oPop.width();this.heightPop=this.oPop.height();this.heightDocument=$(document).height();this.widthDocument=Math.min($(document).width(),$("body").width());this.heightWindow=$(window).height();this.widthWindow=$(window).width();this.topScroll=$(window).scrollTop();this.leftScroll=$(window).scrollLeft();},Start:function(){switch(this.mode[0].toLowerCase()){case"left":this.LeftRightLocation();break;case"right":this.LeftRightLocation();break;default:this.CenterLocation();}},GetValue:function(mark){if(this.oPop.css("display")=="none")return;var level=this.mode[0].toLowerCase(),vertical=this.mode[1].toLowerCase();this.Initialization();if(mark){if(!this.isIE6){level=="left"?this.oPop.css({left:this.left}):this.oPop.css({right:this.right});vertical=="top"?this.oPop.css({top:this.top}):this.oPop.css({bottom:this.bottom});}else{var x_final=level=="left"?this.leftScroll+this.left:this.widthWindow+this.leftScroll-this.widthPop-this.right;var y_final=vertical=="top"?this.topScroll+this.top:this.heightWindow+this.topScroll-this.heightPop-this.bottom;this.oPop.css({top:y_final,left:x_final});}}else{if(!this.isIE6){var x_final=parseInt((this.widthWindow-this.widthPop)/2);var y_final=parseInt((this.heightWindow-this.heightPop)/2);}else{var x_final=(this.widthWindow-this.widthPop)/2+this.leftScroll;var y_final=(this.heightWindow-this.heightPop)/2+this.topScroll;}
this.oPop.css({top:y_final,left:x_final});}
if(this.isIE6){this.AddIframe(this.oPop,this.heightPop,this.widthPop);}},LeftRightLocation:function(){this.GetValue(true);var _this=this;$(window).bind("scroll."+this.options.oPop,function(){_this.GetValue(true);}).bind("resize."+this.options.oPop,function(){_this.GetValue(true);});},CenterLocation:function(){this.GetValue(false);var _this=this;$(window).bind("scroll."+this.options.oPop,function(){_this.GetValue(false);}).bind("resize."+this.options.oPop,function(){_this.GetValue(false);if(_this.oPop.css("display")!="none")_this.FullScreen(_this.heightDocument,_this.widthDocument);});},FullScreen:function(oHeight,oWidth){if(!this.options.cover)return;this.zIndexCover=this.options.zIndexCover;this.colorCover=this.options.colorCover;this.opactiyCover=this.options.opactiyCover;if($("#popMask").length==0)$("body").append("<div id=\"popMask\"></div>");if(this.isIE6){$("#popMask").css({position:"absolute","z-index":this.zIndexCover,top:0,left:0,height:oHeight,width:oWidth,opacity:this.opactiyCover,background:this.colorCover});this.AddIframe($("#popMask"),oHeight,oWidth);}else{$("#popMask").css({position:"fixed","z-index":this.zIndexCover,top:0,left:0,height:"100%",width:"100%",opacity:this.opactiyCover,background:this.colorCover});}},AddIframe:function(iElement,iHeight,iWidth){iElement.append("<iframe></iframe>");var oIframe=iElement.children("iframe");oIframe.css({position:"absolute",top:0,left:0,opacity:0,"z-index":-1,height:iHeight,width:iWidth,border:0});},Shrink:function(iShrink){this.minHeight=this.options.minHeight;this.maxHeight=this.options.maxHeight;this.classOne=this.options.classOne;this.classTwo=this.options.classTwo;var _this=this;$("#"+iShrink).toggle(function(){_this.oPop.height(_this.minHeight);$(this).removeClass();$(this).addClass(_this.classOne);if(_this.isIE6)_this.GetValue(true);},function(){_this.oPop.height(_this.maxHeight);$(this).removeClass();$(this).addClass(_this.classTwo);if(_this.isIE6)_this.GetValue(true);});},Close:function(iClose){var _this=this;$.each(iClose,function(index,name){$("#"+name).click(function(){_this.oPop.css({display:"none"});if(!!$("#popMask")[0]){$("#popMask").remove();}
$(window).unbind("scroll."+_this.options.oPop);$(window).unbind("resize."+_this.options.oPop);});});},Open:function(iOpen){var _this=this;$.each(iOpen,function(index,name){$("#"+name).click(function(){_this.oPop.css({display:"block"});_this.Start();_this.FullScreen(_this.heightDocument,_this.widthDocument);});});}};;(function($){$.timer=function(func,time,autostart){this.set=function(func,time,autostart){this.init=true;if(typeof func=='object'){var paramList=['autostart','time'];for(var arg in paramList){if(func[paramList[arg]]!=undefined){eval(paramList[arg]+" = func[paramList[arg]]");}};func=func.action;}
if(typeof func=='function'){this.action=func;}
if(!isNaN(time)){this.intervalTime=time;}
if(autostart&&!this.isActive){this.isActive=true;this.setTimer();}
return this;};this.once=function(time){var timer=this;if(isNaN(time)){time=0;}
window.setTimeout(function(){timer.action();},time);return this;};this.play=function(reset){if(!this.isActive){if(reset){this.setTimer();}
else{this.setTimer(this.remaining);}
this.isActive=true;}
return this;};this.pause=function(){if(this.isActive){this.isActive=false;this.remaining-=new Date()-this.last;this.clearTimer();}
return this;};this.stop=function(){this.isActive=false;this.remaining=this.intervalTime;this.clearTimer();return this;};this.toggle=function(reset){if(this.isActive){this.pause();}
else if(reset){this.play(true);}
else{this.play();}
return this;};this.reset=function(){this.isActive=false;this.play(true);return this;};this.clearTimer=function(){window.clearTimeout(this.timeoutObject);};this.setTimer=function(time){var timer=this;if(typeof this.action!='function'){return;}
if(isNaN(time)){time=this.intervalTime;}
this.remaining=time;this.last=new Date();this.clearTimer();this.timeoutObject=window.setTimeout(function(){timer.go();},time);};this.go=function(){if(this.isActive){this.action();this.setTimer();}};if(this.init){return new $.timer(func,time,autostart);}else{this.set(func,time,autostart);return this;}};})(jQuery);
(function($){var rotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));};var addUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4)return(lResult^0x80000000^lX8^lY8);if(lX4|lY4){if(lResult&0x40000000)return(lResult^0xC0000000^lX8^lY8);else return(lResult^0x40000000^lX8^lY8);}else{return(lResult^lX8^lY8);}};var F=function(x,y,z){return(x&y)|((~x)&z);};var G=function(x,y,z){return(x&z)|(y&(~z));};var H=function(x,y,z){return(x^y^z);};var I=function(x,y,z){return(y^(x|(~z)));};var FF=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(F(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var GG=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(G(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var HH=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(H(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var II=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(I(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var convertToWordArray=function(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWordsTempOne=lMessageLength+8;var lNumberOfWordsTempTwo=(lNumberOfWordsTempOne-(lNumberOfWordsTempOne%64))/64;var lNumberOfWords=(lNumberOfWordsTempTwo+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var wordToHex=function(lValue){var WordToHexValue="",WordToHexValueTemp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValueTemp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValueTemp.substr(WordToHexValueTemp.length-2,2);}
return WordToHexValue;};var uTF8Encode=function(string){string=string.replace(/\x0d\x0a/g,"\x0a");var output="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){output+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){output+=String.fromCharCode((c>>6)|192);output+=String.fromCharCode((c&63)|128);}else{output+=String.fromCharCode((c>>12)|224);output+=String.fromCharCode(((c>>6)&63)|128);output+=String.fromCharCode((c&63)|128);}}
return output;};$.extend({md5:function(string){var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=uTF8Encode(string);x=convertToWordArray(string);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=addUnsigned(a,AA);b=addUnsigned(b,BB);c=addUnsigned(c,CC);d=addUnsigned(d,DD);}
var tempValue=wordToHex(a)+wordToHex(b)+wordToHex(c)+wordToHex(d);return tempValue.toLowerCase();}});})(jQuery);;(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
method=this.attr('method');action=this.attr('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};var fileInputs=$('input:file:enabled[value]',this);var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++)
elements[k]=null;this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData).split('&');var len=serialized.length;var result={};var i,part;for(i=0;i<len;i++){part=serialized[i].split('=');result[decodeURIComponent(part[0])]=decodeURIComponent(part[1]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(var p in serializedData)
if(serializedData.hasOwnProperty(p))
formdata.append(p,serializedData[p]);}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=jQuery.ajaxSettings.xhr();if(xhr.upload){xhr.upload.onprogress=function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);};}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(beforeSend)
beforeSend.call(this,xhr,o);};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var useProp=!!$.fn.prop;var deferred=$.Deferred();if($(':input[name=submit],:input[id=submit]',form).length){alert('Error: Form elements must not have name or id of "submit".');deferred.reject();return deferred;}
if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(useProp)
el.prop('disabled',false);else
el.removeAttr('disabled');}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr('name');if(!n)
$io.attr('name',id);else
id=n;}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;if(io.contentWindow.document.execCommand){try{io.contentWindow.document.execCommand('Stop');}catch(ignore){}}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error)
s.error.call(s.context,xhr,e,status);if(g)
$.event.trigger("ajaxError",[xhr,s,e]);if(s.complete)
s.complete.call(s.context,xhr,e);}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument?frame.contentDocument:frame.document;return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(!method){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized')
setTimeout(checkState,50);}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle)
clearTimeout(timeoutHandle);timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').attr('value',s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');if(io.attachEvent)
io.attachEvent('onload',cb);else
io.addEventListener('load',cb,false);}
setTimeout(checkState,15);form.submit();}
finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
try{doc=getDoc(io);}
catch(ex){log('cannot access response document: ',ex);e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut)
return;}
if(io.detachEvent)
io.detachEvent('onload',cb);else
io.removeEventListener('load',cb,false);var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)
s.dataType='xml';xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(e){status='parsererror';xhr.error=errMsg=(e||status);}}
catch(e){log('error caught: ',e);status='error';xhr.error=errMsg=(e||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success)
s.success.call(s.context,data,'success',xhr);deferred.resolve(xhr.responseText,'success',xhr);if(g)
$.event.trigger("ajaxSuccess",[xhr,s]);}
else if(status){if(errMsg===undefined)
errMsg=xhr.statusText;if(s.error)
s.error.call(s.context,xhr,status,errMsg);deferred.reject(xhr,'error',errMsg);if(g)
$.event.trigger("ajaxError",[xhr,s,errMsg]);}
if(g)
$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete)
s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)
clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)
$io.remove();xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error)
$.error('parsererror');}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n){continue;}
if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements)
elements.push(el);for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'&&!el.disabled){if(elements)
elements.push(el);var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements)
elements.push(el);a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array)
$.merge(val,v);else
val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden)))
this.value='';}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)
return;var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}})(jQuery);
(function($){$.modal=function(data,options){return $.modal.impl.init(data,options);};$.modal.close=function(){$.modal.impl.close(true);};$.fn.modal=function(options){return $.modal.impl.init(this,options);};$.modal.defaults={overlay:50,overlayId:'modalOverlay',overlayCss:{},containerId:'modalContainer',containerCss:{},close:false,closeTitle:'Close',closeClass:'modalClose',persist:false,onOpen:null,onShow:null,onClose:null,onConfirm:null,onGiveUp:null,isModal:true,scrollType:'center',nLeft:0,nTop:0,relativeEleId:'',isCanDrag:true};$.modal.impl={opts:null,dialog:{},init:function(data,options){if(this.dialog.data){return false;};this.opts=$.extend({},$.modal.defaults,options);if(typeof data=='object'){data=data instanceof jQuery?data:$(data);if(data.parent().parent().size()>0){this.dialog.parentNode=data.parent();if(!this.opts.persist){this.dialog.original=data.clone(true);}}}else if(typeof data=='string'||typeof data=='number'){data=$('<div>').html(data);}else{if(console){console.log('SimpleModal Error: Unsupported data type: '+typeof data);}
return false;}
this.dialog.data=data.addClass('modalData');data=null;this.create();this.open();if($.isFunction(this.opts.onShow)){this.opts.onShow.apply(this,[this.dialog]);}
return this;},create:function(){this.dialog.overlay=$('<div>').attr('id',this.opts.overlayId).addClass('modalOverlay').css($.extend(this.opts.overlayCss,{opacity:this.opts.overlay/100,height:'100%',width:'100%',position:'fixed',left:0,top:0,zIndex:3000})).hide().appendTo('body');this.dialog.container=$('<div>').attr('id',this.opts.containerId).addClass('modalContainer').css($.extend(this.opts.containerCss,{position:'absolute',zIndex:3100})).append(this.opts.close?'<a class="modalCloseImg '+this.opts.closeClass+'" title="'+this.opts.closeTitle+'"></a>':'').hide().appendTo('body');if($.browser.msie&&($.browser.version<7)&&this.opts.isModal){this.fixIE();}
this.dialog.container.append(this.dialog.data.hide());},bindEvents:function(){var modal=this;$('.'+this.opts.closeClass).click(function(e){e.preventDefault();modal.close();});if(this.opts.scrollType=='scroll'){var modal=this;if($.browser.msie){$(window).scroll(function(e){modal.redraw();});}}
if(this.opts.isCanDrag){var oPopBar=this.dialog.container.find("#DHPopBar");if(oPopBar[0]!=null){var modal=this;oPopBar.mousedown(function(e){oPopBar.css("cursor","move");modal.regDrag(e);});this.opts.isDraging=false;}}
var arrCloseBtn=this.dialog.container.find("."+this.opts.closeClass);var oThis=this;var oDialog=this.dialog;if(arrCloseBtn.length>0){var funGiveUp=this.opts.onGiveUp;arrCloseBtn.click(function(e){var bClose=true;if($.isFunction(funGiveUp)){bClose=funGiveUp.apply(oThis,[oDialog]);}
if(bClose){$.modal.close();}
return false;});}
var arrCloseBtn2=this.dialog.container.find(".closebtn");if(arrCloseBtn2.length>0){var funGiveUp=this.opts.onGiveUp;arrCloseBtn2.click(function(e){var bClose=true;if($.isFunction(funGiveUp)){bClose=funGiveUp.apply(oThis,[oDialog]);}
if(bClose){$.modal.close();}
return false;});}
var arrConfirmBtn=this.dialog.container.find(".confirmbtn");if(arrConfirmBtn.length>0){var funConfirm=this.opts.onConfirm;for(var i=0;i<arrConfirmBtn.length;i++){arrConfirmBtn.click(function(e){var bClose=true;if($.isFunction(funConfirm)){bClose=funConfirm.apply(oThis,[oDialog]);}
if(bClose){$.modal.close();}
return false;});}}},unbindEvents:function(){$('.'+this.opts.closeClass).unbind('click');if(this.opts.scrollType=='scroll'){if($.browser.msie)$(window).unbind('scroll');}
if(this.opts.isCanDrag){var oPopBar=this.dialog.container.children().children(0);if(oPopBar!=null){oPopBar.unbind('mousedown');}}
var arrCloseBtn=this.dialog.container.find(".closebtn");if(arrCloseBtn.length>0){for(var i=0;i<arrCloseBtn.length;i++){arrCloseBtn[i].unbind('click');}}
var arrConfirmBtn=this.dialog.container.find(".confirmbtn");if(arrConfirmBtn.length>0){var funConfirm=this.opts.onConfirm;for(var i=0;i<arrConfirmBtn.length;i++){arrConfirmBtn[i].unbind('click');}}},fixIE:function(){var wHeight=$(document.body).height()+'px';var wWidth=$(document.body).width()+'px';this.dialog.overlay.css({position:'absolute',height:wHeight,width:wWidth});this.dialog.container.css({position:'absolute'});this.dialog.iframe=$('<iframe src="javascript:false;">').css($.extend(this.opts.iframeCss,{opacity:0,position:'absolute',height:wHeight,width:wWidth,zIndex:1000,width:'100%',top:0,left:0})).hide().appendTo('body');},open:function(){if(this.dialog.iframe){this.dialog.iframe.show();}
if($.isFunction(this.opts.onOpen)){this.opts.onOpen.apply(this,[this.dialog]);}else{if(this.opts.isModal==true){this.dialog.overlay.show();}else{this.dialog.overlay.hide();}
this.dialog.container.show();this.dialog.data.show();}
this.redraw();if(this.opts.scrollType=='scroll'&&$.browser.mozilla){this.dialog.container.css({position:'fixed'});}
this.bindEvents();},redraw:function(){if(!this.dialog.data){return false;}
var oContainerEle=this.dialog.container[0];var nPanelWidth=oContainerEle.offsetWidth;var nPanelHeight=oContainerEle.offsetHeight;var nScreenWidth=1204;var nScreenHeigth=768;if(window.top==window){nScreenWidth=window.screen.availWidth;nScreenHeigth=window.screen.availHeight;}else{function getDocHeight(doc){var docHt=0;if(doc.height){docHt=doc.height;}
else if(doc.body){if(doc.body.scrollHeight)docHt=doc.body.scrollHeight;}
return docHt;}
nScreenHeigth=getDocHeight(document);nScreenWidth=document.documentElement.scrollWidth;}
var nLeft=this.opts.nLeft;var nTop=this.opts.nTop;if(this.opts.relativeEleId!=''){var oRE=document.getElementById(this.opts.relativeEleId);if(oRE!=null){var oPosInfo=this.getElementPositionInfo(this.opts.relativeEleId);nTop=oPosInfo["top"]+nTop;if((document.documentElement.scrollTop||document.body.scrollTop)>0){nTop-=(document.documentElement.scrollTop||document.body.scrollTop);}
nLeft=oPosInfo["left"]+nLeft;this.opts.nLeft=nLeft;this.opts.nTop=nTop;}
this.opts.relativeEleId="";}
if(nLeft==0){nLeft=(nScreenWidth-nPanelWidth)/2;nLeft=(nLeft<0)?0:nLeft;}
if(nTop==0){var nTop=(nScreenHeigth-nPanelHeight)/4;nTop=(nTop<0)?0:nTop;}
oContainerEle.style.left=parseInt(nLeft)+"px";oContainerEle.style.marginLeft="0px";nTop+=(document.documentElement.scrollTop||document.body.scrollTop);oContainerEle.style.top=nTop+"px";oContainerEle.style.marginTop="0px";},close:function(external){document.body.focus();if(!this.dialog.data){return false;}
if($.isFunction(this.opts.onClose)&&!external){this.opts.onClose.apply(this,[this.dialog]);}else{if(this.dialog.parentNode){if(this.opts.persist){this.dialog.data.hide().appendTo(this.dialog.parentNode);}else{this.dialog.data.remove();this.dialog.original.appendTo(this.dialog.parentNode);}}else{this.dialog.data.remove();}
this.unbindEvents();this.dialog.container.innerHTML="";this.dialog.container.remove();this.dialog.overlay.remove();if(this.dialog.iframe){this.dialog.iframe.remove();}
this.dialog={};}},regDrag:function(e){if(!this.opts.isCanDrag||this.opts.isDraging)return;e=e||window.event;this.Drag(this.dialog.container[0],e,false);},Drag:function(obj,e,limit){if(this.opts.isDraging||!this.opts.isCanDrag)return;e=e||window.event;var x=parseInt(obj.style.left);var y=parseInt(obj.style.top);var x_=e.clientX-x;var y_=e.clientY-y;if(document.addEventListener){document.addEventListener('mousemove',KSHY_move,true);document.addEventListener('mouseup',KSHY_up,true);}else if(document.attachEvent){document.attachEvent('onmousemove',KSHY_move);document.attachEvent('onmouseup',KSHY_up);}
this.opts.isDraging=true;KSHY_stop(e);KSHY_abort(e);function KSHY_move(e){e=e||window.event;if((e.clientX-x_)<0){return false;}
if((e.clientY-y_)<0){return false;}
obj.style.left=e.clientX-x_+'px';obj.style.top=e.clientY-y_+'px';KSHY_stop(e);}
function KSHY_up(e){e=e||window.event;if(document.removeEventListener){document.removeEventListener('mousemove',KSHY_move,true);document.removeEventListener('mouseup',KSHY_up,true);}else if(document.detachEvent){document.detachEvent('onmousemove',KSHY_move);document.detachEvent('onmouseup',KSHY_up);}
$.modal.impl.opts.isDraging=false;$.modal.impl.opts.nLeft=$.modal.impl.dialog.container[0].offsetLeft;$.modal.impl.opts.nTop=$.modal.impl.dialog.container[0].offsetTop-(document.documentElement.scrollTop||document.body.scrollTop);KSHY_stop(e);var oPopBar=$.modal.impl.dialog.container.children().children("#dargbar");if(oPopBar[0]!=null){oPopBar.css("cursor","");}}
function KSHY_stop(e){if(e.stopPropagation){return e.stopPropagation();}else{return e.cancelBubble=true;}}
function KSHY_abort(e){if(e.preventDefault)return e.preventDefault();else return e.returnValue=false;}},getElementPositionInfo:function(strEleId){if(typeof(strEleId)=="string"){strEleId="#"+strEleId;}
var oEle$=$(strEleId);var oEle=oEle$[0];if(!oEle)return null;var arrPos={"top":"","left":"","width":"","height":""};var lTop=pageY(oEle);var lLeft=pageX(oEle);var lWidth=oEle.offsetWidth;var lHeight=oEle.offsetHeight;arrPos["top"]=lTop;arrPos["left"]=lLeft;arrPos["width"]=lWidth;arrPos["height"]=lHeight;return arrPos;function pageX(oEle){if((oEle.parentElement!=null&&oEle.parentElement.id=='modalContainer')||(oEle.parentNode!=null&&oEle.parentNode.id=='modalContainer'))return 0;return oEle.offsetParent?(oEle.offsetLeft+pageX(oEle.offsetParent)):oEle.offsetLeft;}
function pageY(oEle){if((oEle.parentElement!=null&&oEle.parentElement.id=='modalContainer')||(oEle.parentNode!=null&&oEle.parentNode.id=='modalContainer'))return 0;return oEle.offsetParent?(oEle.offsetTop+pageY(oEle.offsetParent)):oEle.offsetTop;}}};})(jQuery);
var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};
function GoodsFormVO(){this["class"]="com.dhgate.common.vo.goods.GoodsFormVO";this.uniqueid="";this.productid="";this.productname="";this.productdesc="";this.productgroupid="";this.featureshtml="";this.promisehtml="";this.videourl="";this.isdhport=0;this.vaildday=30;this.sizelen=0;this.sizewidth=0;this.sizeheight=0;this.packquantity=0;this.productweight=0;this.measureid="";this.manufactory="";this.factoryproductname="";this.isquickup="0";this.specialzone="0";this.isunionweb="0";this.productvip="0";this.producttype="0";this.skuid="";this.skudescription="";this.categoryvo=null;this.shippingmodelid=null;this.attributelist=null;this.specList=null;this.imgList=null;this.lwholesaleprice=0;this.hwholesaleprice=0;this.minhgprice=0;this.hprice=0;this.priceremark="";this.manufactoryname="";this.mailingaddress="";this.contactperson="";this.tel="";this.baseqt=0;this.stepweight=0;this.stepqt=0;this.isonlyweight="0";this.productInventoryList=null;this.inventoryLocation=null;this.inventoryStatus=null;}
function GoodsImageVO(){this["class"]="com.dhgate.syi.model.TdProductAttachVO";this.fileurl="";this.imgmd5="";this.sequence=1;this.filename="";}
function GoodsCategoryVO(){this["class"]="";this.catePubId="";this.cate1PubId="";this.cate2PubId="";this.cate3PubId="";}
function GoodsSpecificationVO(){this["class"]="com.dhgate.syi.model.TdProductSizespecificationVO";this.priceRangeVOList=null;this.specAttrVOList=null;this.description="";}
function GoodsPriceAttrVO(){this["class"]="com.dhgate.syi.model.TdProductSizespecAttrVO";this.attrId="";this.attrValId="";this.lineAttrvalName="";}
function GoodsPriceRangeVO(){this["class"]="com.dhgate.syi.model.TdProductPriceRangeVO";this.startqty=0;this.endqty=0;this.leadingtime=0;this.webprice=0;this.issample=0;this.price=0;this.endbprice=0;}
function TdProductAttachDocVO(fileurl,filename,filesize,type,filemd5){this["class"]="com.dhgate.common.vo.gold.TdProductAttachDocVO";this.fileurl=fileurl;this.filename=filename;this.filesize=filesize;this.type=type;this.filemd5=filemd5;}
function ProductCategoryVO(){this["class"]="com.dhgate.common.vo.goods.ProductCategoryVO";}
ProductCategoryVO.prototype.isSelected=function(){return this.catePubId!=null&&this.catePubId!="";};ProductCategoryVO.prototype.getProductCategoryForSubmit=function(){DhgateConsole.info('获取类目数据');g_categoryTip$.hide();if(!this.isSelected()){showErrorTip("selectCategoryInput","请选择产品类目");return null;}
return this;};ProductCategoryVO.prototype.buildLevel=function(){if(!this.isSelected()){return;}
this.cate1PubId=this.catePubId.substring(0,3);this.cate2PubId=this.catePubId.substring(0,6);this.cate3PubId=this.catePubId.substring(0,9);};function ProductInventoryVO(){this["class"]="com.dhgate.syi.model.ProductInventoryVO";this.productInventoryId="";this.productid;this.itemcode;this.specDesc;this.quantity=0;this.hasBuyAttr="0";this.hasSaleAttr="0";this.commonSpec="0";this.supplierid="";};
var onShowHtml="";var onFocusHtml="";var onErrorHtml="<span>$data$</span>";var onCorrectHtml="";var onShowClass="";var onFocusClass="";var onErrorClass="";var onCorrectClass="";var _dh_errors={};if(typeof window.console=="undefined"||typeof window.console.log=="undefined"){if(!window.console){window.console={log:function(){}};}}
(function($){$.formValidator={initConfig:function(controlOptions)
{var settings={};$.extend(true,settings,initConfig_setting,controlOptions||{});validatorGroup_setting.push(settings);},sustainType:function(elem,validateType)
{var srcTag=elem.tagName;var stype=elem.type;switch(validateType)
{case"formValidator":return true;case"inputValidator":return(srcTag=="INPUT"||srcTag=="TEXTAREA"||srcTag=="SELECT");case"compareValidator":return((srcTag=="INPUT"||srcTag=="TEXTAREA")?(stype!="checkbox"&&stype!="radio"):false);case"ajaxValidator":return(stype=="text"||stype=="textarea"||stype=="file"||stype=="select-one");case"regexValidator":return((srcTag=="INPUT"||srcTag=="TEXTAREA")?(stype!="checkbox"&&stype!="radio"):false);case"functionValidator":return true;}},appendValid:function(id,setting)
{var elem=$("#"+id).get(0);var validateType=setting.validateType;if(!$.formValidator.sustainType(elem,validateType))return-1;if(validateType=="formValidator"||elem.settings==undefined){elem.settings=new Array();}
var len=elem.settings.push(setting);elem.settings[len-1].index=len-1;return len-1;},getInitConfig:function(validatorGroup)
{var config=null;$.each(validatorGroup_setting,function(i,n){if(validatorGroup_setting[i].validatorGroup==validatorGroup){config=validatorGroup_setting[i];return false;}});return config;},setTipState:function(elem,showclass,showmsg)
{var tip=$("#"+elem.settings[0].tipID);if(showmsg==null||showmsg=="")
{tip.hide();}
else
{var html=showclass=="onShow"?onShowHtml:(showclass=="onFocus"?onFocusHtml:(showclass=="onCorrect"?onCorrectHtml:onErrorHtml));if(html.length==0||showmsg=="")
{tip.hide();}
else
{html=html.replace(/\$class\$/g,showclass).replace(/\$data\$/g,showmsg);tip.html(html).show();}}},resetTipState:function(validatorGroup)
{if(validatorGroup==undefined){validatorGroup="1";}
var initConfig=$.formValidator.getInitConfig(validatorGroup);$.each(initConfig.validObjects,function(){var setting=this.settings[0];var passed=setting.defaultPassed;$.formValidator.setTipState(this,passed?"onCorrect":"onShow",passed?$.formValidator.getStatusText(this,setting.onCorrect):setting.onShow);});},setFailState:function(tipID,showmsg)
{$.formValidator.setTipState($("#"+tipID).get(0),"onError",showmsg);},showMessage:function(returnObj)
{var id=returnObj.id;var elem=$("#"+id).get(0);var isValid=returnObj.isValid;var setting=returnObj.setting;var showmsg="",showclass="";var intiConfig=$.formValidator.getInitConfig(elem.validatorGroup);if(!isValid)
{showclass="onError";if(setting.validateType=="ajaxValidator")
{if(setting.lastValid=="")
{showclass="onLoad";showmsg=setting.onWait;}
else
{showmsg=$.formValidator.getStatusText(elem,setting.onError);}}
else
{showmsg=(returnObj.errormsg==""?$.formValidator.getStatusText(elem,setting.onError):returnObj.errormsg);}
if(intiConfig.mode=="AlertTip")
{if(elem.validValueOld!=$(elem).val()){alert(showmsg);}}
else
{$.formValidator.setTipState(elem,showclass,showmsg);}}
else
{showmsg=$.formValidator.isEmpty(id)?setting.onEmpty:$.formValidator.getStatusText(elem,setting.onCorrect);$.formValidator.setTipState(elem,"onCorrect",showmsg);}
return showmsg;},showAjaxMessage:function(returnObj)
{var elem=$("#"+returnObj.id).get(0);var setting=elem.settings[returnObj.ajax];var validValueOld=elem.validValueOld;var validvalue=$(elem).val();returnObj.setting=setting;if(validValueOld!=validvalue||validValueOld==validvalue&&elem.onceValided==undefined)
{$.formValidator.ajaxValid(returnObj);}
else
{if(setting.isValid!=undefined&&!setting.isValid){elem.lastshowclass="onError";elem.lastshowmsg=$.formValidator.getStatusText(elem,setting.onError);}
$.formValidator.setTipState(elem,elem.lastshowclass,elem.lastshowmsg);}},getLength:function(id)
{var srcjo=$("#"+id);var elem=srcjo.get(0);var sType=elem.type;var len=0;switch(sType)
{case"text":case"hidden":case"textarea":case"file":var val=srcjo.val();var setting=elem.settings[0];if(elem.isInputControl&&elem.value==setting.onShowText){val="";}
var initConfig=$.formValidator.getInitConfig(elem.validatorGroup);if(initConfig.wideWord)
{for(var i=0;i<val.length;i++)
{len=len+((val.charCodeAt(i)>=0x4e00&&val.charCodeAt(i)<=0x9fa5)?2:1);}}
else{len=val.length;}
break;case"checkbox":case"radio":len=$("input[type='"+sType+"'][name='"+srcjo.attr("name")+"']:checked").length;break;case"select-one":len=elem.options?elem.options.selectedIndex:-1;break;case"select-multiple":len=$("select[name="+elem.name+"] option:selected").length;break;}
return len;},isEmpty:function(id)
{return($("#"+id).get(0).settings[0].empty&&$.formValidator.getLength(id)==0);},isOneValid:function(id)
{var isValid=$.formValidator.oneIsValid(id).isValid;return isValid;},oneIsValid:function(id)
{var returnObj=new Object();var elem=$("#"+id).get(0);var initConfig=$.formValidator.getInitConfig(elem.validatorGroup);returnObj.initConfig=initConfig;returnObj.id=id;returnObj.ajax=-1;returnObj.errormsg="";var settings=elem.settings;var settingslen=settings.length;var validateType;if(settingslen==1){settings[0].bind=false;}
if(!settings[0].bind){return null;}
$.formValidator.resetInputValue(true,initConfig,id);for(var i=0;i<settingslen;i++)
{if(i==0){if($.formValidator.isEmpty(id)){returnObj.isValid=true;returnObj.setting=settings[0];break;}
continue;}
returnObj.setting=settings[i];validateType=settings[i].validateType;switch(validateType)
{case"inputValidator":$.formValidator.inputValid(returnObj);break;case"compareValidator":$.formValidator.compareValid(returnObj);break;case"regexValidator":$.formValidator.regexValid(returnObj);break;case"functionValidator":$.formValidator.functionValid(returnObj);break;case"ajaxValidator":returnObj.ajax=i;break;}
elem.onceValided=true;if(!settings[i].isValid){returnObj.isValid=false;returnObj.setting=settings[i];break;}else{returnObj.isValid=true;returnObj.setting=settings[0];if(settings[i].validateType=="ajaxValidator"){break;};}}
$.formValidator.resetInputValue(false,initConfig,id);return returnObj;},pageIsValid:function(validatorGroup)
{if(validatorGroup==undefined){validatorGroup="1";};var isValid=true,returnObj,firstErrorMessage="",errorMessage;var error_tip="^",thefirstid,name,name_list="^";var initConfig=$.formValidator.getInitConfig(validatorGroup);initConfig.status="sumbiting";initConfig.ajaxCountSubmit=0;$.each(initConfig.validObjects,function()
{if($(this).length==0){return true;};if(this.settings[0].bind&&this.validatorAjaxIndex!=undefined&&this.onceValided==undefined){returnObj=$.formValidator.oneIsValid(this.id);if(returnObj.ajax==this.validatorAjaxIndex){initConfig.status="sumbitingWithAjax";$.formValidator.ajaxValid(returnObj);}}});if(initConfig.ajaxCountSubmit>0){return false;}
$.each(initConfig.validObjects,function()
{if($(this).length==0){return true;}
if(this.settings[0].bind){name=this.name;if(name_list.indexOf("^"+name+"^")==-1){onceValided=this.onceValided==undefined?false:this.onceValided;if(name){name_list=name_list+name+"^";};returnObj=$.formValidator.oneIsValid(this.id);if(returnObj){if(!returnObj.isValid){isValid=false;errorMessage=returnObj.errormsg==""?returnObj.setting.onError:returnObj.errormsg;_dh_errors[returnObj.id]=errorMessage;if(thefirstid==null){thefirstid=returnObj.id;};if(firstErrorMessage==""){firstErrorMessage=errorMessage;};}
if(initConfig.mode!="AlertTip"){var tipID=this.settings[0].tipID;if(error_tip.indexOf("^"+tipID+"^")==-1){if(!returnObj.isValid){error_tip=error_tip+tipID+"^";};$.formValidator.showMessage(returnObj);}}}}}});if(isValid)
{if(!initConfig.onSuccess()){return false;};if(initConfig.submitOnce){$(":submit,:button,:reset").attr("disabled",true);}}
initConfig.status="init";if(isValid&&initConfig.debug){alert("现在正处于调试模式(debug:true)，不能提交");}
return!initConfig.debug&&isValid;},ajaxForm:function(validatorGroup,option,formid)
{if(validatorGroup==undefined){validatorGroup="1";};var setting={};$.extend(true,setting,ajaxForm_setting,option||{});var initConfig=$.formValidator.getInitConfig(validatorGroup);if(formid==undefined){formid=initConfig.formID;if(formid==""){alert('表单ID未传入');return false;};};if(!$.formValidator.pageIsValid(validatorGroup)){return false;};var ls_url=setting.url;var parm=$.formValidator.serialize('#'+formid);ls_url=ls_url+(ls_url.indexOf("?")>-1?("&"+parm):("?"+parm));alert(ls_url);$.ajax({type:setting.type,url:ls_url,cache:setting.cache,data:setting.data,async:setting.async,timeout:setting.timeout,dataType:setting.dataType,beforeSend:function(jqXHR,configs){if(setting.buttons&&setting.buttons.length>0){setting.buttons.attr({"disabled":true});};return setting.beforeSend(jqXHR,configs);},success:function(data,textStatus,jqXHR){setting.success(data,textStatus,jqXHR);},complete:function(jqXHR,textStatus){if(setting.buttons&&setting.buttons.length>0){setting.buttons.attr({"disabled":false});};setting.complete(jqXHR,textStatus);},error:function(jqXHR,textStatus,errorThrown){setting.error(jqXHR,textStatus,errorThrown);}});},serialize:function(objs,initConfig)
{if(initConfig!=undefined){$.formValidator.resetInputValue(true,initConfig);};var parmString=$(objs).serialize();if(initConfig!=undefined){$.formValidator.resetInputValue(false,initConfig);};var parmArray=parmString.split("&");var parmStringNew="";$.each(parmArray,function(index,data){var li_pos=data.indexOf("=");if(li_pos>0){var name=data.substring(0,li_pos);var value=escape(decodeURIComponent(data.substr(li_pos+1)));var parm=name+"="+value;parmStringNew=parmStringNew==""?parm:parmStringNew+'&'+parm;}});return parmStringNew;},ajaxValid:function(returnObj)
{var id=returnObj.id;var srcjo=$("#"+id);var elem=srcjo.get(0);var initConfig=returnObj.initConfig;var settings=elem.settings;var setting=settings[returnObj.ajax];var ls_url=setting.url;var validatorGroup=elem.validatorGroup;var initConfig=$.formValidator.getInitConfig(validatorGroup);var parm=$.formValidator.serialize(initConfig.ajaxObjects);parm="clientid="+id+"&"+(setting.randNumberName?setting.randNumberName+"="+((new Date().getTime())+Math.round(Math.random()*10000)):"")+(parm.length>0?"&"+parm:"");ls_url=ls_url+(ls_url.indexOf("?")>-1?("&"+parm):("?"+parm));$.ajax({type:setting.type,url:ls_url,cache:setting.cache,data:setting.data,async:setting.async,timeout:setting.timeout,dataType:setting.dataType,success:function(data,textStatus,jqXHR){var lb_ret,ls_status,ls_msg,lb_isValid=false;$.formValidator.dealAjaxRequestCount(validatorGroup,-1);lb_ret=setting.success(data,textStatus,jqXHR);if((typeof lb_ret)=="string")
{ls_status="onError";ls_msg=lb_ret;}
else if(lb_ret){lb_isValid=true;ls_status="onCorrect";ls_msg=settings[0].onCorrect;}else{ls_status="onError";ls_msg=$.formValidator.getStatusText(elem,setting.onError);alert(ls_msg);}
setting.isValid=lb_isValid;$.formValidator.setTipState(elem,ls_status,ls_msg);if(returnObj.initConfig.status=="sumbitingWithAjax"&&returnObj.initConfig.ajaxCountSubmit==0)
{if(initConfig.formID!=""){$('#'+initConfig.formID).trigger('submit');}}},complete:function(jqXHR,textStatus){if(setting.buttons&&setting.buttons.length>0){setting.buttons.attr({"disabled":false});};setting.complete(jqXHR,textStatus);},beforeSend:function(jqXHR,configs){if(this.lastXMLHttpRequest){this.lastXMLHttpRequest.abort();}
this.lastXMLHttpRequest=jqXHR;if(setting.buttons&&setting.buttons.length>0){setting.buttons.attr({"disabled":true});};var lb_ret=setting.beforeSend(jqXHR,configs);var isValid=false;setting.isValid=false;if((typeof lb_ret)=="boolean"&&lb_ret)
{isValid=true;$.formValidator.setTipState(elem,"onLoad",settings[returnObj.ajax].onWait);}else
{isValid=false;$.formValidator.setTipState(elem,"onError",lb_ret);}
setting.lastValid="-1";if(isValid){$.formValidator.dealAjaxRequestCount(validatorGroup,1);}
return isValid;},error:function(jqXHR,textStatus,errorThrown){$.formValidator.dealAjaxRequestCount(validatorGroup,-1);$.formValidator.setTipState(elem,"onError",$.formValidator.getStatusText(elem,setting.onError));setting.isValid=false;setting.error(jqXHR,textStatus,errorThrown);},processData:setting.processData});},dealAjaxRequestCount:function(validatorGroup,val)
{var initConfig=$.formValidator.getInitConfig(validatorGroup);initConfig.ajaxCountValid=initConfig.ajaxCountValid+val;if(initConfig.status=="sumbitingWithAjax"){initConfig.ajaxCountSubmit=initConfig.ajaxCountSubmit+val;}},regexValid:function(returnObj)
{var id=returnObj.id;var setting=returnObj.setting;var srcTag=$("#"+id).get(0).tagName;var elem=$("#"+id).get(0);var isValid;if(elem.settings[0].empty&&elem.value==""){setting.isValid=true;}
else
{var regexArray=setting.regExp;setting.isValid=false;if((typeof regexArray)=="string")regexArray=[regexArray];$.each(regexArray,function(){var r=this;if(setting.dataType=="enum"){r=eval("regexEnum."+r);}
if(r==undefined||r=="")
{return false;}
isValid=(new RegExp(r,setting.param)).test($(elem).val());if(setting.compareType=="||"&&isValid)
{setting.isValid=true;return false;}
if(setting.compareType=="&&"&&!isValid)
{return false;}});if(!setting.isValid)setting.isValid=isValid;}},functionValid:function(returnObj)
{var id=returnObj.id;var setting=returnObj.setting;var srcjo=$("#"+id);var lb_ret=setting.fun(srcjo.val(),srcjo.get(0));if(lb_ret!=undefined)
{if((typeof lb_ret)==="string"){setting.isValid=false;returnObj.errormsg=lb_ret;}else{setting.isValid=lb_ret;}}else{setting.isValid=true;}},inputValid:function(returnObj)
{var id=returnObj.id;var setting=returnObj.setting;var srcjo=$("#"+id);var elem=srcjo.get(0);var val=srcjo.val();var sType=elem.type;var len=$.formValidator.getLength(id);var empty=setting.empty,emptyError=false;switch(sType)
{case"text":case"hidden":case"textarea":case"file":if(setting.type=="size"){empty=setting.empty;if(!empty.leftEmpty){emptyError=(val.replace(/^[ \s]+/,'').length!=val.length);}
if(!emptyError&&!empty.rightEmpty){emptyError=(val.replace(/[ \s]+$/,'').length!=val.length);}
if(emptyError&&empty.emptyError){returnObj.errormsg=empty.emptyError;}}
case"checkbox":case"select-one":case"select-multiple":case"radio":var lb_go_on=false;if(sType=="select-one"||sType=="select-multiple"){setting.type="size";}
var type=setting.type;if(type=="size"){if(!emptyError){lb_go_on=true;}
if(lb_go_on){val=len;}}
else if(type=="date"||type=="datetime")
{var isok=false;if(type=="date"){lb_go_on=isDate(val);};if(type=="datetime"){lb_go_on=isDate(val);};if(lb_go_on){val=new Date(val);setting.min=new Date(setting.min);setting.max=new Date(setting.max);};}else{stype=(typeof setting.min);if(stype=="number")
{val=(new Number(val)).valueOf();if(!isNaN(val)){lb_go_on=true;}}
if(stype=="string"){lb_go_on=true;}}
setting.isValid=false;if(lb_go_on)
{if(val<setting.min||val>setting.max){if(val<setting.min&&setting.onErrorMin){returnObj.errormsg=setting.onErrorMin;}
if(val>setting.min&&setting.onErrorMax){returnObj.errormsg=setting.onErrorMax;}}
else{setting.isValid=true;}}
break;}},compareValid:function(returnObj)
{var id=returnObj.id;var setting=returnObj.setting;var srcjo=$("#"+id);var desjo=$("#"+setting.desID);var ls_dataType=setting.dataType;curvalue=srcjo.val();ls_data=desjo.val();if(ls_dataType=="number")
{if(!isNaN(curvalue)&&!isNaN(ls_data)){curvalue=parseFloat(curvalue);ls_data=parseFloat(ls_data);}
else{return;}}
if(ls_dataType=="date"||ls_dataType=="datetime")
{var isok=false;if(ls_dataType=="date"){isok=(isDate(curvalue)&&isDate(ls_data));};if(ls_dataType=="datetime"){isok=(isDateTime(curvalue)&&isDateTime(ls_data));};if(isok){curvalue=new Date(curvalue);ls_data=new Date(ls_data);}
else{return;}}
switch(setting.operateor)
{case"=":setting.isValid=(curvalue==ls_data);break;case"!=":setting.isValid=(curvalue!=ls_data);break;case">":setting.isValid=(curvalue>ls_data);break;case">=":setting.isValid=(curvalue>=ls_data);break;case"<":setting.isValid=(curvalue<ls_data);break;case"<=":setting.isValid=(curvalue<=ls_data);break;default:setting.isValid=false;break;}},getStatusText:function(elem,obj)
{return($.isFunction(obj)?obj($(elem).val()):obj);},resetInputValue:function(real,initConfig,id)
{var showTextObjects;if(id){showTextObjects=$("#"+id);}else{showTextObjects=$(initConfig.showTextObjects);}
showTextObjects.each(function(index,elem){if(elem.isInputControl){var showText=elem.settings[0].onShowText;if(real&&showText==elem.value){elem.value="";};if(!real&&showText!=""&&elem.value==""){elem.value=showText;};}});}};$.fn.formValidator=function(cs)
{cs=cs||{};var setting={};if(cs.validatorGroup==undefined){cs.validatorGroup="1";};$.extend(true,setting,formValidator_setting);var initConfig=$.formValidator.getInitConfig(cs.validatorGroup);initConfig.validCount+=1;$.extend(true,setting,cs||{});return this.each(function(e)
{this.validatorIndex=initConfig.validCount-1;this.validatorGroup=cs.validatorGroup;var jqobj=$(this);var setting_temp={};$.extend(true,setting_temp,setting);var id=jqobj.attr('id');if(!id)
{id=Math.ceil(Math.random()*50000000);jqobj.attr('id',id);}
var tip=setting_temp.tipID?setting_temp.tipID:id+"ErrTip";if(initConfig.mode=="AutoTip"||initConfig.mode=="FixTip")
{var tipDiv=$("#"+tip);if(initConfig.mode=="AutoTip"&&tipDiv.length==0)
{tipDiv=$("<div style='position:absolute;' id='"+tip+"'></div>");var relativeID=setting_temp.relativeID?setting_temp.relativeID:id;var offset=$("#"+relativeID).offset();setting_temp.tipCss.top=offset.top+setting_temp.tipCss.top;setting_temp.tipCss.left=$("#"+relativeID).width()+offset.left+setting_temp.tipCss.left;var formValidateTip=$("<div style='position:absolute;' id='"+tip+"'></div>").appendTo($("body"));formValidateTip.css(setting_temp.tipCss);setting.relativeID=relativeID;}}
setting.tipID=tip;setting.fixTipID=setting_temp.fixTipID?setting_temp.fixTipID:id+"FixTip";$.formValidator.appendValid(id,setting);var validIndex=$.inArray(jqobj,initConfig.validObjects);if(validIndex==-1)
{if(setting_temp.ajax){var ajax=initConfig.ajaxObjects;initConfig.ajaxObjects=ajax+(ajax!=""?",#":"#")+id;}
initConfig.validObjects.push(this);}else{initConfig.validObjects[validIndex]=this;}
if(initConfig.mode!="AlertTip"){$.formValidator.setTipState(this,"onShow",setting.onShow);}
var srcTag=this.tagName.toLowerCase();var stype=this.type;var defaultval=setting.defaultValue;var isInputControl=stype=="text"||stype=="textarea";this.isInputControl=isInputControl;if(defaultval){jqobj.val(defaultval);}
var fixTip=$("#"+setting.fixTipID);var showFixText=setting.onShowFixText;if(fixTip.length==1&&onMouseOutFixTextHtml!=""&&onMouseOnFixTextHtml!=""&&showFixText!="")
{jqobj.hover(function(){fixTip.html(onMouseOnFixTextHtml.replace(/\$data\$/g,showFixText));},function(){fixTip.html(onMouseOutFixTextHtml.replace(/\$data\$/g,showFixText));});fixTip.css("padding","0px 0px 0px 0px").css("margin","0px 0px 0px 0px").html(onMouseOutFixTextHtml.replace(/\$data\$/g,setting.onShowFixText));}
var showText=setting.onShowText;if(srcTag=="input"||srcTag=="textarea")
{if(isInputControl){if(showText!=""){showObjs=initConfig.showTextObjects;initConfig.showTextObjects=showObjs+(showObjs!=""?",#":"#")+id;jqobj.val(showText);jqobj.css("color",setting.onShowTextColor.mouseOutColor);}}
jqobj.focus(function()
{if(isInputControl){var val=jqobj.val();this.validValueOld=val;if(showText==val){this.value="";jqobj.css("color",setting.onShowTextColor.mouseOnColor);}};if(initConfig.mode!="AlertTip"){var tipjq=$("#"+tip);this.lastshowclass=tipjq.attr("class");this.lastshowmsg=tipjq.text();$.formValidator.setTipState(this,"onFocus",setting.onFocus);};});jqobj.bind("keyup",function(){});jqobj.bind(setting.triggerEvent,function(){var settings=this.settings;if(settings[0].leftTrim){this.value=this.replace(/^\s*/g,"");}
if(settings[0].rightTrim){this.value=this.replace(/\s*$/g,"");}
if(isInputControl){if(this.value==""&&showText!=""){this.value=showText;}
if(this.value==showText){jqobj.css("color",setting.onShowTextColor.mouseOutColor);}}
var returnObj=$.formValidator.oneIsValid(id);if(returnObj==null){return;}
if(returnObj.ajax>=0)
{$.formValidator.showAjaxMessage(returnObj);}
else
{var showmsg=$.formValidator.showMessage(returnObj);if(!returnObj.isValid)
{var auto=setting.autoModify&&isInputControl;if(auto)
{$(this).val(this.validValueOld);if(initConfig.mode!="AlertTip"){$.formValidator.setTipState(this,"onShow",$.formValidator.getStatusText(this,setting.onCorrect));};}
else
{if(initConfig.forceValid||setting.forceValid){alert(showmsg);this.focus();}}}}});}
else if(srcTag=="select")
{jqobj.bind({focus:function(){if(initConfig.mode!="AlertTip"){$.formValidator.setTipState(this,"onFocus",setting.onFocus);};},blur:function(){if(this.validValueOld==undefined||this.validValueOld==jqobj.val()){$(this).trigger("change");}},change:function(){var returnObj=$.formValidator.oneIsValid(id);if(returnObj==null){return;}
if(returnObj.ajax>=0){$.formValidator.showAjaxMessage(returnObj);}else{$.formValidator.showMessage(returnObj);}}});}});};$.fn.inputValidator=function(controlOptions)
{var settings={};$.extend(true,settings,inputValidator_setting,controlOptions||{});return this.each(function(){$.formValidator.appendValid(this.id,settings);});};$.fn.compareValidator=function(controlOptions)
{var settings={};$.extend(true,settings,compareValidator_setting,controlOptions||{});return this.each(function(){$.formValidator.appendValid(this.id,settings);});};$.fn.regexValidator=function(controlOptions)
{var settings={};$.extend(true,settings,regexValidator_setting,controlOptions||{});return this.each(function(){$.formValidator.appendValid(this.id,settings);});};$.fn.functionValidator=function(controlOptions)
{var settings={};$.extend(true,settings,functionValidator_setting,controlOptions||{});return this.each(function(){$.formValidator.appendValid(this.id,settings);});};$.fn.ajaxValidator=function(controlOptions)
{var settings={};$.extend(true,settings,ajaxValidator_setting,controlOptions||{});return this.each(function()
{var initConfig=$.formValidator.getInitConfig(this.validatorGroup);var ajax=initConfig.ajaxObjects;if((ajax+",").indexOf("#"+this.id+",")==-1)
{initConfig.ajaxObjects=ajax+(ajax!=""?",#":"#")+this.id;}
this.validatorAjaxIndex=$.formValidator.appendValid(this.id,settings);});};$.fn.defaultPassed=function(onShow)
{return this.each(function()
{var settings=this.settings;settings[0].defaultPassed=true;this.onceValided=true;for(var i=1;i<settings.length;i++)
{settings[i].isValid=true;if(!$.formValidator.getInitConfig(settings[0].validatorGroup).mode=="AlertTip"){var ls_style=onShow?"onShow":"onCorrect";$.formValidator.setTipState(this,ls_style,settings[0].onCorrect);}}});};})(jQuery);var initConfig_setting={validatorGroup:"1",formID:"",submitOnce:false,ajaxForm:null,mode:"FixTip",errorFocus:true,wideWord:true,forceValid:false,debug:false,onSuccess:function(){return true;},onError:$.noop,status:"",ajaxPrompt:"当前有数据正在进行服务器端校验，请稍候",validCount:0,ajaxCountSubmit:0,ajaxCountValid:0,validObjects:[],ajaxObjects:"",showTextObjects:"",validateType:"initConfig"};var formValidator_setting={validatorGroup:"1",onShowText:"",onShowTextColor:{mouseOnColor:"#000000",mouseOutColor:"#999999"},onShowFixText:"",onShow:"请输入内容",onFocus:"请输入内容",onCorrect:"输入正确",onEmpty:"输入内容为空",empty:false,autoModify:false,defaultValue:null,bind:true,ajax:false,validateType:"formValidator",tipCss:{left:10,top:-4,height:20,width:280},triggerEvent:"blur",forceValid:false,tipID:null,fixTipID:null,relativeID:null,index:0,leftTrim:false,rightTrim:false};var inputValidator_setting={isValid:false,type:"size",min:0,max:99999,onError:"输入错误",validateType:"inputValidator",empty:{leftEmpty:true,rightEmpty:true,leftEmptyError:null,rightEmptyError:null}};var compareValidator_setting={isValid:false,desID:"",operateor:"=",onError:"输入错误",validateType:"compareValidator"};var regexValidator_setting={isValid:false,regExp:"",param:"i",dataType:"string",compareType:"||",onError:"输入的格式不正确",validateType:"regexValidator"};var ajaxForm_setting={type:"GET",url:window.location.href,dataType:"html",data:null,async:true,cache:false,buttons:null,beforeSend:function(){return true;},success:function(){return true;},complete:$.noop,processData:true,error:$.noop};var ajaxValidator_setting={isValid:false,lastValid:"",oneceValid:false,randNumberName:"rand",onError:"服务器校验没有通过",onWait:"正在等待服务器返回数据",validateType:"ajaxValidator"};$.extend(true,ajaxValidator_setting,ajaxForm_setting);var functionValidator_setting={isValid:true,fun:function(){this.isValid=true;},validateType:"functionValidator",onError:"输入错误"};var validatorGroup_setting=[];var regexEnum={intege:"^-?[1-9]\\d*$",intege1:"^[1-9]\\d*$",intege2:"^-[1-9]\\d*$",num:"^([+-]?)\\d*\\.?\\d+$",num1:"^[1-9]\\d*|0$",num2:"^-[1-9]\\d*|0$",decmal:"^([+-]?)\\d*\\.\\d+$",decmal1:"^[1-9]\\d*.\\d*|0.\\d*[1-9]\\d*$",decmal2:"^-([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*)$",decmal3:"^-?([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*|0?.0+|0)$",decmal4:"^[1-9]\\d*.\\d*|0.\\d*[1-9]\\d*|0?.0+|0$",decmal5:"^(-([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*))|0?.0+|0$",email:"^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$",color:"^[a-fA-F0-9]{6}$",url:"^http[s]?:\\/\\/([\\w-]+\\.)+[\\w-]+([\\w-./?%&=]*)?$",chinese:"^[\\u4E00-\\u9FA5\\uF900-\\uFA2D]+$",ascii:"^[\\x00-\\xFF]+$",zipcode:"^\\d{6}$",mobile:"^13[0-9]{9}|15[012356789][0-9]{8}|18[0256789][0-9]{8}|147[0-9]{8}$",ip4:"^(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)$",notempty:"^\\S+$",picture:"(.*)\\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$",rar:"(.*)\\.(rar|zip|7zip|tgz)$",date:"^\\d{4}(\\-|\\/|\.)\\d{1,2}\\1\\d{1,2}$",qq:"^[1-9]*[1-9][0-9]*$",tel:"^(([0\\+]\\d{2,3}-)?(0\\d{2,3})-)?(\\d{7,8})(-(\\d{3,}))?$",username:"^\\w+$",letter:"^[A-Za-z]+$",letter_u:"^[A-Z]+$",letter_l:"^[a-z]+$",idcard:"^[1-9]([0-9]{14}|[0-9]{17})$"};
function intiValidate(){$.formValidator.initConfig();var productnameMaxLength=140;$("#productname").bind("keyup focus",function(){refreshCount($(this).val(),'productNameLengthSpan',productnameMaxLength);}).formValidator().inputValidator({min:1,max:productnameMaxLength,onError:"请填写产品标题，最大"+productnameMaxLength+"个字符"}).functionValidator({fun:checkProductName,onError:"请您不要输入非英文字符和符号"});refreshCount($("#productname").val(),'productNameLengthSpan',productnameMaxLength);var productdescMaxLength=500;$("#productdesc").bind("keyup focus",function(){refreshCount($(this).val(),'productdescLengthSpan',productdescMaxLength);}).formValidator().inputValidator({min:1,max:productdescMaxLength,onError:"请填写产品简短描述，最大"+productdescMaxLength+"个字符"}).functionValidator({fun:checkProductDesc,onError:"请您不要输入非英文字符和符号"});refreshCount($("#productdesc").val(),'productdescLengthSpan',productdescMaxLength);var pekeywordMaxLength=25;$("#keyword1").bind("keyup focus",function(){console.log(1);}).formValidator().inputValidator({min:0,max:pekeywordMaxLength,onError:"抱歉，产品关键词的最大长度为"+pekeywordMaxLength+"个字符"}).functionValidator({fun:checkPekeyword,onError:"抱歉，您的产品关键词只允许输入字母和数字"});$("#keyword2").bind("keyup focus",function(){console.log(1);}).formValidator().inputValidator({min:0,max:pekeywordMaxLength,onError:"抱歉，产品关键词的最大长度为"+pekeywordMaxLength+"个字符"}).functionValidator({fun:checkPekeyword,onError:"抱歉，您的产品关键词只允许输入字母和数字"});$("#keyword3").bind("keyup focus",function(){console.log(1);}).formValidator().inputValidator({min:0,max:pekeywordMaxLength,onError:"抱歉，产品关键词的最大长度为"+pekeywordMaxLength+"个字符"}).functionValidator({fun:checkPekeyword,onError:"抱歉，您的产品关键词只允许输入字母和数字"});$("#measureid").formValidator().inputValidator({min:1,onError:"请选择销售单位"});$("#productweight").formValidator().regexValidator({regExp:"num",dataType:"enum",onError:"产品包装后重量输入错误"});}
var _dh_backErrorDefination_index=1;var _dh_frontErrorDefination={productattr:{name:"产品属性",order:_dh_backErrorDefination_index++},productname:{name:"产品标题",order:_dh_backErrorDefination_index++},keyword1:{name:"英文产品关键词",order:_dh_backErrorDefination_index++},keyword2:{name:"英文产品关键词",order:_dh_backErrorDefination_index++},keyword3:{name:"英文产品关键词",order:_dh_backErrorDefination_index++},div_imgcontainer:{name:"产品图片",order:_dh_backErrorDefination_index++},productdesc:{name:"产品简短描述",order:_dh_backErrorDefination_index++},featureshtml:{name:"产品详细描述",order:_dh_backErrorDefination_index++},measureid:{name:"销售产品计量单位",order:_dh_backErrorDefination_index++},productweight:{name:"产品包装后重量",order:_dh_backErrorDefination_index++},baseqt:{name:"产品计重阶梯数量",order:_dh_backErrorDefination_index++},stepqt:{name:"产品计重阶梯的增加数量",order:_dh_backErrorDefination_index++},stepweight:{name:"产品计重阶梯的增加重量",order:_dh_backErrorDefination_index++},sizelen:{name:"产品包装后长度",order:_dh_backErrorDefination_index++},sizewidth:{name:"产品包装后宽度",order:_dh_backErrorDefination_index++},sizeheight:{name:"产品包装后高度",order:_dh_backErrorDefination_index++},productprice:{name:"产品价格",order:_dh_backErrorDefination_index++},productinventory:{name:"产品备货信息",order:_dh_backErrorDefination_index++},shippingmodelid:{name:"运费设置",order:_dh_backErrorDefination_index++},promisehtml:{name:"服务承诺",order:_dh_backErrorDefination_index++},others:{name:"其他问题",order:_dh_backErrorDefination_index++},googleshopping:{name:"站内外推广图片",order:_dh_backErrorDefination_index++},validatecode:{name:"验证码",order:_dh_backErrorDefination_index++},saleinfo:{name:"产品销售信息",order:_dh_backErrorDefination_index++}};var _dh_backErrorDefination={"error.empty.productproductname2":"productname","error.empty.productproductname3":"productname","error.empty.productproductname4":"productname","error.empty.productproductname5":"productname","error.empty.productproductname6":"productname","error.empty.productproductname7":"productname","error.empty.productproductname8":"productname","error.empty.productproductnamelen":"productname","error.empty.productproductnamechinese":"productname","error.productentry.productnameekeywords":"productname","error.productentry.productnameikeywords":"productname","error.productentry.productnamerepeat":"productname","error.prodbase.keywords.scripterror":"productname","error.empty.productpicurl7":"div_imgcontainer","errors.product.userindo_img":"div_imgcontainer","errors.product.userindo_img8":"div_imgcontainer","errors.product.userindo_img6":"div_imgcontainer","error.empty.picurl1":"div_imgcontainer","error.empty.productpromisehtmlempty":"promisehtml","error.empty.productpromisehtmlsize":"promisehtml","error.empty.productpromisehtmlchinese":"promisehtml","error.empty.productpromisehtmlupload":"promisehtml","error.empty.productfeatureshtml6":"featureshtml","error.empty.productfeatureshtmlupload":"featureshtml","error.empty.error.html5000":"featureshtml","error.empty.productpricetypechinese":"productprice","error.empty.productsupplierprice15":"productprice","error.empty.productsupplierprice10":"productprice","error.empty.productsupplierprice9":"productprice","error.empty.productsupplierprice8":"productprice","error.empty.productsupplierprice":"productprice","error.empty.productpostday":"productprice","error.empty.productprice":"productprice","error.empty.productsample":"productprice","error.empty.productsample2":"productprice","error.empty.productsample4":"productprice","error.empty.productsample5":"productprice","error.empty.productsample6":"productprice","error.empty.productsample7":"productprice","error.empty.productvaildday":"productprice","error.empty.productvaildday":"productprice","error.productentry.emptyattrname":"productattr","error.productentry.emptyattrval":"productattr","error.productentry.onlyhaveattrnoval":"productattr","error.productentry.existemptyattrval":"productattr","error.productentry.outlimit.proattrvalcount":"productattr","error.productentry.lengthoutlimit":"productattr","error.productentry.nonenglish":"productattr","error.productentry.brandkeyword":"productattr","error.productentry.illegalproductattr":"productattr","error.productentry.attrempty":"productattr","error.productentry.illegalbrand":"productattr","error.productentry.repeat.productattrval":"productattr","error.productentry.nonnumric":"productattr","error.productentry.attrvalidcorrect":"productattr","error.productentry.lengthoutlimit.selfdefined":"productattr","error.productentry.picurllengthoutlimit":"productattr","error.productentry.emptyotherval":"productattr","error.match.sku.attr":"productattr","error.productentry.scriptattrname":"productattr","error.productentry.scripterror":"productattr","error.productentry.scriptattrval":"productattr","error.emptyValName.scriptSpecSelf":"productattr","error.productentry.scripterror.selfdefined":"productattr","error.empty.category":"selectCategoryInput","error.category.none":"selectCategoryInput","error.empty.productcatalogid6":"selectCategoryInput","error.empty.productcatalogid7":"selectCategoryInput","label.productedit.mustinputpackageweiht":"measureid","label.productedit.mustimputpackagelength":"measureid","label.productedit.mustimputpackagewidth":"measureid","label.productedit.mustimputpackageheight":"measureid","error.empty.shipset1":"shippingmodelid","error.empty.shipset2":"shippingmodelid","error.empty.shipset3":"shippingmodelid","error.empty.shipset4":"shippingmodelid","error.empty.shipset5":"shippingmodelid","error.empty.shipset6":"shippingmodelid","error.empty.shipset11":"shippingmodelid","error.empty.productproductdesc3":"productdesc","error.empty.productproductdesc4":"productdesc","error.empty.productproductdesc5":"productdesc","error.productentry.productdesckeywords":"productdesc","error.product.googleshopping.required":"googleshopping","error.googleshopping.update":"googleshopping","error.product.verifycode":"validatecode","error.product.InventoryLocation.sku.saleStatus":"saleinfo","error.productentry.syi.blackerror":"others"};function showErrorTip(id,msg){console.log("showErrorTip:");console.log(id);console.log(msg);if(!isShowError){return;}
if(_dh_errors[id])return;_dh_errors[id]=msg;var errorTip$=$("#"+id+"ErrTip");if(errorTip$.length>0){errorTip$.show();if(msg){errorTip$.html("<span>"+msg+"</span>");}}}
function hideErrorTip(id,msg){var errorTip$=$("#"+id+"ErrTip");if(!msg||errorTip$.html()=="<span>"+msg+"</span>"){errorTip$.hide().html("<span></span>");_dh_errors[id]=null;delete _dh_errors[id];}}
function showLayoutTip(title,msg,showid){var showmsg="";for(var i=0;i<msg.length;i++){showmsg+="<span>"+msg[i]+"</span>";}
var showidhtml="<div id='helpTipid' style='display:none'>"+showid+"</div>";$("#layouttip").html("<h2>"+title+"</h2>"+showmsg+showidhtml);}
function createFrontErrorUI(){var errorList=[];for(var inputId in _dh_errors){pushErrorObject(inputId,_dh_errors[inputId],errorList);}
if(errorList.length>0){createErrorUI(errorList);}}
function pushErrorObject(inputId,msg,errorList){var name="未定义错误";var order=100;var displayObj=_dh_frontErrorDefination[inputId];if(displayObj){name=displayObj["name"];order=displayObj["order"];}else{name="未定义错误";}
errorList.push({msg:msg,inputId:inputId,order:order,name:name});}
function createErrorUI(errorList){errorList.sort(function(a,b){return a.order-b.order;});$("#errorUL").empty();for(var i=0;i<errorList.length;i++){var error=errorList[i];$("#errorUL").append('<li><a href="#a_'+error["inputId"]+'">'+error["name"]+'</a>：<span class="color1">'+error["msg"]+'</span></li>');}
$("#errorMsgDiv").show();window.location.hash="errorMsgDiv";}
function createBackErrorUI(errors){console.log("createBackErrorUI");var errorList=[];for(var key in errors){var inputId=_dh_backErrorDefination[key];if(!inputId){console.log("找不到后台错误定义:"+key);inputId="backId";}
var msg=errors[key];pushErrorObject(inputId,msg,errorList);}
createErrorUI(errorList);}
function refreshCount(value,displayId,iMaxLen){if(!value){value="";}
var iRLen=iMaxLen-value.length;if(iRLen<0){$("#"+displayId).removeClass().addClass("colorf00");}else{$("#"+displayId).removeClass().addClass("color444");}
$("#"+displayId).html(iRLen);}
function checkProductDesc(val,oInp){var strValue=oInp.value;strValue=strValue.replace(/<script[^>]*>[\w\W]*?<\/script>/gi,'');strValue=replaceZhToEn(strValue);if(!checkValidEnglish(oInp))return false;return true;}
function checkPekeyword(valueOfInput,oInp){oInp.value=$.trim(oInp.value);var strValue=oInp.value;return/^[a-z0-9\s\.]*$/gi.test(strValue);}
function checkPackSize(){return checkSizeNull()&&checkWeight();}
function checkSizeNull(nType){DhgateConsole.info('检查产品包装尺寸');var bRet=true;if(nType==1||nType==null){hideErrorTip("sizelen");var paramlen=$("#sizelen").val();if(paramlen==""){bRet=false;showErrorTip("sizelen",msg_checkSizeNull_html1);}else{if(!isFloat(paramlen)||parseFloat(paramlen)<1){bRet=false;showErrorTip("sizelen",msg_checkSizeNull_html2);}}}
if(nType==2||nType==null){hideErrorTip("sizewidth");var paramwidth=$("#sizewidth").val();if(paramwidth==""){bRet=false;showErrorTip("sizewidth",msg_checkSizeNull_html3);}else{if(!isFloat(paramwidth)||parseFloat(paramwidth)<1){bRet=false;showErrorTip("sizewidth",msg_checkSizeNull_html4);}}}
if(nType==3||nType==null){hideErrorTip("sizeheight");var paramheight=$("#sizeheight").val();if(paramheight==""){bRet=false;showErrorTip("sizeheight",msg_checkSizeNull_html5);}else{if(!isFloat(paramheight)||parseFloat(paramheight)<1){bRet=false;showErrorTip("sizeheight",msg_checkSizeNull_html6);}}}
return bRet;}
function checkProductWeight(val,oInp){var ok=checkWeight();if(ok){checkProductWeightSize();}}
function checkWeight(bStep){DhgateConsole.info('检查产品重量');$("#productweightTip").hide();if(!bStep){var sWeight=$("#productweight").val().Trim();if(sWeight==""||isNaN(parseFloat(sWeight))||parseFloat(sWeight)==0)
{showErrorTip("productweight","\u4ea7\u54c1\u5305\u88c5\u540e\u91cd\u91cf\u8f93\u5165\u9519\u8bef\u3002");return false;}}
return checkWeightStep();}
function checkWeightStep(){var bRet=true;if($("#isonlyweight").attr("checked")){if(!checkWeightBaseQT()){bRet=false;}
if(!checkWeightStepQT()){bRet=false;}
if(!checkWeightStepWeightQT()){bRet=false;}}
return bRet;}
function checkWeightBaseQT(){if($("#isonlyweight").attr("checked")){var baseqt=$("#baseqt").val();if(baseqt==""||isNaN(parseInt(baseqt))||parseFloat(baseqt)==0){showErrorTip("baseqt","\u8bf7\u586b\u5199\u4ea7\u54c1\u8ba1\u91cd\u9636\u68af\u7684\u6570\u91cf\u3002");return false;}}
hideErrorTip("baseqt");return true;}
function checkWeightStepQT(){if($("#isonlyweight").attr("checked")){var stepweight=$("#stepweight").val();var stepqt=$("#stepqt").val();if(stepqt==""||isNaN(parseInt(stepqt))||parseFloat(stepqt)==0){showErrorTip("stepqt","\u8bf7\u586b\u5199\u4ea7\u54c1\u8ba1\u91cd\u9636\u68af\u7684\u589e\u52a0\u6570\u91cf\u3002");return false;}}
hideErrorTip("stepqt");return true;}
function checkWeightStepWeightQT(){if($("#isonlyweight").attr("checked")){var stepweight=$("#stepweight").val();if(stepweight==""||isNaN(parseFloat(stepweight))||parseFloat(stepweight)==0){showErrorTip("stepweight","\u8bf7\u586b\u5199\u4ea7\u54c1\u8ba1\u91cd\u9636\u68af\u7684\u589e\u52a0\u91cd\u91cf\uff0c\u5355\u4f4d\u4e3a\u516c\u65a4\u3002");return false;}}
hideErrorTip("stepweight");return true;}
function checkProductWeightSize(){var pWeight=$("#productweight").val();if(pWeight==""||!isFloat(pWeight)){return false;}
if($("#isonlyweight").attr("checked")){$("#div_weightalert").hide();}}
function isPackageFilled(){var weight=$("#productweight").val();var length=$("#sizelen").val();var width=$("#sizewidth").val();var height=$("#sizeheight").val();var b=weight&&weight!=""&&length&&length!=""&&width&&width!=""&&height&&height!=""&&!isNaN(parseInt(weight))&&!isNaN(parseInt(length))&&!isNaN(parseInt(width))&&!isNaN(parseInt(height));return b;}
function changePackQuantity(oQInput){var iQu=oQInput.value;if(iQu==""){iQu=1;}
var oUnitList3=document.getElementsByName("sortbyunit3");var nLen=oUnitList3.length;var strSleUnit=document.getElementsByName("sortbyunit")[0].innerHTML;var sUnit=iQu+strSleUnit+"/"+msg_packselect_unit;for(var i=0;i<nLen;i++){oUnitList3[i].innerHTML=sUnit;}};
var DhgateConsole={error:function(error){console.log(error);var errorStr=JSON.stringify(error);$.ajax({type:"POST",url:"/mydhgate/product/ajaxerrorlog.do",data:{error:errorStr,isblank:true},dataType:"json",error:function(){}});},info:function(msg){var logUL$=$('#logUL');if(logUL$.length==0)return;logUL$.append('<li>'+msg+'</li>');console.log(msg);},clear:function(){var logUL$=$('#logUL');if(logUL$.length==0)return;logUL$.empty();}};String.prototype.Trim=function(){return this.replace(/(^\s+|\s+$)/g,"");};function checkProductName(valueOfInput,oInp){var strValue=oInp.value;strValue=replaceZhToEn(strValue);oInp.value=strValue.replace(/<script[^>]*>[\w\W]*?<\/script>/gi,'');if(!checkValidEnglish(oInp))return false;return true;}
function checkName(oId){var othis=document.getElementById(oId);var strValue=othis.value;strValue=replaceZhToEn(strValue);othis.value=strValue.replace(/<script[^>]*>[\w\W]*?<\/script>/gi,'');if(!checkValidEnglish(othis))return false;return true;}
function checkValidEnglish(oInput){var sValue=oInput.value;var eValue=replaceZhToEn(sValue.Trim());if(sValue!=eValue){oInput.value=eValue;}
var strinpId=oInput.id;if(eValue.length>0&&!checkEnglish(eValue)){return false;}
return true;}
function checkEnglish(str){if(str==null||str.Trim().length==0)return true;str=replaceZhToEn(str.Trim());var len=str.length;var i;for(i=0;i<len;i++){if(str.charCodeAt(i)>255){return false;}}
return true;}
function replaceZhToEn(str){if(str==null||str=="")return str;str=str.replace(/！/g,"!");str=str.replace(/◎/g,"@");str=str.replace(/＃/g,"#");str=str.replace(/￥/g,"$");str=str.replace(/％/g,"%");str=str.replace(/……/g,"^");str=str.replace(/—/g,"&");str=str.replace(/×/g,"*");str=str.replace(/（/g,"(");str=str.replace(/）/g,")");str=str.replace(/－/g,"-");str=str.replace(/＋/g,"+");str=str.replace(/÷/g,"/");str=str.replace(/§/g,"|");str=str.replace(/。/g,".");str=str.replace(/，/g,",");str=str.replace(/《/g,"<");str=str.replace(/》/g,">");str=str.replace(/？/g,"?");str=str.replace(/～/g,"~");str=str.replace(/“/g,"\"");str=str.replace(/；/g,";");str=str.replace(/：/g,":");str=str.replace(/‘/g,"'");str=str.replace(/【/g,"[");str=str.replace(/】/g,"]");str=str.replace(/『/g,"{");str=str.replace(/』/g,"}");str=str.replace(/·/g,"`");str=str.replace(/！/g,"!");str=str.replace(/＠/g,"@");str=str.replace(/＃/g,"#");str=str.replace(/￥/g,"$");str=str.replace(/％/g,"%");str=str.replace(/＾/g,"^");str=str.replace(/＆/g,"&");str=str.replace(/（/g,"(");str=str.replace(/）/g,")");str=str.replace(/＿/g,"_");str=str.replace(/－/g,"-");str=str.replace(/＋/g,"+");str=str.replace(/＝/g,"=");str=str.replace(/＼/g,"\\");str=str.replace(/｜/g,"|");str=str.replace(/ａ/g,"a");str=str.replace(/ｂ/g,"b");str=str.replace(/ｃ/g,"c");str=str.replace(/ｄ/g,"d");str=str.replace(/ｅ/g,"e");str=str.replace(/ｆ/g,"f");str=str.replace(/ｇ/g,"g");str=str.replace(/ｈ/g,"h");str=str.replace(/ｉ/g,"i");str=str.replace(/ｊ/g,"j");str=str.replace(/ｋ/g,"k");str=str.replace(/ｌ/g,"l");str=str.replace(/ｍ/g,"m");str=str.replace(/ｎ/g,"n");str=str.replace(/ｏ/g,"o");str=str.replace(/ｐ/g,"p");str=str.replace(/ｑ/g,"q");str=str.replace(/ｒ/g,"r");str=str.replace(/ｓ/g,"s");str=str.replace(/ｔ/g,"t");str=str.replace(/ｕ/g,"u");str=str.replace(/ｖ/g,"v");str=str.replace(/ｗ/g,"w");str=str.replace(/ｘ/g,"x");str=str.replace(/ｙ/g,"y");str=str.replace(/ｚ/g,"z");str=str.replace(/Ａ/g,"A");str=str.replace(/Ｂ/g,"B");str=str.replace(/Ｃ/g,"C");str=str.replace(/Ｄ/g,"D");str=str.replace(/Ｅ/g,"E");str=str.replace(/Ｆ/g,"F");str=str.replace(/Ｇ/g,"G");str=str.replace(/Ｈ/g,"H");str=str.replace(/Ｉ/g,"I");str=str.replace(/Ｊ/g,"J");str=str.replace(/Ｋ/g,"K");str=str.replace(/Ｌ/g,"L");str=str.replace(/Ｍ/g,"M");str=str.replace(/Ｎ/g,"N");str=str.replace(/Ｏ/g,"O");str=str.replace(/Ｐ/g,"P");str=str.replace(/Ｑ/g,"Q");str=str.replace(/Ｒ/g,"R");str=str.replace(/Ｓ/g,"S");str=str.replace(/Ｔ/g,"T");str=str.replace(/Ｕ/g,"U");str=str.replace(/Ｖ/g,"V");str=str.replace(/Ｗ/g,"W");str=str.replace(/Ｘ/g,"X");str=str.replace(/Ｙ/g,"Y");str=str.replace(/Ｚ/g,"Z");str=str.replace(/［/g,"[");str=str.replace(/］/g,"]");str=str.replace(/｛/g,"{");str=str.replace(/｝/g,"}");str=str.replace(/：/g,":");str=str.replace(/；/g,";");str=str.replace(/＂/g,"\"");str=str.replace(/＇/g,"'");str=str.replace(/？/g,"?");str=str.replace(/／/g,"/");str=str.replace(/、/g,",");str=str.replace(/．/g,".");str=str.replace(/，/g,",");str=str.replace(/＞/g,">");str=str.replace(/＜/g,"<");str=str.replace(/｀/g,"`");str=str.replace(/～/g,"~");str=str.replace(/１/g,"1");str=str.replace(/２/g,"2");str=str.replace(/３/g,"3");str=str.replace(/４/g,"4");str=str.replace(/５/g,"5");str=str.replace(/６/g,"6");str=str.replace(/７/g,"7");str=str.replace(/８/g,"8");str=str.replace(/９/g,"9");str=str.replace(/０/g,"0");str=str.replace(/　/g," ");return str;}
function isFloat(s){if(s==null||s=="")return false;var patrn=/^([1-9]\d*)$|(0)$/;var patrn1=/^([0-9]\d*)$/;var dotindex=s.indexOf(".");if(dotindex>0){var bs=s.substring(0,dotindex);if(!patrn.exec(bs))
return false;if(dotindex==s.length-1){return true;}else{var es=s.substring(dotindex+1);if(!patrn1.exec(es))
return false;else
return true;}}
if(!patrn.exec(s))
return false;else
return true;}
function isInt(s){if(s==null||s=="")return false;var patrn=/^([1-9]\d{0,9})$|(0)$/;if(!patrn.exec(s))
return false;else
return true;}
function inputRightInt(text1){str=text1.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isInt(str)){var ilen=str.length;str=str.substring(0,ilen-1);}else{if(str.length>6||str*1==0){var ilen=str.length;str=str.substring(0,ilen-1);}
break;}}
text1.value=str;}
function inputFloat(text1,suffix){str=text1.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isFloat(str)){var ilen=str.length;str=str.substring(0,ilen-1);}else{var dotindex=str.indexOf(".");if(dotindex<0){if(str.length>6){var ilen=str.length;str=str.substring(0,ilen-1);}}
else if(dotindex>0.01){if(str.length-dotindex>suffix+1||str.substring(dotindex).length>3){var ilen=str.length;str=str.substring(0,ilen-1);}}
break;}}
text1.value=str;}
function StringBuffer(){this.__strings__=new Array;}
StringBuffer.prototype.append=function(str){this.__strings__.push(str);};StringBuffer.prototype.toString=function(){return this.__strings__.join("");};function isIE(){var bro=$.browser;if(bro.msie){return"1";}else{return"0";}}
function syiupload(action){try{_dhq.push(["setVar","vd",action]);_dhq.push(["pageview","syiupload"]);}catch(e){}};
var g_oDhgateHelpPanel;var g_dhgateHelpTime=0;var g_bAutoClose=false;function popHelpById(strHelpId,strObjId,postionType,bShow){if(!isPopHelp()&&!bShow)return false;pophelpbyid(strHelpId,strObjId,postionType);window.event.cancelBubble=true;}
function pophelpbyid(strHelpId,strObjId,postionType){if(!g_oDhgateHelpPanel)g_oDhgateHelpPanel=window.document.getElementById("dhgate_helppanel");var strhelppanelClass="helppane_right";if(postionType=="right"){strhelppanelClass="helppane_right";}else if(postionType=="left"){strhelppanelClass="helppane_left";}else if(postionType=="top"){strhelppanelClass="helppane_down";}else if(postionType=="right"){strhelppanelClass="helppane_up";}
if(!g_oDhgateHelpPanel){$("<iframe id='dhgate_hframe' class='non'  frameborder='0' style='position:absolute;Z-INDEX:500;'></iframe><div id='dhgate_helppanel' class='non' style='position:absolute;Z-INDEX:1000;' ><div class='helppanel'><div class='"+strhelppanelClass+"' onclick='hideHelpPanel();'></div><table style=\"width:100%\"><tr><td><H4>弹出式帮助</H4></td><td align=\"right\"><A href=\"javascript:void(0)\"  onclick=\"return false;\" onmousedown=\"popHelpSetCookie(false);\">不再显示</A>&nbsp;</td><td align=\"center\"><A href=\"javascript:void(0)\" onclick=\"hideHelpPanel();return false;\"><img title=\"关闭\" src=\"http://image.dhgate.com/2008/web20/seller/img/reg_image/new_tc_close.gif\" complete=\"complete\"/></A></td></tr></table><p id='dhgate_hcontent'></p><u><a id='dhgate_helpurl' href='' target='_blank' onmousedown='window.event.cancelBubble=true;'></a></u></div></div>").appendTo("body");g_oDhgateHelpPanel=window.document.getElementById("dhgate_helppanel");}
if(strHelpId==""||strObjId=="")return false;if(!window["g_dhgateHelpList"]){alert("帮助文档错误，请检查");return false;}
if(!g_dhgateHelpList[strHelpId]){alert("不存在编号为 "+strHelpId+" 的帮助文档，请检查");return false;}
var oCurrentEle=window.document.getElementById(strObjId);if(!oCurrentEle)return false;var oPosInfo=getElementPositionInfo(strObjId);if(oPosInfo==null)return false;if(postionType==null||postionType.toLowerCase()!="left")postionType="right";postionType=postionType.toLowerCase();if(postionType=="right"){g_oDhgateHelpPanel.style.top=(oPosInfo["top"]-10)+"px";g_oDhgateHelpPanel.style.left=oPosInfo["left"]+oPosInfo["width"]+10+"px";}else if(postionType=="left"){g_oDhgateHelpPanel.style.top=oPosInfo["top"]+"px";g_oDhgateHelpPanel.style.left=oPosInfo["left"]-278+"px";}
var oContent=g_dhgateHelpList[strHelpId];$("#dhgate_hcontent").html(oContent["content"]);$("#dhgate_helpurl").attr("href",oContent["url"]).html(oContent["text"]);g_oDhgateHelpPanel.className='blo';var oFrame=document.getElementById("dhgate_hframe");var oFStyel=oFrame.style;oFStyel.top=g_oDhgateHelpPanel.style.top;oFStyel.left=g_oDhgateHelpPanel.style.left;oFStyel.height=g_oDhgateHelpPanel.offsetHeight+"px";oFStyel.width=g_oDhgateHelpPanel.offsetWidth+"px";oFStyel.display='';if(g_bAutoClose){if(g_dhgateHelpTime!=0){window.clearTimeout(g_dhgateHelpTime);g_dhgateHelpTime=0;}
g_dhgateHelpTime=window.setTimeout(hideHelpPanel,3000);}}
function hideHelpPanel(){if(!g_oDhgateHelpPanel)g_oDhgateHelpPanel=window.document.getElementById("dhgate_helppanel");if(g_bAutoClose&&g_dhgateHelpTime!=0){window.clearTimeout(g_dhgateHelpTime);g_dhgateHelpTime=0;}
if(g_oDhgateHelpPanel!=null){g_oDhgateHelpPanel.className='non';var oFrame=document.getElementById("dhgate_hframe");oFrame.style.display='none';}}
function getElementPositionInfo(strEleId){var oEle=window.document.getElementById(strEleId);if(!oEle)return null;var arrPos={"top":"","left":"","width":"","height":""};var lTop=pageY(oEle);var lLeft=pageX(oEle);var lWidth=oEle.offsetWidth;var lHeight=oEle.offsetHeight;arrPos["top"]=lTop;arrPos["left"]=lLeft;arrPos["width"]=lWidth;arrPos["height"]=lHeight;return arrPos;}
function pageX(oEle){return oEle.offsetParent?(oEle.offsetLeft+pageX(oEle.offsetParent)):oEle.offsetLeft;}
function pageY(oEle){return oEle.offsetParent?(oEle.offsetTop+pageY(oEle.offsetParent)):oEle.offsetTop;}
function initDhgateHelpElement(){if(isPopHelp()){var oShowHelpCHK=document.getElementById('showbangzhuoinp');if(oShowHelpCHK!=null)oShowHelpCHK.checked=true;}
if(!window["g_dhgateEleList"]){return;}
if(!window["g_dhgateHelpList"]){alert("帮助文档 g_dhgateHelpList.js 错误，请检查");return false;}
if(g_dhgateEleList){var nLength=g_dhgateEleList.length;for(var i=0;i<nLength;i++){var strEventEId=g_dhgateEleList[i][0];var strHelpId=g_dhgateEleList[i][1];var strHelpEId=g_dhgateEleList[i][2];if($('#'+strEventEId).length==0){alert("无法找到ID为'"+strEventEId+"'的HTML元素，请检查");return false;}
if(strHelpEId==null){$('#'+strEventEId).bind('click',{'strHelpId':strHelpId,'strObjId':strEventEId},popHelpByEvent);}else{$('#'+strEventEId).bind('click',{'strHelpId':strHelpId,'strObjId':strHelpEId},popHelpByEvent);}
if($("#"+strEventEId+"_hswitch")[0]!=null){strHelpEId=strEventEId+"_hswitch";$('#'+strHelpEId).bind('click',{'strHelpId':strHelpId,'strObjId':strHelpEId,'bShow':true},popHelpByEvent);}else{if(g_dhgateEleList[i][3]){$('#'+strHelpEId).bind('click',{'strHelpId':strHelpId,'strObjId':strHelpEId,'bShow':true},popHelpByEvent);}}}
$(document.body).bind('mousedown',hideHelpPanel);}
var bPop=jQuery.cookie('dhpoph');if(bPop=="true"){popHelpSetCookie(true);}}
function popHelpByEvent(events){var strHelpId=events.data.strHelpId;var strObjId=events.data.strObjId;popHelpById(strHelpId,strObjId,null,events.data.bShow);events.cancelBubble=true;}
function popHelpSetCookie(bShowPop){if(window["jQuery"]&&window["jQuery"].cookie){jQuery.cookie('dhpoph',bShowPop,{"expires":7});}
var oShowHelpCHK=document.getElementById('showbangzhuoinp');if(!bShowPop){hideHelpPanel();}
if(oShowHelpCHK!=null)oShowHelpCHK.checked=bShowPop;}
function isPopHelp(){if(window["jQuery"]&&window["jQuery"].cookie){var bPop=jQuery.cookie('dhpoph');if(bPop==null){if(window["g_bNewSeller"]){popHelpSetCookie("true");return true;}}else{if(bPop!="true")return false;return true;}}
return false;}
$(document).ready(initDhgateHelpElement);
if(!window.G_EVENT){window.G_EVENT=$({})}
function checkSyiForm(){var productvo=new StringBuffer();var productname=$("#productname").val();productvo.append(productname);var productdesc=$("#productdesc").val();productvo.append(productdesc);var selfstand=$('#customAttrList').val();productvo.append(selfstand);var skuInfo=$('#proSkuInfo').val();productvo.append(skuInfo);var waterInfo=$('#waterMark').val();productvo.append(waterInfo);if(typeof(tiny)!="undefined"){var elm=tiny.elm.getContent();if(elm!=vhtml){productvo.append(elm);}}
var measureid=$("#measureid").val();productvo.append(measureid);var sortby=$('input[name="sortby"]:checked').val();productvo.append(sortby);var packquantity=$("#packquantity").val();productvo.append(packquantity);var productweight=$("#productweight").val();productvo.append(productweight);var isonlyweight=$('input[name="isonlyweight"]:checked').val();var baseqt=$("#baseqt").val();var baseqt=$("#stepqt").val();var baseqt=$("#stepweight").val();var sizelen=$("#sizelen").val();productvo.append(sizelen);var sizewidth=$("#sizewidth").val();productvo.append(sizewidth);var sizeheight=$("#sizeheight").val();productvo.append(sizeheight);var vaildday=$('input[name="vaildday"]:checked').val();productvo.append(vaildday);var toMd5=$.md5(productvo.toString());var fromMd5=$("#fromMD5").val();$("#fromMD5").val(toMd5);if(toMd5!=fromMd5){if(fromMd5!=""){return true;}else{if(productname!=""||productdesc!=""||productweight!=""){return true;}}}else{return false;}}
function submitDraftBox(){G_EVENT.trigger('draftbox-save');var isSubmit=checkSyiForm();if(isSubmit){var draft_options={url:'/syi/ajaxSavedraftbox.do?isblank=true',type:'post',dataType:'json',timeout:10000};isShowError=false;try{G_EVENT.trigger('getSyiAttrs');var proSpecList=getProductPriceDataForSubmit();if(proSpecList!=null){try{var jsonProSpec=JSON.stringify(proSpecList);$("#prospeclistid").val(jsonProSpec);}catch(err){}}
var shippingmodeVo=getShippingDataForSubmit();if(shippingmodeVo!=null){try{var jsonshippingmodelid=JSON.stringify(shippingmodeVo);$("#shippingmodelid").val(jsonshippingmodelid);}catch(err){}}
var imgList=getProductImageDataForSubmit();if(imgList!=null){try{var jsonAttr=JSON.stringify(imgList);$("#imglistid").val(jsonAttr);}catch(err){}}}catch(err){isShowError=true;}
isShowError=true;$.pub('sync.edite');$("#syi_form").ajaxSubmit(draft_options);return false;}}
function initDraftBox(){var productid=$("#productid").val();if(productid==""){var timer=$.timer(function(){submitDraftBox();},30000,true);}}
function initDraftBoxModal(){var isDraftbox=$("#isDraftbox").val();if(isDraftbox=="1"){$("#draftbox").modal({close:true});}}
function gotoEditPro(){$("#pop_close").hide();$("#pop_inner").html("<div class='box1 clearfix'><div class='boxcenter clearfix'><p class='pop-button'><img src='http://www.dhresource.com/seller/images/index/loading.gif'/><span>正在载入草稿……</span></p></div></div>");syiupload("syi_continue");window.location.href="/syi/edit.do?isdraftbox=1";}
function gotoAddPro(){jQuery.modal.close();};
(function($){$.dhgateTools=function(data,options){return $.dhgateTools.impl.init(data,options);};$.dhgateTools.staticValue={MB_OK:0,MB_OKCANCEL:1,MB_YESNOCANCEL:3,MB_YESNO:4,IDCANCEL:-1,IDNO:0,IDOK:1,IDYES:1,STR_OK:"确定",STR_YES:"是",STR_NO:"否",STR_CANCEL:"取消"};$.dhgateTools.defaults={close:true,closeTitle:'Close',onConfirm:null,onGiveUp:null,isModal:true,scrollType:'center',title:"提示信息",message:null,msgtype:$.dhgateTools.staticValue.MB_OK,width:360,icon:null};$.dhgateTools.MessageBox=function(options){return $.dhgateTools.impl.init(this,options).MessageBox();};$.dhgateTools.alert=function(options){if(options==null)return this;var msg=options.message;if(msg==null||msg.length==0)return this;if(options.icon==null){options.icon="alert";}
return $.dhgateTools.impl.init(this,options).MessageBox();};$.dhgateTools.confirm=function(options){if(options==null)return this;var msg=options.message;if(msg==null||msg.length==0)return this;if(options.icon==null){options.icon="confirm";}
if(options.msgtype==null){options.msgtype=$.dhgateTools.staticValue.MB_OKCANCEL;}
return $.dhgateTools.impl.init(this,options).MessageBox();};$.dhgateTools.impl={init:function(data,options){this.opts=$.extend({},$.dhgateTools.defaults,options);return this;},alert:function(options){return this.MessageBox(options);},MessageBox:function(){var msgList=this.opts.message;if(msgList==null||msgList.length==0)return this;var strUIList=[];strUIList[strUIList.length]="<div class=\"tc_warp\" style=\"width:"+this.opts.width+"px;\"><div class=\"tc_title\"><dl><dt>";strUIList[strUIList.length]=this.opts.title;strUIList[strUIList.length]="</dt><dd>";if(this.opts.close){strUIList[strUIList.length]="<a href=\"#blank\" class=\"closebtn\"><img src=\"http://image.dhgate.com/2008/web20/seller/img/reg_image/new_tc_close.gif\" alt=\"close\" /></a>";}
strUIList[strUIList.length]="</dd></dl></div>";strUIList[strUIList.length]="<div class=\"tc_main\"><div class=\"tc_content\"><div class=\"box1\">";var strIcon=null;if(this.opts.icon=="alert"){strIcon=" class='p1' ";}else if(this.opts.icon=="error"){strIcon=" class='p2' ";}else if(this.opts.icon=="ok"){strIcon=" class='p3' ";}else if(this.opts.icon=="confirm"){strIcon=" class='p4' ";}
for(var i=0;i<msgList.length;i++){strUIList[strUIList.length]="<p ";if(i==0&&strIcon!=null){strUIList[strUIList.length]=strIcon;}
strUIList[strUIList.length]=">"+msgList[i]+"</p>";}
strUIList[strUIList.length]="<div class=\"tc_content_button center\">";var btnTypeList=$.dhgateTools.staticValue;var btnType=this.opts.msgtype;if(btnTypeList.MB_OK==btnType){strUIList[strUIList.length]="<button type=\"button\" class=\"confirmbtn\"><span style=\"color:#fff\" class=\"button1_lt\"><span class=\"button1_ri\">确定</span></span></button>";}else if(btnTypeList.MB_OKCANCEL==btnType){strUIList[strUIList.length]="<button type=\"button\" class=\"confirmbtn\"><span style=\"color:#fff\" class=\"button1_lt\"><span class=\"button1_ri\">确定</span></span></button>&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"closebtn\"><span style=\"color:#6C6C6C\" class=\"button2_lt\"><span class=\"button2_ri\">取消</span></span></button>";}else if(btnTypeList.MB_YESNOCANCEL==btnType){strUIList[strUIList.length]=strUIList[strUIList.length]="<button type=\"button\" class=\"confirmbtn\"><span style=\"color:#fff\" class=\"button1_lt\"><span class=\"button1_ri\">&nbsp;是&nbsp;</span></span></button>&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"closebtn\"><span style=\"color:#6C6C6C\" class=\"button2_lt\"><span class=\"button2_ri\">&nbsp;否&nbsp;</span></span></button>&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"closebtn\"><span style=\"color:#6C6C6C\" class=\"button2_lt\"><span class=\"button2_ri\">取消</span></span></button>";}else if(btnTypeList.MB_YESNO==btnType){strUIList[strUIList.length]=strUIList[strUIList.length]="<button type=\"button\" class=\"confirmbtn\"><span style=\"color:#fff\" class=\"button1_lt\"><span class=\"button1_ri\">&nbsp;是&nbsp;</span></span></button>&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"closebtn\"><span style=\"color:#6C6C6C\" class=\"button2_lt\"><span class=\"button2_ri\">&nbsp;否&nbsp;</span></span></button>";}
strUIList[strUIList.length]="</div></div></div></div></div>";$(strUIList.join("")).modal(this.opts);return this;}};})(jQuery);
var mes_close_confirm="\u4F60\u786E\u8BA4\u8981\u79BB\u5F00\u6B64\u9875\u9762\u5417\uFF1F\u5982\u679C\u70B9\u201C\u786E\u5B9A\u201D\u79BB\u5F00\u8BE5\u9875\uFF0C\u5219\u60A8\u521A\u624D\u8F93\u5165\u7684\u4FE1\u606F\u90FD\u5C06\u4E22\u5931\u3002";var msg_jquery_alert="\u7f3a\u5c11jquery\u5e93";var msg_showResLen_alert1="\u8981\u67e5\u8be2\u5269\u4f59\u8f93\u5165\u5b57\u7b26\u7684\u5bf9\u8c61\u4e3a\u7a7a";var msg_showResLen_alert2="\u6700\u5927\u8f93\u5165\u5b57\u8282\u6570\u4e0d\u6b63\u786e";var msg_showResLen_alert3="\u8981\u67e5\u8be2\u5269\u4f59\u8f93\u5165\u5b57\u7b26\u7684\u5bf9\u8c61\u4e0d\u662f\u53ef\u7f16\u8f91\u5bf9\u8c61";var msg_showResLen_alert4="\u8f93\u5165\u7684\u5b57\u7b26\u6570\u5df2\u7ecf\u8d85\u8fc7\u6700\u5927\u8f93\u5165\u957f\u5ea6";var msg_showResLen_html1="\u8fd8\u53ef\u4ee5\u8f93\u5165";var msg_showResLen_html2="\u4e2a\u5b57\u7b26";var msg_checkValidEnglish_alert1="\u8981\u6821\u9a8c\u7684\u5bf9\u8c61\u4e3a\u7a7a";var msg_checkValidEnglish_alert2="\u8981\u6821\u9a8c\u7684\u5bf9\u8c61\u4e0d\u662f\u53ef\u7f16\u8f91\u5bf9\u8c61";var msg_checkValidEnglish_alert3="\u53ea\u80fd\u8f93\u5165\u82f1\u6587\u5b57\u7b26\u548c\u6570\u5b57\uff0c\u4e0d\u80fd\u8f93\u5165\u4e2d\u6587\u548c\u5168\u89d2\u5b57\u7b26\u8f93\u5165";var msg_checkCatalogKeyWord_html="\u4ea7\u54c1\u4ef7\u683c\u8ba1\u7b97\u9519\u8bef";var msg_productlbrandimitajax_message1="\u6b64\u7c7b\u76ee\u4e3a\u975e\u54c1\u724c\u4ea7\u54c1\u7c7b\u76ee,\u56e0\u6b64\u60a8\u4e0d\u80fd\u4f7f\u7528";var msg_productlbrandimitajax_message2="\u4f5c\u4e3a\u4ea7\u54c1\u7684\u63cf\u8ff0\u548c\u8bf4\u660e";var msg_checkSizeNull_html1="\u8bf7\u8f93\u5165\u5305\u88c5\u7684\u957f\u5ea6";var msg_checkSizeNull_html2="\u4ea7\u54c1\u5305\u88c5\u957f\u5ea6\u8bbe\u7f6e\u9519\u8bef";var msg_checkSizeNull_html3="\u8bf7\u8f93\u5165\u5305\u88c5\u7684\u5bbd\u5ea6";var msg_checkSizeNull_html4="\u4ea7\u54c1\u5305\u88c5\u5bbd\u5ea6\u8bbe\u7f6e\u9519\u8bef";var msg_checkSizeNull_html5="\u8bf7\u8f93\u5165\u5305\u88c5\u7684\u9ad8\u5ea6";var msg_checkSizeNull_html6="\u4ea7\u54c1\u5305\u88c5\u9ad8\u5ea6\u8bbe\u7f6e\u9519\u8bef";var msg_packselect_unit="\u5305";var msg_changePackQuantity_unit="\u4ef6";var msg_addProductTypeRow_alert="\u8bf7\u8f93\u5165\u89c4\u683c\u540d\u79f0";var msg_addProductPriceRow_html="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u91cf\u533a\u95f4";var msg_addProductPriceRow_alert="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u533a\u95f4\u6570\u91cf";var mag_checkProductName_info="\u4ea7\u54c1\u540d\u79f0\uff0c\u5bf9\u4e8e\u6210\u529f\u53d6\u5f97\u8ba2\u5355\u5f88\u91cd\u8981\uff0c\u4e0d\u80fd\u4e3a\u7a7a";var mag_checkProductDesc_info="\u4ea7\u54c1\u89c4\u683c\u8bf4\u660e\uff0c\u5bf9\u4e8e\u4e70\u5bb6\u9009\u62e9\u5546\u54c1\u5f88\u91cd\u8981\uff0c\u4e0d\u80fd\u4e3a\u7a7a";var mag_checkProductDesc_chinese="\u4ea7\u54c1\u4ef7\u683c\u533a\u95f4\u7684\u89c4\u683c\u4e0d\u80fd\u5305\u542b\u4e2d\u6587\u5b57\u7b26\uff0c\u8bf7\u8fd4\u56de\u4fee\u6539\u3002";var msg_checkProductProm_errorinfo1="\u4ea7\u54c1\u670d\u52a1\u627f\u8bfa\u4e3a\u5fc5\u586b\u9879\u3002";var msg_checkProductProm_errorinfo2="\u4ea7\u54c1\u670d\u52a1\u627f\u8bfa\u53ea\u80fd\u5305\u542b\u82f1\u6587\u548c\u6570\u5b57";var msg_modifyPostDayByShippingType_alert="\u60a8\u9009\u62e9\u4e86\u6d77\u5916\u76f4\u53d1\u8fd0\u8d39\u65b9\u5f0f\uff0c\u8bf7\u9009\u62e9\u4e00\u4e2a\u6d3b\u52a8\u65b9\u6848";var msg_isEmail_alert="\u5185\u5bb9\u4e0d\u5408\u6cd5";var msg_catlogpricelimit_alert1="\u5356\u5bb6\u9500\u552e\u5355\u4ef6\u4ef7\u683c\u5fc5\u987b\u8981\u5728";var msg_catlogpricelimit_alert2="\u7f8e\u5143\u4ee5\u4e0a";var msg_checkMostGreatLeast_html="\u622a\u6b62\u91c7\u8d2d\u91cf\u4e0d\u80fd\u5c0f\u4e8e\u7b49\u4e8e\u8d77\u59cb\u91c7\u8d2d\u91cf,\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165";var msg_checkProductPrice_info1="\u622a\u6b62\u91c7\u8d2d\u91cf\u3001\u8d77\u59cb\u91c7\u8d2d\u91cf\u3001\u9884\u5b9a\u4ea7\u54c1\u4ef7\u683c\u3001\u9884\u552e\u4ea7\u54c1\u4ef7\u683c\u3001\u4ed3\u5e93\u4ea7\u54c1\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a\u8f93\u5165";var msg_checkProductPrice_empty="\u8bf7\u586b\u5199\u8d2d\u4e70\u6570\u91cf\u533a\u95f4";var msg_checkProductPrice_info2="\u4ef7\u683c\u533a\u95f4\u6570\u636e\u9519\u8bef";var msg_checkProductPrice_info3="\u622a\u6b62\u91c7\u8d2d\u91cf\u3001\u8d77\u59cb\u91c7\u8d2d\u91cf\u3001\u5356\u5bb6\u9500\u552e\u4ef7\u683c\u3001\u5907\u8d27\u671f\u4e0d\u80fd\u4e3a\u7a7a\u540e\u91cd\u65b0\u8f93\u5165";var msg_checkProductPrice_info4="\u622a\u6b62\u91c7\u8d2d\u91cf\u3001\u8d77\u59cb\u91c7\u8d2d\u91cf\u3001\u5356\u5bb6\u9500\u552e\u4ef7\u683c\u3001\u5907\u8d27\u671f\u4e0d\u80fd\u4e3a 0 \u540e\u91cd\u65b0\u8f93\u5165";var msg_checkProductPrice_info5="\u4ea7\u54c1\u5907\u8d27\u671f\u5fc5\u987b\u57281--60\u4e4b\u95f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";var msg_checkProductPrice_info6="\u89c4\u683c\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u8f93\u5165\u6570\u636e";var msg_checkProductPrice_info7="\u89c4\u683c\u540d\u79f0\u91cd\u590d\u540e\u91cd\u65b0\u8f93\u5165";var msg_checkProductPrice_info8="\u60a8\u8f93\u5165\u7684\u8d77\u622a\u6b62\u91c7\u8d2d\u91cf\u4e0d\u6b63\u786e\uff0c\u8bf7\u6838\u5b9e\u540e\u8f93\u5165";var msg_checkProductPrice_info9="\u6b64\u4ea7\u54c1\u5df2\u7ecf\u52a0\u516548\u5c0f\u65f6\u95ea\u7535\u53d1\u8d27\u670d\u52a1\uff0c\u5982\u4fee\u6539\u5907\u8d27\u671f\uff0c\u5c06\u53d6\u6d88\u4ea7\u54c1\u7684\u8be5\u9879\u670d\u52a1\uff0c\u662f\u5426\u7ee7\u7eed\u64cd\u4f5c\uff1f";var msg_addProductsampleRow_alert="\u4e0d\u662f\u5de5\u5382\u7684\u4ea7\u54c1\uff0c\u4e0d\u53ef\u4ee5\u6709\u6837\u54c1\u4ef7\u683c\u3002";var msg_isaddsample_alert="\u4ea7\u54c1\u4ef7\u683c\u7684\u8d77\u59cb\u91c7\u8d2d\u91cf\u5fc5\u987b\u5927\u4e8e1\uff0c\u624d\u53ef\u4ee5\u589e\u52a0\u6837\u54c1\u4ef7\u683c";var msg_ispricesample_alert1="\u6837\u54c1\u4ef7\u683c\u7684\u622a\u6b62\u91c7\u8d2d\u91cf\u4e0d\u80fd\u5927\u4e8e\u7b49\u4e8e\u4ea7\u54c1\u4ef7\u683c\u7684\u8d77\u59cb\u91c7\u8d2d\u91cf";var msg_ispricesample_alert2="\u6837\u54c1\u4ef7\u683c\u7684\u622a\u6b62\u91c7\u8d2d\u91cf\u4e00\u5b9a\u8981\u5927\u4e8e\u7b49\u4e8e\u4ef7\u683c\u7684\u8d77\u59cb\u91c7\u8d2d\u91cf";var msg_checkProductAttribute_info1="\u4ea7\u54c1\u6807\u7b7e\u4e0d\u80fd\u4e3a\u7a7a";var msg_checkProductAttribute_info2="\u4ea7\u54c1\u6807\u7b7e\u7684\u5176\u4ed6\u503c\u91cc\u4e0d\u80fd\u6709\u4e2d\u6587";var msg_isInputEle_html1="\u8bf7\u8f93\u5165\u6570\u636e";var msg_isInputEle_html2="\u786e\u5b9a";var msg_isInputEle_message="\u60a8\u786e\u5b9a\u8981\u4f7f\u7528\u6b64\u6a21\u7248\u5417\uff1f";var msg_showhtmlmodel_html="\u6e29\u99a8\u63d0\u793a\uff1a";var msg_setHTMLDescription_html1="\u8bf7\u8f93\u5165";var msg_setHTMLDescription_html2="\u6570\u636e\u9519\u8bef";var msg_checkProductType_html="\u4ea7\u54c1\u89c4\u683c\u540d\u4e0d\u80fd\u91cd\u590d";var msg_ajaxGiveUPCatch_html="\u8c03\u6574\u4e3a\u81ea\u4e3b\u4e0a\u67b6\u4ea7\u54c1\u64cd\u4f5c\u5931\u8d25";var msg_showImgPOPWin_html1="\u70b9\u51fb\u770b\u5927\u56fe";var msg_showImgPOPWin_html2="\u9009\u62e9\u6b64\u56fe\u7247";var msg_confirmDeletePromiseModel_message="\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u6a21\u7248\u5417\uff1f";var msg_deletePromiseModel_message="\u6210\u529f\u5220\u9664\u670d\u52a1\u627f\u8bfa\u6a21\u7248 ";var msg_savePromiseModel_message1="\u8bf7\u8f93\u5165\u6a21\u7248\u540d\u79f0\u3002";var msg_savePromiseModel_message2="\u670d\u52a1\u627f\u8bfa\u4e2d\u4e0d\u80fd\u5305\u542b\u6709\u4e2d\u6587";var msg_savePromiseModel_message3="\u670d\u52a1\u627f\u8bfa\u4e2d\u4e0d\u80fd\u5305\u542bEmail\u7b49\u8054\u7cfb\u65b9\u5f0f";var msg_savePromiseModel_message4="\u670d\u52a1\u627f\u8bfa\u6a21\u7248\u4fdd\u5b58\u6210\u529f\u3002";var msg_savePromiseModel_html="\u5220\u9664\u6a21\u7248";var msg_checkPromise_html1="\u586b\u5199\u670d\u52a1\u627f\u8bfa\uff0c\u53ef\u589e\u5f3a\u5ba2\u6237\u8d2d\u4e70\u4fe1\u5fc3\uff0c\u83b7\u53d6\u66f4\u591a\u8ba2\u5355\u3002";var msg_checkPromise_html2="\u670d\u52a1\u627f\u8bfa\u4e2d\u4e0d\u80fd\u4e3a\u7a7a";var msg_checkPromise_html3="\u670d\u52a1\u627f\u8bfa\u4e2d\u4e0d\u80fd\u5305\u542b\u6709\u4e2d\u6587";var msg_checkPromise_html4="\u670d\u52a1\u627f\u8bfa\u4e2d\u4e0d\u80fd\u5305\u542bEmail\u7b49\u8054\u7cfb\u65b9\u5f0f";var msg_checkPromise_html5="\u670d\u52a1\u627f\u8bfa\u5185\u5bb9\u592a\u957f";var msg_initShippingType_alert="\u81f3\u5c11\u8981\u9009\u62e9\u4e00\u5bb6\u7269\u6d41\u516c\u53f8";var msg_checkPMyDiscount_html="\u8fd0\u8d39\u6298\u6263\u9519\u8bef";var msg_checkShippingData_alert1="\u7269\u6d41\u65b9\u5f0f\u8bbe\u7f6e\u9519\u8bef";var msg_checkShippingData_alert2="\u8bf7\u9009\u62e9DHgate\u7269\u6d41\u5408\u4f5c\u5546";var msg_checkMyDiscount_alert="\u8fd0\u8d39\u6298\u6263\u8bbe\u7f6e\u9519\u8bef";var msg_showCountryByType_html1="\u5168\u90e8\u9009\u62e9";var msg_showCountryByType_html2="\u53d6\u6d88";var msg_showCountryByType_html3="\u5230\u4e16\u754c\u5404\u5730 ";var msg_showCountryByType_html4="\u786e \u5b9a";var msg_showCountryByType_html5="\u53d1\u8d27\u6e2f\u53e3\uff1a";var msg_showCountryByType_html6="\u8239\u671f\uff1a";var msg_updateFreeCountry_html="\u8fd0\u9001\u5230\u4e16\u754c\u5404\u5730";var msg_updateFreeCountry_alert1="\u8bf7\u9009\u62e9\u56fd\u5bb6";var msg_updateFreeCountry_alert2="\u8bf7\u586b\u5199\u8239\u671f";var msg_selectSingleCountry_alert="\u6b64\u56fd\u5bb6\u5df2\u7ecf\u5728\u5176\u4ed6\u7684\u8fd0\u8d39\u5b9a\u4e49\u4e2d\u88ab\u9009\u4e2d\uff0c\u4e0d\u80fd\u91cd\u590d\u9009\u4e2d";var msg_calculateDHGateShipCost_html1="\u6bcf\u4ef6\u4ea7\u54c1\u8fd0\u5230\u7f8e\u56fd\u7684\u8fd0\u8d39\u4e3a";var msg_calculateDHGateShipCost_html2="\u7f8e\u91d1\u3002";var msg_showTranslateWin_html2="\u7ffb\u8bd1\u7ed3\u679c\u7531";var msg_showTranslateWin_html3="\u63d0\u4f9b";var msg_upLoadProductPic_alert="\u8bf7\u9009\u62e9\u56fe\u7247\u518d\u4e0a\u4f20";var msg_upLoadProductPic_errormes1="\u4e3b\u56fe\u5927\u5c0f\uff0c\u957f\u5bbd\u6700\u4f4e250\u50cf\u7d20";var msg_upLoadProductPic_errormes2="\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236,\u8bf7\u68c0\u67e5";var msg_checkImg_alert="\u4f60\u9009\u62e9\u7684\u6587\u4ef6\u683c\u5f0f\u9519\u8bef,\u53ea\u5141\u8bb8\u9009\u62e9jpg,jpeg,gif\u6587\u4ef6";var msg_selectProductUnit_alert="\u9500\u552e\u5355\u4f4d\u793a\u4f8b\uff1a12\u7f8e\u5143";var msg_category_html="\u4e0d\u53ef\u64cd\u4f5c\u7c7b\u76ee";var msg_upload_html1="\u4e0a\u4f20\u5931\u8d25\u3002";var msg_upload_html2="\u7cfb\u7edf\u51fa\u9519\uff0c\u4e0a\u4f20\u5931\u8d25";var msg_createPriceSpecification_unit="\u4ef6";var msg_createPriceSpecification_alert="\u6700\u591a\u6dfb\u52a05\u4e2a\u89c4\u683c";var msg_createSpecificationUI_unit="\u5305";var msg_createSpecificationUI_html1="\u53d6\u6d88\u6b64\u89c4\u683c";var msg_createSpecificationUI_html2="\u4ece";var msg_createSpecificationUI_html3="\u5220\u9664";var msg_createSpecificationUI_html4="\u6b64\u884c\u4e3a\u6837\u54c1\u4ef7\u683c\u8bbe\u7f6e";var msg_createSpecificationUI_html5="\u6dfb\u52a0\u4ef7\u683c\u533a\u95f4";var msg_createSpecificationUI_html6="\u6dfb\u52a0\u6837\u54c1\u4ef7\u683c";var msg_createSpecificationUI_html7="\u6309\u89c4\u683c\u5b9a\u4ef7";var msg_createDHPortSpecificationUI_html1="\u9884\u5b9a\u4ea7\u54c1\uff1a";var msg_createDHPortSpecificationUI_html2="\u9884\u552e\u4ea7\u54c1\uff1a";var msg_createDHPortSpecificationUI_html3="\u4ed3\u5e93\u4ea7\u54c1\uff1a";var msg_createDHPortSpecificationUI_html4="\u6837\u54c1\u4ef7\u683c\uff1a";var msg_addPriceRange_html="\u4ef7\u683c\u533a\u95f4\u8bbe\u7f6e\u9519\u8bef";var msg_addPriceRange_alert="\u6700\u591a\u6dfb\u52a05\u4e2a\u4ef7\u683c\u533a\u95f4";var msg_addSamplePrice_alert="\u4ef7\u683c\u533a\u95f4\u6700\u5c0f\u8d77\u5b9a\u91cf>1,\u624d\u53ef\u4ee5\u6dfb\u52a0\u6837\u54c1\u4ef7\u683c";var msg_getProductPriceDataForSubmit_html="\u4ea7\u54c1\u5fc5\u987b\u8981\u6709\u4ef7\u683c";var msg_checkPriceRangDataForSubmit_html="\u4ea7\u54c1\u4ef7\u683c\u8bbe\u7f6e\u9519\u8bef";var msg_checkMinPriceRangDataForSubmit_html="\u5356\u5bb6\u9500\u552e\u4ef7\u683c\u5fc5\u987b\u7b26\u5408\u672c\u7c7b\u76ee\u7684\u6700\u4f4e\u4ef7\u683c\u89c4\u5b9a\uff0c\u8bf7\u8fd4\u56de\u4fee\u6539";var msg_msg_checkPriceRangMinDataForSubmit_html="\u8bf7\u8bbe\u7f6e\u22651\u7f8e\u91d1\u7684\u4ea7\u54c1\u4ef7\u683c\uff0c\u5982\u679c\u9500\u552e\u5355\u4ef7\uff1c1\u7f8e\u91d1\u7684\u4ea7\u54c1\u8bf7\u6309\u5305\u8fdb\u884c\u9500\u552e\u3002";var msg_uncheckSaleAttr_html1="\u8bf7\u5148\u9009\u62e9\u4ea7\u54c1\u7c7b\u76ee\u540e\uff0c\u518d\u586b\u5199\u4ef7\u683c";var msg_uncheckSaleAttr_html2="\u8bf7\u5148\u9009\u62e9\u4ea7\u54c1\u9500\u552e\u5c5e\u6027\u540e\uff0c\u518d\u586b\u5199\u4ef7\u683c";var msg_getInitSelfAddAttrUI_html="\u81ea\u5b9a\u4e49\u5c5e\u6027\uff1a";var msg_getSelfAddAttrUI_html1="\u6dfb\u52a0\u66f4\u591a";var msg_getSelfAddAttrUI_html2="\u5220\u9664";var msg_appendSelfAddAttr_alert1="\u6700\u591a\u80fd\u6dfb\u52a0";var msg_appendSelfAddAttr_alert2="\u4e2a\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002";var msg_validSelfAddAttr_html1="\u8bf7\u8f93\u5165\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u503c\u3002";var msg_validSelfAddAttr_html2="\u8bf7\u8f93\u5165\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u540d\u79f0\u3002";var msg_validSelfAddAttr_html3="\u81EA\u5B9A\u4E49\u5C5E\u6027\u7684\u540D\u79F0\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7";var msg_validSelfAddAttr_html4="\u81EA\u5B9A\u4E49\u5C5E\u6027\u7684\u503C\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7";var msg_validSelfAddAttr_html5="\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u540d\u79f0\u4e0d\u80fd\u5305\u542b\u4e2d\u6587";var msg_validSelfAddAttr_html6="\u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u503c\u4e0d\u80fd\u5305\u542b\u4e2d\u6587";var msg_validSelfAddAttr_html7="\u81EA\u5B9A\u4E49\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u8F93\u5165HTML";var msg_validSelfAddAttr_html8="\u81EA\u5B9A\u4E49\u5C5E\u6027\u503C\u79F0\u4E0D\u80FD\u8F93\u5165HTML";var msg_validSelfAddAttr_html9="\u81ea\u5b9a\u4e49\u5c5e\u6027\u540d\u91cd\u590d";var msg_validSelfAddAttr_html10="brand\u5c5e\u6027\u4e3a\u7cfb\u7edf\u5c5e\u6027\uff0c\u8bf7\u5728\u7cfb\u7edfbrand\u5c5e\u6027\u4e2d\u9009\u53d6\u6b63\u786e\u7684\u5c5e\u6027\u503c";var msg_getSingleChooseUIByAttributes_select="\u8bf7\u9009\u62e9";var msg_getAttrDefineUIByAttr_html1="\u81ea\u5b9a\u4e49\u5c5e\u6027\u56fe\u7247\uff1a\u65e0\u56fe\u7247\u53ef\u4e0d\u6dfb\u52a0";var msg_getAttrDefineUIByAttr_html2="\u53ef\u4ee5\u9002\u7528\u7684\u6587\u4ef6\u683c\u5f0f\u6709\uff1ajpg,\u56fe\u7247\u6587\u4ef6\u8bf7\u5c0f\u4e8e200k\u3002";var msg_getMultiChooseUIByAttributes_html="\u5168\u9009";var msg_getSelfDefineUIByAttrVal_html="\u6d4f\u89c8";var msg_validateOnSelect_html1="\u60a8\u9009\u53d6\u7684\u5185\u5bb9\u4e0d\u80fd\u5927\u4e8e200K";var msg_validateOnSelect_html2="\u60a8\u9009\u53d6\u7684\u5185\u5bb9\u683c\u5f0f\u4e0d\u6b63\u786e";var msg_saveBrandAppeal_html="\u4e0a\u4f20\u6210\u529f";var msg_getProductAttrListForSubmit_alert="\u8bf7\u9009\u62e9\u7c7b\u76ee";var msg_vaildProductAttrMultiChoose_html1="\u8BF7\u9009\u62E9";var msg_vaildProductAttrMultiChoose_html2="\u5C5E\u6027\u503C\u3002";var msg_vaildProductAttrMultiChoose_html3="\u8bf7\u586b\u5199";var msg_vaildProductAttrMultiChoose_html4="\u4e0d\u80fd\u8d85\u8fc7";var msg_vaildProductAttrMultiChoose_html5="\u4e2a\u5b57\u7b26\u3002";var msg_vaildProductAttrMultiChoose_html6="Other\u4e0d\u80fd\u5305\u542b\u4e2d\u6587\u3002";var msg_vaildProductAttrMultiChoose_html7="\u81ea\u5b9a\u4e49\u5c5e\u6027\u540d\u79f0\u3002";var msg_vaildProductAttrMultiChoose_html8="\u81ea\u5b9a\u4e49\u5c5e\u6027\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7";var msg_vaildProductAttrMultiChoose_html9="Other\u5c5e\u6027\u503c\u4e0d\u8981\u4f7f\u7528HTML";var msg_vaildProductAttrMultiChoose_html10="\u81EA\u5B9A\u4E49\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u8F93\u5165HTML";var msg_attribute_illegal="\u5c5e\u6027\u8fdd\u89c4";var msg_brandui_showuploadbrand="\u82e5\u54c1\u724c\u5217\u8868\u4e2d\u65e0\u60a8\u6240\u9700\u54c1\u724c\uff0c\u8bf7\u5148\u4e0a\u4f20\u65b0\u54c1\u724c\uff0c\u5f85\u54c1\u724c\u5ba1\u6838\u901a\u8fc7\u540e\uff0c\u518d\u63d0\u4ea4\u76f8\u5e94\u7684\u4ea7\u54c1\u3002";var msg_vaildProductAttrMultiChoose_html11="\u8BF7\u4E0A\u4F20Other\u5C5E\u6027\u503C\u7684\u56FE\u7247\u3002";var msg_notusehtml_html="\u5c5e\u6027\u503c\u4e0d\u8981\u4f7f\u7528HTML";var msg_vaildProductAttrForString_html="\u4e2d\u4e0d\u80fd\u5305\u542b\u6709\u4e2d\u6587";var msg_vaildProductAttrForNumber_html="\u683c\u5f0f\u4e0d\u6b63\u786e\u3002";var msg_vaildProductAttrForBrand_alert="\u975e\u54c1\u724c\u5c5e\u6027";var msg_createattrui_html="\u5C5E\u6027\u503C\u3002";var msg_setCustomShip_html1="\u4ef6\u4ee5\u5185\u8fd0\u8d39$";var msg_setCustomShip_html2=",\u6bcf\u8d85\u8fc7";var msg_setCustomShip_html3="\u4ef6\u589e\u52a0$";var msg_setCustomShip_html4=", \u4e16\u754c\u5404\u5730;";var msg_setFreeShip_html="\u8fd0\u9001\u5230\u4e16\u754c\u5404\u5730";var msg_setFreeShip_alert="\u8bf7\u586b\u5199\u8239\u671f";var msg_saveShipmodel_html="\u63d0\u793a\u4fe1\u606f";var msg_checkShipData_html1="\u81f3\u5c11\u8981\u9009\u62e9\u4e00\u5bb6\u7269\u6d41\u516c\u53f8";var msg_checkShipData_html2="\u7269\u6d41\u65b9\u5f0f\u8bbe\u7f6e\u9519\u8bef";var msg_checkShipData_html3="\u8bf7\u9009\u62e9DHgate\u7269\u6d41\u5408\u4f5c\u5546";var msg_getProductImageDataForSubmit_html="\u4ea7\u54c1\u81f3\u5c11\u8981\u6709\u4e00\u5f20\u9996\u56fe ";var msg_getProductImageDataForSubmit_message="\u4ea7\u54c1\u56fe\u7247\u6570\u636e\u6821\u9a8c\u9519\u8bef";var msg_setImgData_html1="\u60a8\u603b\u5171\u53ef\u4ee5\u6dfb\u52a0";var msg_setImgData_html2="\u5f20\u4ea7\u54c1\u56fe\u7247  \u6587\u4ef6\u683c\u5f0f\u4e3a\uff1ajpg\uff0c \u56fe\u7247\u6587\u4ef6\u8bf7\u5c0f\u4e8e";var msg_setImgData_html3="K\u3002";var msg_createImgUI_html="\u5220\u9664";var mes_changeImg_title="\u66F4\u6539\u4EA7\u54C1\u56FE\u7247";var mes_changeImg_html="\u4ECE\u76F8\u518C\u4E2D\u9009\u53D6";var mes_inp_adddimg_local="\u4ECE\u672C\u5730\u4E0A\u4F20";var mes_addProductImg_title="\u6DFB\u52A0\u4EA7\u54C1\u56FE\u7247";var msg_addProductImg_html="\u4ece\u76f8\u518c\u4e2d\u6dfb\u52a0";var mes_showAlbumImgList_error="\u9519\u8BEF\u63D0\u793A";var mes_showAlbumImgList_message="\u56FE\u7247\u53C2\u6570\u9519\u8BEF\uFF0C\u8BF7\u4E0E\u6566\u714C\u5BA2\u670D\u8054\u7CFB\u3002";var mes_selectedImg_alert1="\u60A8\u9009\u4E2D\u7684\u76F8\u518C\u56FE\u7247\u5DF2\u7ECF\u662F\u4EA7\u54C1\u56FE\u7247\uFF0C\u8BF7\u9009\u62E9\u5176\u4ED6\u56FE\u7247";var mes_selectedImg_alert2="\u60A8\u9009\u4E2D\u8981\u6DFB\u52A0\u7684\u4EA7\u54C1\u56FE\u7247\u5DF2\u7ECF\u8FBE\u52308\u5F20\uFF0C\u4E0D\u80FD\u518D\u9009";var mes_modifyImg_confirm="\u60A8\u786E\u5B9A\u7528\u9009\u4E2D\u7684\u56FE\u7247\u66FF\u6362\u4EA7\u54C1\u539F\u6709\u56FE\u7247\u4E48\uFF1F";var mes_error_msg="\u6570\u636E\u6821\u9A8C\u9519\u8BEF";var mes_addImg_alert0="\u6709";var mes_addImg_alert1="\u4E2A\u56FE\u7247\u4ECE\u76F8\u518C\u4E2D\u9009\u4E3A\u4EA7\u54C1\u56FE\u7247\u3002";var mes_addImg_html1="\u8FD8\u53EF\u4EE5\u6DFB\u52A0";var mes_addImg_html2="\u4E2A\u4EA7\u54C1\u56FE\u7247\u3002";var mes_saveUploadInfo_msg1="\u60A8\u4E0A\u4F20\u7684\u56FE\u7247\u5DF2\u7ECF\u662F\u4EA7\u54C1\u56FE\u7247\uFF0C\u4E0D\u80FD\u91CD\u590D\u6DFB\u52A0";var mes_onSave_alert1="\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u5305\u542B\u5355\u5F15\u53F7";var msg_onSave_html1="\u4ea7\u54c1\u7ec4\u6dfb\u52a0\u5b8c\u6210";var mes_onSave_alert2="\u4EA7\u54C1\u7EC4\u6570\u91CF\u5DF2\u7ECF\u8FBE\u5230\u4E8620\u4E2A,\u65E0\u6CD5\u6DFB\u52A0\u3002";var mes_close_confirm="\u4F60\u786E\u8BA4\u8981\u79BB\u5F00\u6B64\u9875\u9762\u5417\uFF1F\u5982\u679C\u70B9\u201C\u786E\u5B9A\u201D\u79BB\u5F00\u8BE5\u9875\uFF0C\u5219\u60A8\u521A\u624D\u8F93\u5165\u7684\u4FE1\u606F\u90FD\u5C06\u4E22\u5931\u3002";var msg_submitDataError_alert="\u4ea7\u54c1\u6570\u636e\u9519\u8bef\u66f4\u6b63\u540e\u518d\u4fdd\u5b58";var msg_getProductBaseDataForSubmit_html1="\u8bf7\u586b\u5199\u5b8c\u6210\u4ef7\u683c\u4fe1\u606f";var msg_getProductBaseDataForSubmit_html2="\u4ef7\u683c\u4fe1\u606f\u586b\u5199\u9519\u8bef";var msg_getProductBaseDataForSubmit_html3="\u8bf7\u586b\u5199\u5b8c\u5168\u8054\u7cfb\u4fe1\u606f\uff0c\u4fbf\u4e8e\u4ee3\u9500\u5356\u5bb6\u8054\u7cfb\u60a8";var msg_getProductDescForSubmit_errorinfo1="\u63cf\u8ff0\u5185\u5bb9\u8fc7\u591a\uff0c\u8bf7\u5220\u9664\u90e8\u5206\u6570\u636e\u3002";var msg_getProductDescForSubmit_errorinfo2="\u53EA\u80FD\u5305\u542B\u82F1\u6587\u548C\u6570\u5B57";var msg_getProductDescForSubmit_errorinfo3="\u8BE6\u7EC6\u63CF\u8FF0\u91CC\u4E0D\u80FD\u5305\u542B\u672C\u5730\u6587\u4EF6\u94FE\u63A5";var msg_ajaxGetBrandsList_alert="\u8BF7\u9009\u62E9\u53D1\u5E03\u7C7B\u76EE";var msg_createbBrandsQueryUI_wupinpai="\u65E0\u54C1\u724C";var msg_createPageCode_html1="\u9875\u7801";var msg_createPageCode_html2="\u4e0a\u4e00\u9875";var msg_createPageCode_html3="\u4e0b\u4e00\u9875";var msg_ajaxSaveSuppBrand_title="\u4e0a\u4f20\u6210\u529f";var msg_ajaxSaveSuppBrand_message="\u4e0a\u4f20\u6210\u529f\uff0c\u5f85\u5ba1\u6279\u901a\u8fc7\u540e\u53ef\u4ee5\u4f7f\u7528";var msg_ajaxSaveSuppBrand_html1="\u54c1\u724c\u540d\u79f0\u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d";var msg_ajaxSaveSuppBrand_html2="LOGO\u56fe\u7247\u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d";var msg_uploadBrandCallBack_html="\u4e0a\u4f20\u6210\u529f";var msg_product_inputerrorproductgroupName="\u8bf7\u8f93\u5165\u4ea7\u54c1\u7ec4\u540d\u79f0\u3002";var msg_product_inputproductgroupnametoolong="\u4ea7\u54c1\u7ec4\u540d\u79f0\u8f93\u5165\u5185\u5bb9\u8fc7\u957f\u3002";var msg_product_inputerrorproductgroupNameQquote="\u4ea7\u54c1\u540d\u79f0\u4e0d\u80fd\u5305\u542b\u5355\u5f15\u53f7\u3002";var msg_product_inputproductgroupcontexttoolong="\u4ea7\u54c1\u7ec4\u4ecb\u7ecd\u8f93\u5165\u5185\u5bb9\u8fc7\u957f\u3002";var otherAttributeName="\u81EA\u5B9A\u4E49";
var isShowError=true;function reselcatelog(){var par={"isIE":isIE()};var resel_options={success:toSelecatelog,error:toSeleError,url:'/syi/ajaxReselcatelog.do?isblank=true',type:'post',dataType:'text',data:par,contentType:"application/x-www-form-urlencoded; charset=utf-8",timeout:10000};isShowError=false;try{G_EVENT.trigger('getSyiAttrs');var proSpecList=getProductPriceDataForSubmit();if(proSpecList!=null){try{var jsonProSpec=JSON.stringify(proSpecList);$("#prospeclistid").val(jsonProSpec);}catch(err){}}
var imgList=getProductImageDataForSubmit();if(imgList!=null){try{var jsonAttr=JSON.stringify(imgList);$("#imglistid").val(jsonAttr);}catch(err){}}}catch(err){isShowError=true;}
isShowError=true;$.pub('sync.edite');$("#syi_form").ajaxSubmit(resel_options);return false;}
function toSelecatelog(responseText){try{if(typeof responseText=="string"){responseText=$.parseJSON(responseText);}
var requestid=responseText['requestid'];var catePubId=$("#inp_catepubid").val();var url="http://seller.dhgate.com/syi/category.do?catePubId="+catePubId+"&requestid="+requestid;window.location.href=url;}catch(err){console.log("返回类目error ："+err);var url="http://seller.dhgate.com/syi/category.do";window.location.href=url;}}
function toSeleError(data,status){var resText=data.responseText;try{var ob=JSON.parse(resText);toSelecatelog(ob);}catch(err){console.log("err :"+err);}
console.log("选择类目error ："+status);;}
function clickagreee(){if($("#dhgateagree").attr("checked")){resetSubmitButton();}else{disableSubmitButton();}}
function showOtherKeywords(){var keyword2=$("#keyword2");var keyword3=$("#keyword3");if(keyword2.is(":hidden")){keyword2.show();}else{keyword3.show();$("#keywordbutton").hide();}}
function initLayoutTip(){$.each(_dh_Layout_Tip,function(){var title=this.title;var msg=this.msg;var showid=this.id;$("#"+showid).bind("click",function(event){showLayoutTip(title,msg,showid);});});}
function showLayoutTipForgoto(id){$.each(_dh_Layout_Tip,function(){if(id==this.id){var title=this.title;var msg=this.msg;showLayoutTip(title,msg,id);}});}
var _dh_Layout_Tip=[{id:"productnameTip",title:"帮助信息",msg:["<strong>产品标题</strong>","产品标题是匹配关键词搜索、影响产品曝光率的关键，最多可以填写140个字符，可以包括产品基本功能、特点、性能等。","例如：Brand New Men's long sleeve shirt 100% cotton five colors 10pcs/lot drop shipping(风格+颜色+款式+配饰+布料+促销信息+打包方式+是否支持代发货等)","<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&amp;artid=B0565B802FE5676DE04010AC0B642EEE' target='_blank'>查看产品标题设置技巧</a>"]},{id:"keywordTip",title:"帮助信息",msg:["<strong>产品关键词</strong>","建议您选择能体现产品，带定语的核心词进行填写，准确填写产品英文关键字，能便于敦煌网在站内相关产品或内容中推广您的产品，并且利于搜索引擎通过该关键词引流到您的产品，从而提高产品曝光量，增加销售。","比如某个产品是“New White Strapless Formal Prom Wedding Dress Ball Gown”，则关键词可以填写为Prom Wedding Dress，White Wedding Dress，Formal Prom Wedding Dress，Strapless Ball Gown，White Ball Gown，White Strapless Ball Gown等等，而不是只填写Wedding Dress或Ball Gown"]},{id:"productdescTip",title:"帮助信息",msg:["<strong>产品简短描述</strong>","产品标题中没有包含的相关产品特性可以补充到产品简短描述中，最多可以填写500个字符，可以包括产品的颜色、款式、配件附件、销售模式等，切忌重复标题及堆砌关键词。","例如：<br />Color: red, yellow, green （产品颜色）<br />Size: M, L, XL / 4, 5, 6, 7 （产品尺码）<br />Sales model: mix order （支持混批）<br />Material: 100% cotton （产品材质）<br />Quantity: 10 items per lot （打包销售）"]},{id:"featureshtmlTip",title:"帮助信息",msg:["<strong>产品详细描述</strong>","产品详细描述建议包括如下内容：<ul class='popli'><li>产品实物图片：包括整体图片、细节图及使用过程图等；产品的特点、优势等；</li><li>产品的详细使用说明；</li><li>产品的包装信息、是否有配件等；</li><li>店铺的信誉情况，获得的好评等;</li><li>商户的服务承诺：建议您对退货、换货、退款及售后服务进行说明，您的服务范围和质量，将直接影响到您的订单成单量。</li></ul>","<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=7916CE5C959D3D2DE0400A0A280A73E7' target='_blank'>查看如何撰写出色的产品描述</a>","新版编辑器：<br />您可以点击<span class='help_fullscreen'></span>，进入全屏编辑模式，更加便捷有效的编辑产品信息，获得更好体验。","<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=CE728D12714C3DB7E04010AC0C6410B8' target='_blank'>新版编辑器有哪些更多的功能？</a>"]},{id:"product_cattr_container",title:"帮助信息",msg:["<strong>产品属性</strong>","基本属性：<br />产品属性是买家下单前决策的最重要因素之一，买家在搜索页可以通过产品属性的筛选，看到您的商品。请认真填写准确和完善的产品属性，从而获得更多曝光机会。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=CCF01F7E5DDD4C1EE04010AC0C6433C1' target='_blank'>了解设置产品属性的重要性</a>","自定义属性：<br />当平台推荐的属性无法满足您对产品的描述时，可以添加自定义属性，使得买家能够更加详细的了解产品，并最终成单。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=A802D0782E0C9D1FE04010AC0B642ED7' target='_blank'>查看如何设置产品自定义属性</a>"]},{id:"vadiourlTip",title:"帮助信息",msg:["<strong>产品视频</strong>","为了更好的展示您的产品，提升产品吸引力，平台特别为工厂供货商提供了产品音频、视频展示功能。"]},{id:"shippingmodelidTip",title:"帮助信息",msg:["<strong>设置运费</strong>","如果您是第一次上传产品，您可以使用敦煌网为您提供的“新手运费模板”，您也可以到“<a href='http://seller.dhgate.com/frttemplate/pageload.do?act=pageload&dhpath=10001,0205' target='_blank'>运费模板管理</a>”中添加一个新模板。“新手运费模板”提供了适用国家多、运费价格低廉的物流方式，您也可以根据需要<a href='http://seller.dhgate.com/frttemplate/pageload.do?act=pageload&dhpath=10001,0205' target='_blank'>修改为免运费</a>（买家无需额外缴纳运费）。<br/><br/>运输方式的折扣可以在“运费模板管理”中设置。<br/><br/><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0408&artid=B0BC04BB9AB8B38DE04010AC0B647FD5' target='_blank'>查看运费模板设置技巧</a>。<br/><br/>在这里您可以学习如何设置<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0405&artid=80DF62FD531B6A36E0400A0A280A27A0' target='_blank'>标准运费</a>，<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0406&artid=852FD688C0453C6CE0400A0AD20A310E' target='_blank'>自定义运费</a>和<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0404&artid=80DEDFEB58011B37E0400A0A280A77BC' target='_blank'>免运费</a>。"]},{id:"shippingmodelidTip_2",title:"帮助信息",msg:["<strong>设置运费</strong>","如果您是第一次上传产品，需要到“<a href='http://seller.dhgate.com/frttemplate/pageload.do?act=pageload&dhpath=10001,0205' target='_blank'>运费模板管理</a>”中添加一个新模板，具体的运费数据和折扣，需要在“运费模板管理”中针对某个运费模板来进行设置。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0408&artid=B0BC04BB9AB8B38DE04010AC0B647FD5' target='_blank'>查看运费模板设置技巧</a>。","如果您已设置好运费模板，可以直接在下拉选项中选择。","在这里您可以学习如何设置<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0405&artid=80DF62FD531B6A36E0400A0A280A27A0' target='_blank'>标准运费</a>，<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0406&artid=852FD688C0453C6CE0400A0AD20A310E' target='_blank'>自定义运费</a>和<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0404&artid=80DEDFEB58011B37E0400A0A280A77BC' target='_blank'>免运费</a>。"]},{id:"shippingmodelidTip_1",title:"帮助信息",msg:["<strong>设置运费</strong>","如果您是第一次上传产品，您可以使用敦煌网为您提供的“新手运费模板”，您也可以到“<a href='http://seller.dhgate.com/frttemplate/pageload.do?act=pageload&dhpath=10001,0205' target='_blank'>运费模板管理</a>”中添加一个新模板。“新手运费模板”提供了适用国家多、运费价格低廉的物流方式，您也可以根据需要<a href='http://seller.dhgate.com/frttemplate/pageload.do?act=pageload&dhpath=10001,0205' target='_blank'>修改为免运费</a>（买家无需额外缴纳运费）。<br/><br/>运输方式的折扣可以在“运费模板管理”中设置。<br/><br/><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0408&artid=B0BC04BB9AB8B38DE04010AC0B647FD5' target='_blank'>查看运费模板设置技巧</a>。<br/><br/>在这里您可以学习如何设置<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0405&artid=80DF62FD531B6A36E0400A0A280A27A0' target='_blank'>标准运费</a>，<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0406&artid=852FD688C0453C6CE0400A0AD20A310E' target='_blank'>自定义运费</a>和<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0404&artid=80DEDFEB58011B37E0400A0A280A77BC' target='_blank'>免运费</a>。"]},{id:"progroupTip",title:"帮助信息",msg:["<strong>产品组</strong>","您可以使用产品组对产品进行分类管理，最多可以添加60个产品组。","现在就去<a href='http://seller.dhgate.com/mydhgate/product/manageproductgroup.do?act=addLoad&pageflg=0' target='_blank' >添加产品组</a>。"]},{id:"vailddayTip",title:"帮助信息",msg:["<strong>产品有效期</strong>","产品有效期指的是从发布产品信息成功那天开始，到产品信息在平台上停止展示那天为止的时间段。","注意：<br />产品过了有效期，若没有及时更新，产品会自动下架，为了保障产品的正常销售，建议您及时更新产品有效期。"]},{id:"productvipTip",title:"帮助信息",msg:["<strong>VIP专供产品</strong>","设置为“VIP专供产品”后的产品在买家页面只展示给VIP买家，因此您不用担心新品被其他的卖家抄袭。另外平台定期会对VIP买家做大量的推广和促销，将产品设置为“VIP专供产品”将更加具有竞争力。"]},{id:"specialzoneTip",title:"帮助信息",msg:["<strong>店铺会员专区产品</strong>","敦煌网为部分增值服务会员（包括钻石礼包、白金礼包、兴旺通和商务通），开通了店铺会员专区功能，只有店铺的会员买家才能看到该专区中的产品。在店铺会员专区外，此类产品是不可见的。","您可以将自己的优质产品设置为“店铺会员专区产品”，仅供您店铺的会员进行访问和购买。","您可以在店铺中的“<a href='http://seller.dhgate.com/mydhgate/store/create.do?act=pageload&status=member&dhpath=10001,08,0802' target='_blank'>会员管理</a>”中对买家提交的会员申请进行审批，并管理当前的会员买家。"]},{id:"div_price_covering",title:"帮助信息",msg:["<strong>产品价格</strong>","规格名称：<br />如果产品有不同规格，如U盘产品有8G, 16G等规格，可以在此处填写不同规格的名称，并为它们设置不同的产品价格。如果产品不需要区分规格，此项可以不填写。","购买数量区间：<br />指的是在此价格上产品可购买的最低数量和最高数量，由卖家自定义。","卖家价格：<br />指的是产品实际的销售价格，由卖家填写。此数目为卖家最后收到货款的数目。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0203&artid=80E07FD8623C2F3AE0400A0A2B0A522E' target='_blank'>查看如何设置产品价格</a>","敦煌网销售价格：<br />指的是买家所看到的价格，是卖家价格+平台佣金。"]},{id:"div_pprice_container",title:"帮助信息",msg:["<strong>产品价格</strong>","规格名称：<br />如果产品有不同规格，如U盘产品有8G, 16G等规格，可以在此处填写不同规格的名称，并为它们设置不同的产品价格。如果产品不需要区分规格，此项可以不填写。","购买数量区间：<br />指的是在此价格上产品可购买的最低数量和最高数量，由卖家自定义。","卖家价格：<br />指的是产品实际的销售价格，由卖家填写。此数目为卖家最后收到货款的数目。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0203&artid=80E07FD8623C2F3AE0400A0A2B0A522E' target='_blank'>查看如何设置产品价格</a>","敦煌网销售价格：<br />指的是买家所看到的价格，是卖家价格+平台佣金。"]},{id:"div_pprice_container_1",title:"帮助信息",msg:["<strong>产品价格</strong>","规格名称：<br />如果产品有不同规格，如U盘产品有8G, 16G等规格，可以在此处填写不同规格的名称，并为它们设置不同的产品价格。如果产品不需要区分规格，此项可以不填写。","购买数量区间：<br />指的是在此价格上产品可购买的最低数量和最高数量，由卖家自定义。","卖家价格：<br />指的是产品实际的销售价格，由卖家填写。此数目为卖家最后收到货款的数目。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0203&artid=80E07FD8623C2F3AE0400A0A2B0A522E' target='_blank'>查看如何设置产品价格</a>","敦煌网销售价格：<br />指的是买家所看到的价格，是卖家价格+平台佣金。"]},{id:"packTip_1",title:"帮助信息",msg:["<strong>产品包装信息</strong>","销售计量单位：<br />您所销售产品最小的计量单位，也就是单个产品的量词。例如，您销售的是袜子，则选择双（pair）；您销售的是手机，则选择件（piece）。"]},{id:"packTip_2",title:"帮助信息",msg:["<strong>产品包装信息</strong>","销售方式：<br />您可以根据实际所卖产品的重量、体积、货值来选择打包方式。<br />比如，手机、平板电脑这种货值比较大，或者家具这种体积和重量都比较大的产品，较适合单件卖；袜子这种重量、体积和货值都较小的产品，较适合打包出售。"]},{id:"packTip_3",title:"帮助信息",msg:["<strong>产品包装信息</strong>","产品包装后重量和尺寸：<br />您需要准确填写按照产品销售方式（1件或者1包）进行物流包装后的重量和尺寸，避免造成您填写过低的重量和尺寸，导致运费受到损失；或者您填写了过高的重量和尺寸，导致买家看到的运费价格过高，影响对您产品的购买下单。您也可以查看具体的快递运费是如何通过包装后的重量和尺寸计算的。"]},{id:"packTip_4",title:"帮助信息",msg:["<strong>产品包装信息</strong>","产品计重阶梯设定：<br />考虑到部分产品的包装重量不是完全根据产品的数量等比增加的，所以平台对于产品包装重量比较大、体积比较小的产品，特别提供了自定义重量计算功能，当您勾选后，系统将忽略计算您产品的体积重量。","对于体积较大、重量较小的产品，请您谨慎使用该功能。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0401&artid=AEF02D27855321F1E04010AC0B64209F' target='_blank'>查看具体计算实例</a>。"]},{id:"packTip_5",title:"帮助信息",msg:["<strong>产品包装信息</strong>","产品包装后重量和尺寸：<br />您需要准确填写按照产品销售方式（1件或者1包）进行物流包装后的重量和尺寸，避免造成您填写过低的重量和尺寸，导致运费受到损失；或者您填写了过高的重量和尺寸，导致买家看到的运费价格过高，影响对您产品的购买下单。您也可以查看具体的快递运费是如何通过包装后的重量和尺寸计算的。"]},{id:"stockingInformationStatus",title:"帮助信息",msg:["<strong>备货状态</strong>","有备货：<br />有备货指的产品有现货，可立即发货。如果选择了该状态，需要填写备货的所在地，针对该产品的属性、规格组合分别设置对应的产品数量，并且该产品的备货期被限制在指定的天数内，需在该天数内发货此产品。","买家会看到该产品的数量与备货期，有针对性的进行下单。该状态的产品具有竞争优势。","待备货：<br />待备货指的是产品暂时没有现货，需要根据买家的下单进行采购后再进行发货。如果选择了该状态，备货期填写需小于等于60天，不需要设置产品的数量。","备货期:<br />备货期为卖家的发货期限，指的是在一定的时间内需发货。","备货状态为“有备货”的产品的备货期根据类目的不同被控制在一定的时间内，即卖家填写的备货期需小于等于该时间控制；","备货状态为“待备货”的产品的备货期无时间控制，卖家可根据自己的实际发货情况进行填写相应的备货期。"]},{id:"inventoryLocationDiv",title:"帮助信息",msg:["<strong>备货所在地</strong>","备货所在地针对的是备货状态为“有备货”的产品所应填写的现货所在地。"]},{id:"inventoryQtyHipDiv",title:"帮助信息",msg:["<strong>备货数量</strong>","备货数量针对的是备货状态为“有备货”的产品所应填写的产品数量。<br />如果产品有购买属性、销售属性、规格，则需按照其组合填写对应的产品数量；<br />如果产品都没有购买属性、销售属性、规格，则需填写其产品总数量。"]},{id:"tip-saleUnit",title:"帮助信息",msg:["<strong>销售计量单位</strong>","销售计量单位是神马"]},{id:"tip-saleType",title:"帮助信息",msg:["<strong>销售方式</strong>","销售方式是神马"]}];function setSyiVersionURL(){var timer=null;var finished=false;timer=setInterval(function(){try{if(finished){clearInterval(timer);}
var headiframe=document.getElementById('headiframe');var vro=jQuery(headiframe).contents().find("#viewReturn");var csvo=jQuery(headiframe).contents().find("#changeSyiVsersion");if(csvo!=undefined&&csvo!='undefined'&&csvo!=''&&csvo.length>0){if(jQuery('#oldSyiVersionURL').val()==""){vro.hide();}else{csvo.attr("syiurl",jQuery('#oldSyiVersionURL').val());vro.show();}
finished=true;}}catch(e){}},50);};
function changeProductUnit(){var oSele=document.getElementById("measureid");if(oSele==null||oSele.value==""){return;}
var iSeleIndex=oSele.selectedIndex;if(iSeleIndex>-1){var oOptions=oSele.options;var oItem=oOptions[iSeleIndex];var sText=oItem.text;var iPos=sText.indexOf("(");sText=sText.substr(0,iPos);$("#measurename").val(sText);var sValue=oItem.value;var oUnitList=document.getElementsByName("sortbyunit");var nLen=oUnitList.length;for(var i=0;i<nLen;i++){oUnitList[i].innerHTML=sText;}
var oRadio=document.getElementById("sortbyradio2");if(oRadio.checked){packselect(oRadio);}else{packselect(document.getElementById("sortbyradio1"));}
oSele.value=sValue;}}
function packselect(oPInput,bChange){var oSpan_PQ=document.getElementById("span_packquantity");var strSleUnit=document.getElementsByName("sortbyunit")[0].innerHTML;var iPQ=$("#packquantity").val();var bPack=(oPInput.value=="1")?true:false;if(bPack){oSpan_PQ.style.display="none";sUnit=strSleUnit;iPQ=1;}else{oSpan_PQ.style.display="inline";if(!bChange&&(iPQ==""||isNaN(iPQ)||parseInt(iPQ)<2)){iPQ=2;}
sUnit=msg_packselect_unit;}
$("#packquantity").val(iPQ);var oUnitList2=document.getElementsByName("sortbyunit2");var nLen=oUnitList2.length;for(var i=0;i<nLen;i++){oUnitList2[i].innerHTML=sUnit;}
if(iPQ>1)sUnit=iPQ+strSleUnit+"/"+msg_packselect_unit;var oUnitList3=document.getElementsByName("sortbyunit3");var nLen=oUnitList3.length;for(var i=0;i<nLen;i++){oUnitList3[i].innerHTML=sUnit;}}
var g_is_seller_checked=false;function showOnlyWeight(isOnly,isSellerClick){if(isSellerClick){g_is_seller_checked=isOnly;}
if(isOnly){$("#div_onlyweight").show();}else{$("#div_onlyweight").hide();checkProductWeightSize();}}
function hideSizeMsg(obj){var val=obj.value;if(!isFloat(val)){obj.value="";}
obj.style.color="#444";}
function isRedrawTemplateTable(){};
var _dh_selectedTemplate;var _dh_feeMap={};var _dh_ShippingmodelTypes=[];function ShippingmodeVo(){lastProductId=null;shippingmodelid=null;showLastShippingTemplate=null;productid=null;modelname=null;}
var shippingmodeVo;if(typeof window.console=="undefined"||typeof window.console.log=="undefined"){if(!window.console){window.console={log:function(){}};}}
function initDatehipping(){if(null==shippingmodeVo.modelname||''==shippingmodeVo.modelname){$("#shippingmodelname").val('请选择运费设置模板');}}
function initShipping(){if(shippingmodeVo.productid){console.log("编辑产品");$("#shippingmodelname").val("(原始运费设置)");$("#saveTemplateLink").show();initShippingTemplate(shippingmodeVo.productid);}else{console.log("新增模式");if(shippingmodeVo.shippingmodelid){console.log("找到了上次的模板:"+shippingmodeVo.shippingmodelid);var productid=shippingmodeVo.lastProductId;if(productid){console.log("使用上次产品id");$("#shippingmodelname").val(shippingmodeVo.modelname);initShippingTemplate(productid);}
_dh_selectedTemplate={shippingmodelid:shippingmodeVo.shippingmodelid};}else{console.log("没使用模板");if(shippingmodeVo.lastProductId){console.log("找到上次产品运费数据，或类似产品运费数据");initShippingTemplate(shippingmodeVo.lastProductId);if(_dh_ShippingmodelTypes&&_dh_ShippingmodelTypes.length>0){console.log("取到上次产品运费数据，显示(上一次的运费设置)菜单");$("#shippingmodelname").val("(上一次的运费设置)");$("#saveTemplateLink").show();}else{console.log("取不到上次产品运费数据，不显示(上一次的运费设置)菜单");shippingmodeVo.showLastShippingTemplate=false;}}}}}
function initShippingTemplate(productid){var ajaxUrl="/syi/findProductShipping.do";jQuery.ajax({url:ajaxUrl,data:{isblank:true,'shippingTypeDto.productid':productid},async:false,success:function(data){console.log("从服务器取回了产品的运费信息");console.log(data);if(!data||data.length==0){console.log("产品运费数据错误");return;}
console.log("产品的数据结构跟模板不全相同,适配数据");$(data).each(function(){this.shippingmodelOptVOList=this.shippingoptlist;});console.log("适配数据完成");_dh_ShippingmodelTypes=data;redrawTemplateTable();}});}
function onSelectTemplateClick(){console.log("用户点击了选择运费模板");var templatesDiv$=$("#templatesDiv");if(templatesDiv$.is(":visible")){console.log("运费模板待选项处于显示状态");templatesDiv$.hide();$("#selectTemplateDiv").removeClass("select-dropdown");}else{showTemplateSelect(templatesDiv$);$("#selectTemplateDiv").addClass("select-dropdown");}
$("#shippingmodelidInfoTip").hide();}
function saveTempate(){var modelname=$("#templateNameInput").val();if(modelname==""){$("#saveErrorSpan").html("请填写模板名称").show();return;}
var productid=shippingmodeVo.lastProductId;if(!productid){console.log("保存现有产品的运费数据为模板");productid=shippingmodeVo.productid;}else{console.log("保存上次产品的运费数据为模板");}
if(!productid||productid==""){console.log("必须有当前产品id，或上次使用的产品id,放弃保存");return;}
var theURL="/syi/saveProductToTemplate.do";jQuery.ajax({url:theURL,data:{modelname:modelname,productid:productid},async:false,success:function(data){console.log(data);if(data["ok"]){$("#savedTemplateSpan").show();setTimeout("$('#savedTemplateSpan').hide()",3000);jQuery.modal.close();}else{$("#saveErrorSpan").html(data["error"]).show();}}});}
function showTemplateSelect(templatesDiv$){console.log("运费模板待选项处于关闭状态");var theURL="/syi/getMyTemplates.do";jQuery.get(theURL,function(data){console.log("从服务端取回了用户拥有的模板:");console.log(data);var noTemplateDiv$=$("#noTemplateDiv");if(!data||data.length==0){console.log("用户没有任何模板");noTemplateDiv$.show();return;}
buildTemplateSelectUI(data,templatesDiv$);});templatesDiv$.show();}
function buildTemplateSelectUI(data,templatesDiv$){var templatesUL$=$("#templatesUL");templatesUL$.empty();$(data).each(function(){var modelname=this["modelname"];var aTemplate=this;$("<li>"+modelname+"</li>").appendTo(templatesUL$).mouseover(function(){$(this).addClass("hover");}).mouseout(function(){$(this).removeClass("hover");}).click(function(){console.log("用户点击了运费模板："+modelname);console.log("关闭下拉菜单："+templatesDiv$);$("#saveTemplateLink").hide();$("#shippingmodelidErrTip").hide();templatesDiv$.hide();$("#shippingmodelname").val(modelname);_dh_selectedTemplate=aTemplate;createTemplateTable(aTemplate);});});if(shippingmodeVo.showLastShippingTemplate=='true'){$("#shippingmodelname").val("(上一次的运费设置)");$("<li>(上一次的运费设置)</li>").prependTo(templatesUL$).click(function(){console.log("用户点击了(上一次的运费设置)");$("#saveTemplateLink").show();templatesDiv$.hide();initShippingTemplate(shippingmodeVo.lastProductId);_dh_selectedTemplate={};});}
if(shippingmodeVo.productid!=null&&shippingmodeVo.productid.length!==0){$("#shippingmodelname").val("(原始运费设置)");$("<li>(原始运费设置)</li>").prependTo(templatesUL$).click(function(){console.log("用户点击了(原始运费设置)");$("#saveTemplateLink").show();templatesDiv$.hide();initShippingTemplate(shippingmodeVo.productid);_dh_selectedTemplate={};});}}
function createTemplateTable(tdSupplierShippingmodelVO){console.log("创建运费表格UI");console.log(tdSupplierShippingmodelVO);var strUrl="/syi/ajaxTemplate.do";jQuery.get(strUrl,{isblank:true,id:tdSupplierShippingmodelVO.shippingmodelid},function(data){console.log("从服务器取回了模板的详细信息");console.log(data);if(!data||!data.shippingmodelTypeList||data.shippingmodelTypeList.length==0){console.log("模板数据错误");return;}
_dh_ShippingmodelTypes=data.shippingmodelTypeList;redrawTemplateTable();});}
function redrawTemplateTable(){var templateTableDiv$=$("#templateTableDiv");console.log("清除上次的选择");templateTableDiv$.find(".syi-shippingset-list").remove();caculateFee();$(_dh_ShippingmodelTypes).each(function(index){createTemplateRow(templateTableDiv$,this,index);});templateTableDiv$.show();}
function createTemplateRow(templateTableDiv$,tdSupplierShippingmodelTypeVO,index){console.log("创建一行运费表格UI");console.log("_dh_feeMap:");console.log(_dh_feeMap);var shippingtypeid=tdSupplierShippingmodelTypeVO.shippingtypeid;if(_dh_feeMap[shippingtypeid]){console.log(shippingtypeid+"，找到了计算出运费");tdSupplierShippingmodelTypeVO.shipcostCalculateParameterVO=_dh_feeMap[shippingtypeid];}else{console.log(shippingtypeid+"，找不到计算出运费，不送达");}
console.log(tdSupplierShippingmodelTypeVO);var rowArray=[];rowArray.push("<div class=\"syi-shippingset-list syi-s-selected\">");rowArray.push("<ul class=\"wid135\">");rowArray.push("<li class=\"wid135\"><strong>"+tdSupplierShippingmodelTypeVO.shippingtypeid+"</strong></li>");rowArray.push("<li class=\"wid135\">"+buildIsmyshippingColumn(tdSupplierShippingmodelTypeVO)+"</li>");rowArray.push("<li class=\"wid495\">");buildTwoColumnUI(rowArray,tdSupplierShippingmodelTypeVO);rowArray.push("</li>");rowArray.push("<li class=\"wid132 vino\">");buildMoneyColumn(index,rowArray,tdSupplierShippingmodelTypeVO);rowArray.push("</li>");rowArray.push("</ul>");rowArray.push("</div>");$(rowArray.join("")).appendTo(templateTableDiv$);}
function buildTwoColumnUI(rowArray,shippingmodelTypeVO){var ismyshipping=shippingmodelTypeVO.ismyshipping;var shippingtypeid=shippingmodelTypeVO.shippingtypeid;if(ismyshipping=="0"||ismyshipping=="2"||ismyshipping=="4"){console.log("创建免费运费列或自定义列或敦煌网仓库发货");var shippingmodelOptVOList=shippingmodelTypeVO.shippingmodelOptVOList;if(shippingmodelOptVOList){for(var optIndex=0;optIndex<shippingmodelOptVOList.length;optIndex++){var opt=shippingmodelOptVOList[optIndex];rowArray.push("<ul class=\"twoline\"");if(opt.countrynamelst!=null&&opt.countrynamelst.length>=50){rowArray.push("onmouseover=\"addHover(this)\" onmouseout=\"removeHover(this)\">");}else{rowArray.push(">");}
rowArray.push("<li class=\"wid343\" onclick=\"showCoutriesTip(this,");rowArray.push("'");rowArray.push(shippingtypeid);rowArray.push("','");rowArray.push(opt.countryidlist);rowArray.push("')\">");rowArray.push(buildCustomCountryDescription(opt,shippingtypeid));rowArray.push("</li>");rowArray.push("<li class=\"wid130\">");rowArray.push(buildCustomFeeDescription(opt,ismyshipping,shippingtypeid));rowArray.push("</li>");rowArray.push("</ul>");}}}else{if(ismyshipping=="1"||ismyshipping=="3"){console.log("创建标准运费列或敦煌合作列");if(ismyshipping=="1"){rowArray.push("<ul class=\"twoline\"  style=\"cursor:default\" ");}else{if(ismyshipping=="3"){rowArray.push("<ul class=\"threeline\"   style=\"cursor:default\" ");}}
if("ePacket"==shippingtypeid){rowArray.push(" onmouseover=\"addHover(this)\" onmouseout=\"removeHover(this)\"><li class=\"wid343\">\u7F8E\u56FD</li><li class=\"wid130\">");}else{rowArray.push(" onmouseover=\"addHover(this)\" onmouseout=\"removeHover(this)\"><li class=\"wid343\">\u4e16\u754c\u5404\u5730</li><li class=\"wid130\">");}
var liContent="";if(ismyshipping=="1"){var mydiscount=shippingmodelTypeVO.mydiscount;if(mydiscount&&10>parseFloat(mydiscount)){liContent='标准运费('+mydiscount+'折)';}else{liContent='标准运费(无折扣)';}
rowArray.push(liContent);}else{var tcShippingtypeDiscountVO=shippingmodelTypeVO.tcShippingtypeDiscountVO;if(tcShippingtypeDiscountVO){liContent="\u4e0e"+tcShippingtypeDiscountVO.name+"\u5408\u4f5c<br>"+tcShippingtypeDiscountVO.description+"\uff0c"+tcShippingtypeDiscountVO.displayDiscount+"\u6298";}
rowArray.push(liContent);}
rowArray.push("</li></ul>");}}}
function buildMoneyColumn(index,rowArray,shippingmodelTypeVO){if(!isPackageFilled()){if(index==0){rowArray.push('<span class="syi-text-center">要使用运费计算器，请先完成:<br><a href="#a_measureid">产品包装信息设置</a></span>');}
return;}
var shipcostCalculateParameterVO=shippingmodelTypeVO.shipcostCalculateParameterVO;if(!shipcostCalculateParameterVO){var countryName=$("#caculateCountry option:selected").text();rowArray.push("不配送至"+countryName);}else{var finalMoney=shipcostCalculateParameterVO.shipcostfinal1;finalMoney=finalMoney.toFixed(2);rowArray.push("<span class=\"syi-money\">"+finalMoney+"</span>");if(shipcostCalculateParameterVO.showPriceTip){rowArray.push('<span class="syi-texted">(运费比价后此处选择标准运费)</span>');}}}
function buildIsmyshippingColumn(tdSupplierShippingmodelTypeVO){console.log("创建运费设置列UI");var ismyshipping=tdSupplierShippingmodelTypeVO.ismyshipping;if(ismyshipping=="0"||ismyshipping=="2"){if(isCustomFee(tdSupplierShippingmodelTypeVO,ismyshipping)){return"自定义运费"}else{return"免运费"}}else if(ismyshipping=="1"){return"标准运费"}else if(ismyshipping=="3"){return"敦煌网合作物流商"}else if(ismyshipping=="4"){return"仓库发货";}
return"";}
function getShippingDataForSubmit(){DhgateConsole.info("获取物流方式数据");var modelName=$("#shippingmodelname").val();if(shippingmodeVo.productid){console.log("修改模式，可以没有运费模板");if(_dh_ShippingmodelTypes&&_dh_ShippingmodelTypes.length>0&&modelName=="(原始运费设置)"){console.log("没动过原始运费设置");return shippingmodeVo;}else{if(_dh_selectedTemplate&&_dh_selectedTemplate.shippingmodelid){console.log("动过原始运费设置");if(modelName!=""&&modelName!="(原始运费设置)"){shippingmodeVo.shippingmodelid=_dh_selectedTemplate.shippingmodelid;return shippingmodeVo;;}}}}else{console.log("新增模式，必须取到运费模板");if(_dh_selectedTemplate&&_dh_selectedTemplate.shippingmodelid){if(modelName!=""&&modelName!="(上一次的运费设置)"){shippingmodeVo.shippingmodelid=_dh_selectedTemplate.shippingmodelid;return shippingmodeVo;}}}
showErrorTip("shippingmodelid","请选择运费模板");return null;}
function getShippingDataForSavedraftbox(){DhgateConsole.info("获取物流方式数据");var modelName=$("#shippingmodelname").val();if(shippingmodeVo.productid){console.log("修改模式，可以没有运费模板");if(_dh_ShippingmodelTypes&&_dh_ShippingmodelTypes.length>0&&modelName=="(原始运费设置)"){console.log("没动过原始运费设置");return shippingmodeVo;}else{if(_dh_selectedTemplate&&_dh_selectedTemplate.shippingmodelid){console.log("动过原始运费设置");if(modelName!=""&&modelName!="(原始运费设置)"){shippingmodeVo.shippingmodelid=_dh_selectedTemplate.shippingmodelid;return shippingmodeVo;;}}}}else{console.log("新增模式，必须取到运费模板");if(_dh_selectedTemplate&&_dh_selectedTemplate.shippingmodelid){if(modelName!=""&&modelName!="(上一次的运费设置)"){shippingmodeVo.shippingmodelid=_dh_selectedTemplate.shippingmodelid;return shippingmodeVo;}}else{return shippingmodeVo;}}
return null;}
function caculateFee(){if(!isPackageFilled()){console.log("包装信息不完整，不计算运费");_dh_feeMap={};return;}
console.log("计算运费");var data={isblank:true};var oLenInp=document.getElementById("sizelen");var paramlen=oLenInp.value;var oWidthInp=document.getElementById("sizewidth");var paramwidth=oWidthInp.value;var oHeightInp=document.getElementById("sizeheight");var paramheight=oHeightInp.value;var oWeightInp=document.getElementById("productweight");var paramgrossweight=oWeightInp.value;var caculateQuantity=$("#caculateQuantity").val();if(caculateQuantity!=""){data.quantity=caculateQuantity;}
var country=$("#caculateCountry").val();if(country!=""){data.country=country;}
if(paramgrossweight==""||isNaN(parseInt(paramgrossweight))){showErrorTip("productweight","产品包装重量输入错误");oWeightInp.focus();return;}else{hideErrorTip("productweight");}
if(paramlen==""||isNaN(parseInt(paramlen))){$("#sizelenTip").show();oLenInp.focus();return;}else{$("#sizelenTip").hide();}
if($("#isonlyweight").attr("checked")){data.baseqt=$("#baseqt").val();data.stepweight=$("#stepweight").val();data.stepqt=$("#stepqt").val();}
if(paramwidth==""||isNaN(parseInt(paramwidth))){$("#sizewidthTip").show();oWidthInp.focus();return;}else{$("#sizewidthTip").hide();}
if(paramlen==""||isNaN(parseInt(paramheight))){$("#sizeheightTip").show();oHeightInp.focus();return;}else{$("#sizeheightTip").hide();}
var theURL="/syi/shippingcalculatenew.do";data.length=paramlen;data.width=paramwidth;data.height=paramheight;data.grossweight=paramgrossweight;data.isquickup=$("#isquickup").val();var micTag=$("#micTag").val();if(micTag==="1"){micTag="MIC";}
data.micTag=micTag;function cleanDataForSubmit(_dh_ShippingmodelTypes){if(!_dh_ShippingmodelTypes||!_dh_ShippingmodelTypes.length){return;}
for(var i=0;i<_dh_ShippingmodelTypes.length;i++){var type=_dh_ShippingmodelTypes[i];type["class"]="com.dhgate.prod.dto.ProductShippingtypeDTO";delete type.shippingplanid;if(type.shippingmodelOptVOList){type.shippingoptlist=type.shippingmodelOptVOList;}
type.shippingoptlist=type.shippingmodelOptVOList;delete type.corprateFee;delete type.standardFee;delete type.shipcostCalculateParameterVO;if(type.tcShippingtypeDiscountVO){type.mydiscount=type.tcShippingtypeDiscountVO.displayDiscount;}
delete type.tcShippingtypeDiscountVO;delete type.productid;delete type.itemcode;delete type.l2supplierid;if(type.shippingmodelOptVOList&&type.shippingmodelOptVOList.length>0){for(var j=0;j<type.shippingmodelOptVOList.length;j++){var opt=type.shippingmodelOptVOList[j];opt["class"]="com.dhgate.prod.dto.ProductShippingoptionDTO";delete opt.shipoptionid;delete opt.shippingplanid;delete opt.shippingtypeid;delete opt.productid;delete opt.itemcode;delete opt.l2supplierid;}}}}
cleanDataForSubmit(_dh_ShippingmodelTypes);data.shippingTypes=JSON.stringify(_dh_ShippingmodelTypes);jQuery.ajax({url:theURL,data:data,async:false,success:function(data){console.log("从服务器算回了运费");_dh_feeMap=data;}});}
function showSaveAsDiv(){$("#saveAsDiv").modal({close:false});}
function openFreightWin(theURL){var oLenInp=document.getElementById("sizelen");var paramlen=oLenInp.value;var oWidthInp=document.getElementById("sizewidth");var paramwidth=oWidthInp.value;var oHeightInp=document.getElementById("sizeheight");var paramheight=oHeightInp.value;var oWeightInp=document.getElementById("productweight");var paramgrossweight=oWeightInp.value;if(paramgrossweight==""||isNaN(parseInt(paramgrossweight)))
{showErrorTip("productweight","产品包装重量输入错误");oWeightInp.focus();return;}else{hideErrorTip("productweight");}
if(paramlen==""||isNaN(parseInt(paramlen)))
{$("#sizelenTip").show();oLenInp.focus();return;}else{$("#sizelenTip").hide();}
if(paramwidth==""||isNaN(parseInt(paramwidth)))
{$("#sizewidthTip").show();oWidthInp.focus();return;}else{$("#sizewidthTip").hide();}
if(paramlen==""||isNaN(parseInt(paramheight)))
{$("#sizeheightTip").show();oHeightInp.focus();return;}else{$("#sizeheightTip").hide();}
theURL+="&shippingSellerDto.length="+paramlen+"&shippingSellerDto.width="+paramwidth+"&shippingSellerDto.height="+paramheight+"&shippingSellerDto.grossWeight="+paramgrossweight;var strFrame="<iframe width='800' height='538' frameborder='0' scrolling='no' allowtransparency='true' src='"+theURL+"'></iframe>";$(strFrame).modal({close:false});}
function closeFreightWin(){var iLen=$('#length')[0].value;var iWidth=$('#width')[0].value;var iHeight=$('#height')[0].value;var iWeight=$('#grossWeight')[0].value;if(iLen==""||iWidth==""||iHeight==""){document.getElementById("sizeTip").style.display="";return;}
if(iWeight==""){document.getElementById("weightTip").style.display="";return;}
var parentWin=window.parent;parentWin.$("#sizelen")[0].value=iLen;parentWin.$("#sizewidth")[0].value=iWidth;parentWin.$("#sizeheight")[0].value=iHeight;parentWin.$("#productweight")[0].value=iWeight;parentWin.$.modal.close();}
function showShippingCalculatorWin(strProductId){var strUrl='/syi/shippingcalculate.do?';if(strProductId!=null&&strProductId!=""){strUrl+='sid='+strProductId;}else{var isquickup=$("#isquickup").val();strUrl+='isquickup='+isquickup;}
var catePubId=$("#catepubid").val();strUrl+='&shippingSellerDto.catePubId='+catePubId;openFreightWin(strUrl);return false;}
function eventship(){$(document).click(function(){if($("#templatesDiv").css("display")=="block"){$("#templatesDiv").css({"display":"none"});$("#selectTemplateDiv").removeClass("select-dropdown");}});$("#selectTemplateDiv").click(function(event){event.stopPropagation();});}
var _dh_selectedTemplate;var _dh_feeMap={};var _dh_ShippingmodelTypes=[];function test2(){alert('1');alert(getShippingDataForSubmit());};
if(typeof window.console=="undefined"||typeof window.console.log=="undefined"){if(!window.console){window.console={log:function(){}};}}
var _dh_tdSupplierShippingmodelVO;if(!_dh_tdSupplierShippingmodelVO){_dh_tdSupplierShippingmodelVO={shippingmodelTypeList:[]};}
function ShippingmodelTypeVO(strTypeId){this["class"]="com.dhgate.common.vo.shipping.TdSupplierShippingmodelTypeVO";this.abroadactivityid=null;this.dhgatediscounttype=null;this.dispatchport=null;this.ismyshipping=null;this.shippingmodelOptVOList=[];this.shippingtypeid=strTypeId;}
function newShippingmodelTypeVO(strTypeId){var shippingmodelTypeVO=new ShippingmodelTypeVO(strTypeId);var nLength=window.top._dh_shippingCompaniesVO.length;for(var i=0;i<nLength;i++){var shippingCompanyItem=window.top._dh_shippingCompaniesVO[i];if(shippingCompanyItem.shippingtypeid==strTypeId){console.log('从快递公司复制数据：'+shippingCompanyItem);if(shippingCompanyItem.issupportdhgate=="1"){shippingmodelTypeVO.ismyshipping="3";shippingmodelTypeVO.shippingmodelOptVOList=null;}else{if(shippingCompanyItem.issupportstandard=="1"){shippingmodelTypeVO.ismyshipping="1";}else{if(shippingCompanyItem.issupportfree=="1"){if(shippingCompanyItem.issupportself=="0"){shippingmodelTypeVO.ismyshipping="0";var optVO=new ShippingmodelOptVO();optVO.supportglobal="1";shippingmodelTypeVO.shippingmodelOptVOList.push(optVO);}}}}
shippingmodelTypeVO.countryCount=shippingCompanyItem.countryCount;}}
return shippingmodelTypeVO;}
function ShippingmodelOptVO(){this["class"]="com.dhgate.common.vo.shipping.TdSupplierShippingmodelOptVO";this.countryidlist="";this.countrynamelst="";this.displaypricestep=0;this.displaystartprice=0;this.endquantity=1;this.quantitystep=1;this.startquantity=1;this.supportglobal="0";}
function newShippingmodelOptVO(){return new ShippingmodelOptVO();}
function iframeAutomaticAdaptation(iframe){if(iframe==null){iframe=$('#page_FrameModal')[0];}
var iframeDocument=iframe.contentWindow.document;iframe.height=getDocHeight(iframeDocument);iframe.width=iframeDocument.documentElement.scrollWidth;$("#div_frame_container").css("width",iframe.width*1+15);function getDocHeight(doc){var docHt=0;if(doc.height){docHt=doc.height;}
else if(doc.body){if(doc.body.scrollHeight)docHt=doc.body.scrollHeight;}
return docHt;}}
function openFrameModal(url,width){var widthStr="'"+width+"'";var frame="<iframe onload='iframeAutomaticAdaptation(this)' width="+widthStr+" frameborder='0' scrolling='no' src='"+url+"'></iframe>";$(frame).modal({close:false});}
function confirmDelTemp(strMId,strMName,isOversea){var returnUrl="/mydhgate/product/transport/template.do?act=delete&shippingmodelid="+strMId;if(isOversea){returnUrl+="&oversea="+isOversea;}
$.dhgateTools.confirm({message:["您确认删除模板 "+strMName+" 吗？"],onConfirm:function(){window.location.href=returnUrl;return true;},onGiveUp:function(){return true;}});}
function closeFinishedJob(){$.ajax({url:"/mydhgate/product/transport/template.do?act=readJob",dataType:'json',async:false,cache:false,success:function(result){console.log(result);if(result){var finishedInfoDivJquery=$('#finishedInfoDiv');if(finishedInfoDivJquery.length==1){finishedInfoDivJquery.hide();}}}});}
function updateProducts(shippingmodelid,name){console.log("updateProducts:"+shippingmodelid);$.dhgateTools.confirm({message:["确认更新使用模板"+name+"的全部产品吗？"],onConfirm:function(){console.log("updateProducts:"+name);$.ajax({url:"/mydhgate/product/transport/template.do?act=updateProducts",data:{shippingmodelid:shippingmodelid,name:encodeURI(name)},dataType:'json',async:false,cache:false,success:function(result){console.log(result);var code=result.code;if(code==="0"){window.setTimeout(function(){$.dhgateTools.alert({message:['更新失败']});},100);}else if(code==="1"){window.setTimeout(function(){$.dhgateTools.alert({message:['更新成功！您有'+result.count+'个产品使用'+name+'。']});},100);}else if(code==="2"){window.setTimeout(function(){$.dhgateTools.alert({message:['您有'+result.count+'个产品需要更新，请耐心等待。'],onConfirm:function(){window.location.reload();}});},100);}},error:function(){window.setTimeout(function(){$.dhgateTools.alert({message:['更新失败']});},100);}});return true;},onGiveUp:function(){return true;}});}
function recordTracking(ot,vd){if(ot==null||ot=="")return;if(window["_dht"]){try{var ptracker=_dht.getTracker();vd=encodeURIComponent(vd);ptracker.setVar('vd',vd);ptracker.pageview(ot);}catch(e){}}}
function getShippingmodelTypeVOById(shippingtypeid){var shippingmodelTypeList=window.top._dh_tdSupplierShippingmodelVO.shippingmodelTypeList;for(var i=0;i<shippingmodelTypeList.length;i++){if(shippingtypeid==shippingmodelTypeList[i].shippingtypeid){return shippingmodelTypeList[i];}}
console.log("还没选择这个物流公司:"+shippingtypeid);return null;}
function createNewTypeVO(shippingTypeId){return{shippingtypeid:shippingTypeId,ismyshipping:"1"};}
function buildCustomCountryDescription(opt,shippingTypeId){var desc;if(opt.countrynamelst!=null&&opt.countrynamelst!=""){desc=opt.countrynamelst;}else if(opt.productid!=null&&opt.productid!=""){desc=opt.productid;}
if(!desc||opt.supportglobal=="1"){if("ePacket"==shippingTypeId){desc="美国";}else{desc="世界各地";}}
return desc;}
function buildCustomFeeDescription(opt,ismyshipping,shippingTypeId){var displaystartprice=opt.displaystartprice;var desc="免运费";try{if(ismyshipping=="4"&&shippingTypeId=='DHL'){desc='仓库折扣(约3.0折)';}else if(ismyshipping=="4"&&shippingTypeId=='e-ulink'){desc='标准运费(低至2折)<br/><a target="_blank" href="http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0409&artid=DE3E056EC5BA04D4E04010AC0C645DBD">查看折后报价</a>'}else if(ismyshipping=="4"&&shippingTypeId=='JCEX'){desc='标准运费(低至1折)<br/><a target="_blank" href="http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0409&artid=DE3E056EC5BA04D4E04010AC0C645DBD">查看折后报价</a>';}else if(ismyshipping=="4"&&shippingTypeId=='JILLION'){desc='标准运费(低至1折)<br/><a target="_blank" href="http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0409&artid=DE3E056EC5BA04D4E04010AC0C645DBD">查看折后报价</a>';}}catch(e){}
if(displaystartprice>0){desc=opt.endquantity+"件以内，"+opt.displaystartprice+"美金<br>每超过"+opt.quantitystep+"件增加"+opt.displaypricestep+"美元";}
return desc;}
function setShippingTypeFeeData(strShippingTypeId,ismyshipping,optIndex,dataOptVO,strSeaPortId,countryNoConfig){console.log(ismyshipping);if(dataOptVO==null){return false;}
var shippingmodelTypeList=_dh_tdSupplierShippingmodelVO.shippingmodelTypeList;if(shippingmodelTypeList==null){shippingmodelTypeList=[];_dh_tdSupplierShippingmodelVO.shippingmodelTypeList=shippingmodelTypeList;}
var shippingmodelTypeVO=getShippingmodelTypeVOById(strShippingTypeId);if(shippingmodelTypeVO==null){return false;}
var newOpt=newShippingmodelOptVO();newOpt.countryidlist=dataOptVO.countryidlist;newOpt.countrynamelst=dataOptVO.countrynamelst;newOpt.displaypricestep=dataOptVO.displaypricestep;newOpt.displaystartprice=dataOptVO.displaystartprice;newOpt.endquantity=dataOptVO.endquantity;newOpt.quantitystep=dataOptVO.quantitystep;newOpt.startquantity=dataOptVO.startquantity;newOpt.supportglobal=dataOptVO.supportglobal;if(dataOptVO.sailingdate!=null&&dataOptVO.sailingdate!=""){newOpt.sailingdate=dataOptVO.sailingdate;if(strSeaPortId!=null&&strSeaPortId!=""){shippingmodelTypeVO.dispatchport=strSeaPortId;}}
var shippingmodelOptVOList=shippingmodelTypeVO.shippingmodelOptVOList;if(ismyshipping=="2"){shippingmodelOptVOList=_dh_shippingmodelTypeVO_temp.shippingmodelOptVOList;}
if(shippingmodelOptVOList==null){shippingmodelOptVOList=[];if(ismyshipping=="2")
_dh_shippingmodelTypeVO_temp.shippingmodelOptVOList=shippingmodelOptVOList;}
if(optIndex=="-1"){if(ismyshipping=="2"){shippingmodelOptVOList[shippingmodelOptVOList.length]=newOpt;}else if(ismyshipping=="0"){shippingmodelOptVOList[0]=newOpt;}}else{shippingmodelOptVOList[optIndex]=newOpt;}
if(ismyshipping=="0"){console.log("如果是免运费设置刷新UI显示");shippingmodelTypeVO.ismyshipping=ismyshipping;shippingmodelTypeVO.shippingmodelOptVOList=[newOpt];shippingmodelTypeVO.countryNoConfig=countryNoConfig;refreshShippingTypeRow(shippingmodelTypeVO);}
closeFeeFreeWindow(strShippingTypeId,ismyshipping);}
function closeFeeFreeWindow(strShippingTypeId,ismyshipping){jQuery.modal.close();if(ismyshipping=="2"){window.setTimeout(function(){openCustomFee(strShippingTypeId);},10);}
refreshShippingTypeRow(getShippingmodelTypeVOById(strShippingTypeId));return true;}
function addHover(element){$(element).addClass("hover");}
function removeHover(element){$(element).removeClass("hover");}
var dh_zones_cache={};function showCoutriesTip(element,shippingTypeId,countryidlist){var li$=$(element);if(li$.html().length<50){console.log("国家数不够多，不需要显示tip");return;}
var zones=dh_zones_cache[shippingTypeId];var theURL="/syi/getZones.do";if(!zones){console.log("缓存里没有物流公司的国家区数据，从服务器取");$.ajax({url:theURL,data:{shippingTypeId:shippingTypeId},dataType:'json',async:false,success:function(result){console.log("从服务器取回了快点公司的国家区数据，放入缓存");dh_zones_cache[shippingTypeId]=result;}});}
buildCountryTip(dh_zones_cache[shippingTypeId],li$,countryidlist);}
var oldCountryidlist={};function buildCountryTip(result,li$,countryidlist){if(!(result&&result.length)){return;}
var coutryZoneDiv$=$("#coutryZoneDiv");coutryZoneDiv$.empty();var allCountries=countryidlist.split(',');console.log("选择的国家"+allCountries);for(var i=0;i<result.length;i++){var zone=result[i];console.log("区号："+zone.zone);var htmlArray=[];var countries=zone.countries;var selectedCountiesInZone=[];for(var countryIndex=0;countryIndex<countries.length;countryIndex++){for(var selectedCountryIndex=0;selectedCountryIndex<allCountries.length;selectedCountryIndex++){if(countries[countryIndex].countryid==allCountries[selectedCountryIndex]){selectedCountiesInZone.push(countries[countryIndex].description);}}}
if(selectedCountiesInZone.length==0){console.log("区内国家没有被选择，不显示");continue;}
htmlArray.push('<dl>');htmlArray.push('<dt>');htmlArray.push(zone.zone);htmlArray.push('区（');htmlArray.push(selectedCountiesInZone.length);htmlArray.push('/');htmlArray.push(zone.countryCount);htmlArray.push('）</dt>');htmlArray.push('<dd>');htmlArray.push(selectedCountiesInZone.join("、"));htmlArray.push('</dd>');htmlArray.push('</dl>');coutryZoneDiv$.append(htmlArray.join(""));}
var liPosition=li$.offset();var mainPosition=$("#postMain").scrollTop();if(oldCountryidlist==countryidlist){if($("#countryTip").is(":visible")){$("#countryTip").hide();}else{$("#countryTip").css("left",liPosition.left-10).css("top",mainPosition+liPosition.top+40).show();}}else{oldCountryidlist=countryidlist;$("#countryTip").css("left",liPosition.left-10).css("top",mainPosition+liPosition.top+40).show();}}
function hideCoutriesTip(){$("#countryTip").hide();console.log("countryTip hided");}
function showDhPortCountryByType(shippingtypeid,index,ismyshipping){console.log("showDhPortCountryByType");var oShippingWarehouse=getShippingTypeWarehouseList(shippingtypeid);if(oShippingWarehouse==null)return;var oPanel=$("#div_popModalCContext");var shippingmodelTypeVO=getShippingmodelTypeVOById(shippingtypeid);console.log(index);console.log(shippingmodelTypeVO);console.log("ismyshipping:"+ismyshipping);var optVO=shippingmodelTypeVO.shippingmodelOptVOList[index];if(!optVO){optVO=new ShippingmodelOptVO();}
var countryidlist=optVO.countryidlist;var supportglobal=optVO.supportglobal;var sCountryHTML="<table width=\"94%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"upload_file_a\"><tr height=10><td colspan=\"5\"></td></tr>";arrWarehouseList=oShippingWarehouse.wl;for(var wi=0;wi<arrWarehouseList.length;wi++){var arrCountryList=arrWarehouseList[wi].clist;var j=0;for(var i=0;i<arrCountryList.length;i++){var sId=arrCountryList[i].cid;var sName=arrCountryList[i].des;if(j==0){sCountryHTML+="<tr class=\"tr1\">";}
var sChecked="";var sDisabled="";if(supportglobal!="1"){if(countryidlist.indexOf(sId)>-1)sChecked="checked";if(i!=0)sDisabled="disabled";}else{sDisabled="disabled";}
sCountryHTML+="<td width=\"20%\"><input type=\"checkbox\" id=\"country_"+sId+"\" value=\""+sName+"\" "+sChecked+" "+sDisabled;if(i==0){sCountryHTML+=" onclick=\"selectWarehouseCountry(this, '"+shippingtypeid+"', "+wi+");\"; ";}
sCountryHTML+=" />"+sName+"</td>";if(j==4){sCountryHTML+="</tr>";j=0;}else{j++;}}
if(j!=0){var iCol=5-j;sCountryHTML+="<td colspan=\""+iCol+"\">&nbsp;</td></tr>";}}
sCountryHTML+="<tr class=\"tr1\"><td colspan=\5\"><a href=\"javascript:void(0)\" onclick=\"selectAllOfCountry('"+
shippingtypeid+"',true);return false;\">"+msg_showCountryByType_html1+"</a> | <a href=\"javascript:void(0)\" onclick=\"selectAllOfCountry('"+shippingtypeid+"',false);return false;\" \>"+msg_showCountryByType_html2+"</a></td></tr>"+"<tr><td height=\"10\" colspan=\"5\"></td></tr><tr><td colspan=\"2\">"+"<input type=\"checkbox\" id=\"inp_allofcountry\" onclick=\"selectGlobal('"+shippingtypeid+"', this.checked);\" ";if(supportglobal=="1")sCountryHTML+="checked";sCountryHTML+=" />"+msg_showCountryByType_html3+" </td>"+"<td class=\"ri\" colspan=\"3\"><button id='confirmOverseaOneGroupButton'><span class=\"h_btn_lt\" style=\"\"><span class=\"h_btn_ri\">"+msg_showCountryByType_html4+"</span></span></button> <a href=\"javascript:jQuery.modal.close();\">"+msg_showCountryByType_html2+"</a>&nbsp;&nbsp;</td>"+"</tr><tr height=10><td colspan=\"5\"></td></tr></table>";oPanel.html(sCountryHTML);}
var g_arrShippingWarehouseList={};function getShippingTypeWarehouseList(strSType){if(g_arrShippingWarehouseList[strSType]!=null)return g_arrShippingWarehouseList[strSType];var strUrl="/mydhgate/product/ProductAjaxAction.do?act=shippingWh&isblank=true";var strData="sid="+strSType;var oError=null;$.ajax({type:"GET",url:strUrl,data:strData,async:false,dataType:"json",success:function(data){if(data.result=="0"){g_arrShippingWarehouseList[strSType]=window.eval("("+data.msg+")");}else{alert(data.msg);}},error:function(data,status,e){}});return g_arrShippingWarehouseList[strSType];}
function selectGlobal(sShippingType,bSelected){var arrWList=g_arrShippingWarehouseList[sShippingType].wl;for(var i=0;i<arrWList.length;i++){var arrCountryList=arrWList[i].clist;for(var j=0;j<arrCountryList.length;j++){if(bSelected){$("#country_"+arrCountryList[j].cid).attr("checked",false).attr("disabled",true);}
else{$("#country_"+arrCountryList[0].cid).attr("disabled",false);break;}}}}
function selectWarehouseCountry(oCheckBox,strSType,iIndex){var arrCountryList=g_arrShippingWarehouseList[strSType].wl[iIndex].clist;var bChecked=oCheckBox.checked;for(var i=0;i<arrCountryList.length;i++){$("#country_"+arrCountryList[i].cid).attr("checked",bChecked);}}
function selectAllOfCountry(sShippingType,bSelected){var arrCountryList=g_arrShippingWarehouseList[sShippingType].wl;if($("#inp_allofcountry")[0].checked)return;for(var i=0;i<arrCountryList.length;i++){if(bSelected)
$("#country_"+arrCountryList[i].def)[0].checked=true;else
$("#country_"+arrCountryList[i].def)[0].checked=false;}}
var g_strOcean="Ocean";function isTemplateExist(modelname){var isDuplicated=false;var data={isblank:true,modelname:modelname};if(_dh_tdSupplierShippingmodelVO.shippingmodelid){data.shippingmodelid=_dh_tdSupplierShippingmodelVO.shippingmodelid;}
jQuery.ajax({type:"POST",url:"/mydhgate/shipping/shippingmodel.do?act=checkname",data:data,async:false,success:function(msg){isDuplicated=msg;}});console.log("存在模板名："+isDuplicated);return isDuplicated;}
function checkShipModelForm(){var $modelname=$("#modelname");var modelname=$.trim($modelname.val());if(modelname==""){alert(mes_shipmodel_namenotnull);$modelname.focus();return false;}else if(modelname.length>15){alert(mes_shippingmodel_nametoolong);$modelname.focus();return false;}
if(isTemplateExist(modelname)){alert(mes_shipmodel_noequal);return false;}
if(!checkShippingData()){return false;}
return true;}
function checkShippingData(){var shippingTypeList=_dh_tdSupplierShippingmodelVO.shippingmodelTypeList;if(shippingTypeList.length==0){alert(msg_initShippingType_alert);return false;}
for(var i=0;i<shippingTypeList.length;i++){var shippingmodelTypeVO=shippingTypeList[i];var ismyshipping=shippingmodelTypeVO.ismyshipping;var strShippingType=shippingmodelTypeVO.shippingtypeid;if(ismyshipping==""||ismyshipping==null){alert(strShippingType+msg_checkShippingData_alert1);return false;}
var shippingmodelOptVOList=shippingmodelTypeVO.shippingmodelOptVOList;var shippingmodelOptVO=null;if(shippingmodelOptVOList!=null&&shippingmodelOptVOList.length>0){shippingmodelOptVO=shippingmodelOptVOList[0];}
if("0"==ismyshipping){if(shippingmodelOptVO==null){alert(strShippingType+"运费设置错误");return false;}
if(jQuery.trim(shippingmodelOptVO.countryidlist)==""&&shippingmodelOptVO.supportglobal!="1"){alert(strShippingType+"请选择免运费国家");return false;}}else if("1"==ismyshipping){}else if("2"==ismyshipping){}else if("3"==ismyshipping){if(strShippingType=="EMS"&&shippingmodelTypeVO.tcShippingtypeDiscountVO==null){alert(msg_checkShippingData_alert2);return false;}}else{alert(strShippingType+"运费设置错误");return false;}}
return true;}
function checkIntText(text){var str=text.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isInt(str)){var ilen=str.length;str=str.substring(0,ilen-1);}}
text.value=str;}
function checkFloatText(text1,suffix){var str=text1.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isFloat(str)){var ilen=str.length;str=str.substring(0,ilen-1);}else{var dotindex=str.indexOf(".");if(dotindex<0){if(str.length>6){var ilen=str.length;str=str.substring(0,ilen-1);}}
else if(dotindex>0){if(str.length-dotindex>suffix+1){var ilen=str.length;str=str.substring(0,ilen-1);}}
break;}}
text1.value=str;}
function isInt(s){var patrn=/^([1-9]\d{0,9})$/;if(!patrn.exec(s))
return false;else
return true;}
function formatDiscount(tdSupplierShippingdiscountVO){var num=parseFloat(tdSupplierShippingdiscountVO.discount);if(isNaN(num)||num==10.0){return"无折扣";}
return num.toFixed(1)+"折";}
function isCustomFee(shippingmodelTypeVO,ismyshipping){if(ismyshipping=="2")return true;var shippingmodelOptVOList=shippingmodelTypeVO.shippingmodelOptVOList;if(!shippingmodelOptVOList||shippingmodelOptVOList.length==0){return false;}
if(shippingmodelOptVOList.length>1)return true;for(var optIndex=0;optIndex<shippingmodelOptVOList.length;optIndex++){var opt=shippingmodelOptVOList[optIndex];if(opt.displaypricestep>0||opt.displaystartprice>0){return true;}}
return false;}
function getMyDiscount(shippingTypeId){for(var discountIndex=0;discountIndex<window.top._dh_shippingdiscounts.length;discountIndex++){var tdSupplierShippingdiscountVO=window.top._dh_shippingdiscounts[discountIndex];if(tdSupplierShippingdiscountVO.shippingtype==shippingTypeId){return tdSupplierShippingdiscountVO.displayDiscount;}}}
(function($){$.fn.wordLimit=function(maxLength){this.each(function(){var content=$.trim($(this).text());if(content.length>maxLength){$(this).html(content.substring(0,maxLength)+'...');}});};})(jQuery);
function showNewProductGroup(){$('#addproductgroupdiv').modal({close:false});}
function addProductGroup(){var strGName=$("#productgroupnamediv").val();var strGContext=$("#productgroupcontextdiv").val();strGName=trim(strGName);strGContext=trim(strGContext);var strError=validatorProductGroup(strGName,strGContext);if(strError!=""){$("#productGroupErrTip").html("<p>"+strError+"</p>").show();return false;}
var strUrl="http://seller.dhgate.com/syi/addProductGroupAjax.do?isblank=true";strNameAjax=encodeURIComponent(strGName);strNameAjax=encodeURIComponent(strNameAjax);strContexteAjax=encodeURIComponent(strGContext);strContexteAjax=encodeURIComponent(strContexteAjax);strUrl+="&productgroupname="+strNameAjax;strUrl+="&productgroupcontext="+strContexteAjax;strUrl+="&temp="+(new Date().getTime().toString(36));jQuery.ajax({type:"GET",url:strUrl,contentType:"application/x-www--urlencoded; charset=utf-8",success:function(data){if(data.result=="0"){alert(data.result);var oSel=$("#productgroupid");$("<option value='"+data.msg+"' selected>"+strGName+"</option>").appendTo(oSel);$('#groupname').html("$text.label.productentry.inputproductgroupnametitle"+strGName);$('#addproductgroupdiv').html($('#addproductgroupsuccessdiv').html());$.modal.close();document.getElementById("productgroupname").value=strGName;}else{alert(data.result);$("#productGroupErrTip").html("<p>"+data.msg+"</p>").show();}},dataType:"json",error:function(){alert(data.result);$("#productGroupErrTip").html("<p>产品组保存失败，请重新尝试或与敦煌客服联系。</p>");}});}
function validatorProductGroup(strGName,strGContext){if(strGName==""){strError=msg_product_inputerrorproductgroupName;alert(strError);return strError;}else{if(strGName.length>20){strError=msg_product_inputproductgroupnametoolong;alert(strError);return strError;}else{if(strGName.indexOf("'")>-1){strError=msg_product_inputerrorproductgroupNameQquote;alert(strError);return strError;}}}
if(strGContext.length>100){strError=msg_product_inputproductgroupcontexttoolong;return strError;}
return'';}
function getProductGroupId(){return $("#productgroupid").val();}
function closewindow(){$.modal.close();}
function trim(str){return str.replace(/(^[\s]*)|([\s]*$)/g,"");};
var g_brands_list=[];var g_brands_pageinfo={};var g_pageNumMax=10;var g_pageNumMin=1;var g_brands_queryinfo={"indexCode":"","productName":"","pageNum":1,"catePubId":""};var g_brands_choice_isopen=false;var g_brands_upload_isopen=false;function btnSelBrandCancel(){brandsChoiceOpen(false);}
function brandsChoiceOpen(open){if(open){g_brands_choice_isopen=true;$("#div_index_id a").each(function(){$(this).attr("href","#").attr("id","index_a_"+$(this).html()).bind("click",this,indexQueryBrand);});$("#div_index_id b").each(function(){$(this).attr("id","index_a_"+$(this).html()+"_b");});$("#btn_selBrand_cancel").bind("click",btnSelBrandCancel);indexDivInit();var productName=$("#productname").val();productName=productName.Trim();$("#queryBrands_txt").val(productName);g_brands_queryinfo={"indexCode":"","productName":productName,"pageNum":1};ajaxGetBrandsList(g_brands_queryinfo,true);$("#div_brand_query").show();$('#span_selectBrandBtn').removeClass();$('#span_selectBrandBtn').addClass("syi-button-icoa");}else{$("#selectBrandsDiv").removeClass("drop-down-activation");$("#nobrandtips").hide();g_brands_choice_isopen=false;type_btn=1;$("#div_brand_query").hide();$("#brandsDiv").hide();$("#brandsSearchtable").hide();clearBrandBtnClass();$("#div_index_id a").each(function(){$(this).unbind("click",indexQueryBrand);});$("#btn_selBrand_cancel").unbind("click",btnSelBrandCancel);}}
function getSupplierBrand(){var supplierBrand={};supplierBrand.brandname=$("#brandname").val();supplierBrand.brandnameCn=$("#brandnameCn").val();supplierBrand.brandalias=$("#brandalias").val();supplierBrand.brandinfo=$("#brandinfo").val();supplierBrand.logo=$("#txt_logo").val();supplierBrand.imgmd5=$("#imgmd5").val();return supplierBrand;}
function indexDivInit(){$("#div_index_id a").each(function(){$(this).show();});$("#div_index_id b").each(function(){$(this).hide();});}
function indexQueryBrand(event){var obj=event.data;g_brands_queryinfo.indexCode=$(obj).html();g_brands_queryinfo.productName="";g_brands_queryinfo.pageNum=1;$("#queryBrands_txt").val("");indexDivInit();$(obj).hide();var b_id=$(obj).attr("id")+"_b";$("#"+b_id).show();ajaxGetBrandsList(g_brands_queryinfo,true);}
function selectedBrand(brandid,brandName){$("#brandName").val(brandName);$("#brandid").val(brandid);$("#brandNameSpan").html(brandName);brandsChoiceOpen(false);}
function ajaxGetBrandsList(queryinfo,bRefresh){var catePubId=$("#inp_catepubid").val();if(catePubId==""||catePubId.length==0){alert(msg_ajaxGetBrandsList_alert);return;}
queryinfo.catePubId=catePubId;var brand_query_key=getBrandQueryKey(queryinfo);if(g_brands_list[brand_query_key]!=null){if(bRefresh){createbBrandsQueryUI(g_brands_list[brand_query_key],queryinfo);return;}}
$.ajax({url:"http://seller.dhgate.com/syi/ajaxGetBrandsList.do",data:{"indexCode":queryinfo.indexCode,"productName":queryinfo.productName,"pageNum":queryinfo.pageNum,"catePubId":catePubId,"isblank":true},dataType:'json',success:function(result){g_brands_list[brand_query_key]=result;if(bRefresh){createbBrandsQueryUI(g_brands_list[brand_query_key],queryinfo);}},error:function(xhr,status,error){$("#nobrandtips").show();},type:'POST'});}
function clickButton(){if(event.keyCode==13)
{brandQuery();return false;}}
function brandQuery(){var productName=$("#queryBrands_txt").val();productName=productName.Trim();g_brands_queryinfo.indexCode="";g_brands_queryinfo.productName=productName;g_brands_queryinfo.pageNum=1;indexDivInit();ajaxGetBrandsList(g_brands_queryinfo,true);}
function pageNumQuery(v_pageNum){g_brands_queryinfo.pageNum=v_pageNum;ajaxGetBrandsList(g_brands_queryinfo,true);}
function getBrandQueryKey(queryinfo){var brands_query_key="indexCode_"+queryinfo.indexCode;brands_query_key=brands_query_key+"#productName_"+queryinfo.productName;brands_query_key=brands_query_key+"#catePubId_"+queryinfo.catePubId;brands_query_key=brands_query_key+"#pageNum_"+queryinfo.pageNum;return brands_query_key;}
function clearBrandUI(){g_brands_choice_isopen=false;if($("#display_div_brand").html()==""){$("#div_selected_brand").hide();$("#div_brand_query").hide();$("#div_brand_id").hide();$("#queryBrands_txt").val("");$("#brandNameSpan").html('- 无品牌 -');$("#brandName").val('- 无品牌 -');$("#brandid").val('99');$('#brandsSearchtable').hide();$("#brandsDiv").hide('fast');clearBrandBtnClass();var temp="<div class=\"syi-properties-ri syi-rposition\" id=\"div_brand_id\"  style=\"display:none;\">  ";temp=temp+$("#div_brand_id").html()+"</div>";$("#display_div_brand").html(temp);}}
function createbBrandsQueryUI(brandsList,queryInfo){$("#ul_brands_list_id").html("");var result;var pageBean=null;if(brandsList!=null){result=$(brandsList)[0].result;pageBean=$(brandsList)[0].pageBean;}
if(result){$("#nobrandtips").hide();$(result).each(function(){var brandid=this.brandid;var logo=this.logo;var brandinfo=this.brandinfo;var brandname=this.brandname;if((typeof(brandinfo)!=undefined&&brandinfo!=null&&brandinfo.indexOf("&#039;")>=0)||(typeof(brandname)!=undefined&&brandname!=null&&brandname.indexOf("&#039;")>=0)){$("#ul_brands_list_id").append("<li onclick='selectedBrand(\""+brandid+"\",\""+brandname+"\");'><img src=\"http://image.dhgate.com/"+logo+"\" /><p>"+brandname+"</p></li>");}else{$("#ul_brands_list_id").append("<li onclick=\"selectedBrand('"+brandid+"','"+brandname+"');\"><img src=\"http://image.dhgate.com/"+logo+"\" /><p>"+brandname+"</p></li>");}});$("#ul_brands_list_id").append("<li onclick=\"selectedBrand('"+"99"+"','"+msg_createbBrandsQueryUI_wupinpai+"');\"><p>"+msg_createbBrandsQueryUI_wupinpai+"</p></li>");}else{if(queryInfo.productName!=""||queryInfo.indexCode!=""){$("#nobrandtips").show();}else{$("#ul_brands_list_id").append("<li onclick=\"selectedBrand('"+"99"+"','"+msg_createbBrandsQueryUI_wupinpai+"');\"><p>"+msg_createbBrandsQueryUI_wupinpai+"</p></li>");}}
createPageCode(pageBean);}
function createPageCode(pagebean){$("#div_page_code").html("");var pageNum=0;var pageNumCount=0;if(pagebean!=null){var pageNum=pagebean.page;var pageNumCount=pagebean.pages;}
if(pageNumCount==0){return;}
if(pageNum==g_pageNumMin){g_pageNumMin=pageNum-4;if(g_pageNumMin<1){g_pageNumMin=1;}
g_pageNumMax=g_pageNumMin+9;if(g_pageNumMax>pageNumCount){g_pageNumMax=pageNumCount;}}else if(pageNum==g_pageNumMax){g_pageNumMax=pageNum+4;if(g_pageNumMax>pageNumCount){g_pageNumMax=pageNumCount;}
g_pageNumMin=g_pageNumMax-9;if(g_pageNumMin<1){g_pageNumMin=1;}}else if(pageNum<g_pageNumMin){g_pageNumMin=1;g_pageNumMax=10;if(g_pageNumMax>pageNumCount){g_pageNumMax=pageNumCount;}}
$("#div_page_code").append("<span>"+msg_createPageCode_html1+" <strong>"+pagebean.page+"/"+pagebean.pages+"</strong></span><a class=\"turn\" href=\"javascript:void(0);\" onclick=\"pageNumQuery("+pagebean.prePageNo+");return false;\" >"+msg_createPageCode_html2+"&laquo;</a>");for(var t_pageNum=g_pageNumMin;t_pageNum<=g_pageNumMax;t_pageNum++){if(pageNum==t_pageNum){$("<b>"+t_pageNum+"</b>").appendTo($("#div_page_code"));}else{$("<a href=\"javascript:void(0);\" onclick=\"return false;\">"+t_pageNum+"</a>").click(function(){pageNumQuery($(this).html());}).appendTo($("#div_page_code"));}}
$("#div_page_code").append("<a class=\"turn\" href=\"javascript:void(0);\" onclick=\"pageNumQuery("+pagebean.nextPageNo+");return false;\" >"+msg_createPageCode_html3+" »</a>");}
function clearBrandBtnClass(){if(!g_brands_choice_isopen){$('#span_selectBrandBtn').removeClass();$('#span_selectBrandBtn').addClass("syi-button-icon");}
if(!g_brands_upload_isopen){$('#span_uploadBrandBtn').removeClass();$('#span_uploadBrandBtn').addClass("syi-button-icon");}}
function selBrandBtnMouseove(){if(!g_brands_choice_isopen){$('#span_selectBrandBtn').removeClass();$('#span_selectBrandBtn').addClass('syi-button-icoh');}}
function uploadBrandBtnMouseove(){if(!g_brands_upload_isopen){$('#span_uploadBrandBtn').removeClass();$('#span_uploadBrandBtn').addClass('syi-button-icoh');}}
var type_btn;function onClickSelectBrandBtn(){brandsChoiceOpen(true);var selectBrandValue=$("#selectBrandsDiv").offset();var mainTopValue=$("#postMain").scrollTop();$("#brandsSearchtable").css({"left":selectBrandValue.left-10,"top":selectBrandValue.top+mainTopValue+25,"overflow":"hidden"}).show();type_btn=3;}
function onSelectBrandsClick(){var templatesDiv$=$("#brandsDiv");if(type_btn==1){showBrandsSelect(templatesDiv$);$("#selectBrandsDiv").addClass("drop-down-activation");$("#brandsSearchtable").hide();type_btn=2;}else if(type_btn==2){$("#brandsSearchtable").hide();$("#selectBrandsDiv").removeClass("drop-down-activation");templatesDiv$.hide();type_btn=1;}else if(type_btn==3){templatesDiv$.hide();type_btn=2;}}
function showBrandsSelect(templatesDiv$){buildBrandsSelectUI(templatesDiv$);templatesDiv$.show();}
function buildBrandsSelectUI(templatesDiv$){templatesDiv$.empty();$("<span>- 无品牌 -</span>").appendTo(templatesDiv$).click(function(){templatesDiv$.hide('fast');$("#brandNameSpan").html('- 无品牌 -');$("#brandName").val('- 无品牌 -');$("#brandid").val('99');});$('<span class="lasted"><a href="#"  onclick="onClickSelectBrandBtn();">选择其它品牌</a></span>').appendTo(templatesDiv$);}
function init_Brand(brandsVo){if(brandsVo&&brandsVo.brandid!='99'){$("#brandNameSpan").html(brandsVo.brandname);$("#brandid").val(brandsVo.brandid);}else{$("#brandNameSpan").html('- 无品牌 -');$("#brandid").val('99');}}
function eventbrandattr(){$(document).click(function(e){if($(e.target).parents('.posionabs').attr("id")!='brandsSearchtable'&&$(e.target).parents('.drop-down').attr("id")!='selectBrandsDiv'){$("#brandsSearchtable").hide();$("#selectBrandsDiv").removeClass("drop-down-activation");$("#brandsDiv").hide();type_btn=1;}});}
$(document).ready(function(){type_btn=1;init_Brand(null);eventbrandattr();});;
var fName;var sid;var iName;function initsingleUploadifyImg(fileExtArr,callBackObj){var fileExt='*.jpg;*.gif;*.pdf;*.rar;*.doc;*.docx;*.txt';var fileDesc='choose *.jpg/*.gif/*.pdf/*.rar/*.doc/*.docx';if(typeof(fileExtArr)!="undefined"&&fileExtArr!=null&&fileExtArr.length>0){fileExt='*.'+fileExtArr.join(";*.");fileDesc='choose '+fileExtArr.join("/*.");}
jQuery("#attrValFileupload").uploadify({'uploader':'http://seller.dhgate.com/uploadjs/uploadalbums.swf','script':'http://upload.dhgate.com/fileuploadservlet','cancelImg':'http://image.dhgate.com/2008/web20/seller/uploadjs/cancel.png','folder':'uploaddify','scriptAccess':'always','method':'GET','queueID':'fileQueueImg','auto':false,'multi':false,'simUploadLimit':1,'sizeLimit':204800,'wmode':'transparent','width':120,'height':26,'fileExt':fileExt,'fileDesc':fileDesc,'onInit':function(){fName=jQuery('#functionname_avim').val();sid=jQuery('#supplierid').val();iName=jQuery('#imagebannername_avim').val();},'onError':function(event,ID,fileObj,errorObj){jQuery("#operate_message").html("Upload unsuccessful. Please try again.").show();},'onSelect':function(event,ID,fileObj){if(validateOnSelect(event,ID,fileObj)){var functionname=fName;var supplierid=sid;var imagebannername=iName;jQuery('#attrValFileupload').uploadifySettings('scriptData',{'functionname':functionname,'supplierid':supplierid,'imagebannername':imagebannername});jQuery('#attrValFileupload').uploadifyUpload();}},'onComplete':function(event,queueId,fileObj,response,data){if(response!=""){var s_value=window.eval("("+response+")");if(s_value.result=='1'||s_value.result=='2'){var imgmd5=s_value.l_imgmd5;var imgurl=s_value.l_imgurl;var imgsize=s_value.l_imgsize;var localfilename=decodeURIComponent(s_value.l_localfilename);}else if(s_value.result=='0'){jQuery("#operate_message").html(msg_upload_html1).show();}}else{jQuery("#operate_message").html(msg_upload_html2).show();}},'onAllComplete':function(event,queueId,fileObj,response,data){}});};function initsingleUploadifyImg_syinew(fileExtArr,callBackObj,uploadify_id){var fileExt='*.jpg;*.gif;*.pdf;*.rar;*.doc;*.docx;*.txt';var fileDesc='choose *.jpg/*.gif/*.pdf/*.rar/*.doc/*.docx';if(typeof(fileExtArr)!="undefined"&&fileExtArr!=null&&fileExtArr.length>0){fileExt='*.'+fileExtArr.join(";*.");fileDesc='choose '+fileExtArr.join("/*.");}
jQuery("#attrValFileupload_"+uploadify_id).uploadify({'uploader':'/syi/js/photo/upload2/uploadalbums.swf','script':'http://upload.dhgate.com/fileuploadservlet','cancelImg':'/syi/js/photo/upload2/cancel.png','folder':'uploaddify','scriptAccess':'always','method':'GET','queueID':'attrPicQueue_'+uploadify_id,'auto':false,'multi':false,'queueSizeLimit':1,'simUploadLimit':1,'sizeLimit':204800,'hideButton':true,'wmode':'transparent','width':73,'height':27,'fileExt':fileExt,'fileDesc':fileDesc,'onInit':function(){sid=jQuery('#supplierid').val();fName=jQuery('#functionname_avim').val();iName=jQuery('#imagebannername_avim').val();},'onError':function(event,ID,fileObj,errorObj){jQuery("#operate_message").html("Upload unsuccessful. Please try again.").show();},'onSelect':function(event,ID,fileObj){var attrId=callBackObj.attrId;if(jQuery("#msgdiv_"+attrId).length>0){jQuery("#msgdiv_"+attrId).hide();}
if(validateOnSelect_attr(event,ID,fileObj,attrId)){var functionname=fName;var supplierid=sid;var imagebannername=iName;jQuery('#attrValFileupload_'+uploadify_id).uploadifySettings('scriptData',{'functionname':functionname,'supplierid':supplierid,'imagebannername':imagebannername});jQuery('#attrValFileupload_'+uploadify_id).uploadifyUpload();}else{return false;}},'onComplete':function(event,queueId,fileObj,response,data){if(response!=""){var s_value=window.eval("("+response+")");if(s_value.result=='1'||s_value.result=='2'){var imgmd5=s_value.l_imgmd5;var imgurl=s_value.l_imgurl;var imgsize=s_value.l_imgsize;var localfilename=decodeURIComponent(s_value.l_localfilename);saveBrandAppeal_syi_new(imgmd5,imgurl,imgsize,localfilename,callBackObj);}else if(s_value.result=='0'){jQuery("#operate_message").html(msg_upload_html1).show();}}else{jQuery("#operate_message").html(msg_upload_html2).show();}},'onAllComplete':function(event,queueId,fileObj,response,data){}});};function validateOnSelect_attr(event,ID,fileObj,attrId){if(fileObj.size>220000){jQuery("#msgdiv_"+attrId).html('您选取的图片中有大于200K的图片').show();return false;}
if(fileObj.size<100){jQuery("#msgdiv_"+attrId).html('您选取的图片中有小于100K的图片').show();return false;}
if((fileObj.type).toLowerCase()!=".jpg"){jQuery("#msgdiv_"+attrId).html('您选取的图片中有非jpg格式的图片').show();return false;}
return true;}
function delUploadInfo(){jQuery.modal.close();jQuery('#popcon').html("");}
function saveBrandAppeal_syi_new(imgmd5,imgurl,imgsize,localfilename,callBackObj){if(callBackObj.callType=="brand"){uploadBrandCallBack(imgmd5,imgurl,imgsize,localfilename);}else if(callBackObj.callType=="attr"){var attrId=callBackObj.attrId;var attrValId=callBackObj.attrValId;$("#defimg_"+attrId+"_"+attrValId).attr("src","http://image.dhgate.com/"+imgurl);var strImgNameTemp;localfilenamed=localfilename.replace(".jpg","");if(localfilenamed.length>4){strImgNameTemp=localfilenamed.substr(0,6);strImgNameTemp=strImgNameTemp+'..';}else{strImgNameTemp=localfilenamed;}
var idStr=attrId+"_"+attrValId;$("#text_defineattrval_url_imgname_"+idStr).attr("title",localfilename);$("#text_defineattrval_url_imgname_"+idStr).html(strImgNameTemp);$("#text_defineattrval_url_"+idStr).val(imgurl);$("#div_defineattrval_img_"+idStr).show();}}
function delSelfDefineUpload_new(attrId,attrValId){var idStr=attrId+"_"+attrValId;$("#text_defineattrval_url_imgname_"+idStr).attr("title",'');$("#text_defineattrval_url_imgname_"+idStr).html('');$("#defimg_"+idStr).removeAttr("src");$("#text_defineattrval_url_"+idStr).val("");$("#div_defineattrval_img_"+idStr).hide();}
function initbuyerphotouploadify(){var fileExtArr='';var callBackObj='';var attrId='792802';var attrValId='1136047';var fileExtArr=['jpg'];var callBackObj={"callType":"attr","attrId":attrId,"attrValId":attrValId};var uploadify_id=attrId+'_'+attrValId;initsingleUploadifyImg_syinew(fileExtArr,callBackObj,uploadify_id);};
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();
if(jQuery)(function(jQuery){jQuery.extend(jQuery.fn,{uploadify:function(options){jQuery(this).each(function(){settings=jQuery.extend({id:jQuery(this).attr('id'),uploader:'uploadify.swf',script:'uploadify.php',expressInstall:null,folder:'',height:30,width:140,cancelImg:'cancel.png',wmode:'opaque',scriptAccess:'sameDomain',fileDataName:'Filedata',method:'POST',queueSizeLimit:999,simUploadLimit:1,queueID:false,displayData:'percentage',onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},options);var pagePath=location.pathname;pagePath=pagePath.split('/');pagePath.pop();pagePath=pagePath.join('/')+'/';var data={};data.uploadifyID=settings.id;data.pagepath=pagePath;if(settings.buttonImg)data.buttonImg=escape(settings.buttonImg);if(settings.buttonText)data.buttonText=escape(settings.buttonText);if(settings.rollover)data.rollover=true;data.script=settings.script;data.folder=escape(settings.folder);if(settings.scriptData){var scriptDataString='';for(var name in settings.scriptData){scriptDataString+='&'+name+'='+settings.scriptData[name];}
data.scriptData=escape(scriptDataString.substr(1));}
data.width=settings.width;data.height=settings.height;data.wmode=settings.wmode;data.method=settings.method;data.queueSizeLimit=settings.queueSizeLimit;data.simUploadLimit=settings.simUploadLimit;if(settings.hideButton)data.hideButton=true;if(settings.fileDesc)data.fileDesc=settings.fileDesc;if(settings.fileExt)data.fileExt=settings.fileExt;if(settings.multi)data.multi=true;if(settings.auto)data.auto=true;if(settings.sizeLimit)data.sizeLimit=settings.sizeLimit;if(settings.checkScript)data.checkScript=settings.checkScript;if(settings.fileDataName)data.fileDataName=settings.fileDataName;if(settings.queueID)data.queueID=settings.queueID;if(settings.onInit()!==false){jQuery(this).css('display','none');jQuery(this).after('<div id="'+jQuery(this).attr('id')+'Uploader"></div>');swfobject.embedSWF(settings.uploader,settings.id+'Uploader',settings.width,settings.height,'9.0.24',settings.expressInstall,data,{'quality':'high','wmode':settings.wmode,'allowScriptAccess':settings.scriptAccess});if(settings.queueID==false){jQuery("#"+jQuery(this).attr('id')+"Uploader").after('<div id="'+jQuery(this).attr('id')+'Queue" class="uploadifyQueue"></div>');}}
if(typeof(settings.onOpen)=='function'){jQuery(this).bind("uploadifyOpen",settings.onOpen);}
jQuery(this).bind("uploadifySelect",{'action':settings.onSelect,'queueID':settings.queueID},function(event,ID,fileObj){if(event.data.action(event,ID,fileObj)!==false){var byteSize=Math.round(fileObj.size/1024*100)*.01;var suffix='KB';if(byteSize>1000){byteSize=Math.round(byteSize*.001*100)*.01;suffix='MB';}
var sizeParts=byteSize.toString().split('.');if(sizeParts.length>1){byteSize=sizeParts[0]+'.'+sizeParts[1].substr(0,2);}else{byteSize=sizeParts[0];}
if(fileObj.name.length>20){fileName=fileObj.name.substr(0,20)+'...';}else{fileName=fileObj.name;}
queue='#'+jQuery(this).attr('id')+'Queue';if(event.data.queueID){if(event.data.queueID=='productPicQueue'){addImgUI_queue(ID);queue='#'+event.data.queueID+'_'+ID;}else if(event.data.queueID=='descPicQueue'){var index=$("#current_oper_index").val();$("#pu_state_"+index).val(ID);queue='#'+event.data.queueID+'_'+index;}else{queue='#'+event.data.queueID;}}
var attStr='attrPicQueue';var strstr=event.data.queueID.substring(0,attStr.length);if(event.data.queueID&&event.data.queueID=='productPicQueue'){jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem_product"><div class="cancel" style="display:none;"><a href="javascript:jQuery(\'#'+jQuery(this).attr('id')+'\').uploadifyCancel(\''+ID+'\')" onclick="if(window.event){window.event.returnValue = false;}"><img src="'+settings.cancelImg+'" border="0"  /></a></div><span class="fileName" style="display:none;">'+fileName+''+byteSize+suffix+'</span><span class="percentage"></span><div class="uploadifyProgress"><div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar_product"><!--Progress Bar--></div></div></div>');}else if(event.data.queueID=='attrPicQueue'||attStr==strstr){jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem_attr"> <span class="percentage"></span><div class="uploadifyProgress"><div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar_attr"><!--Progress Bar--></div></div></div>');}else if(event.data.queueID=='descPicQueue'){jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem_desc"> <span class="percentage"></span><div class="uploadifyProgress"><div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar_attr"><!--Progress Bar--></div></div></div>');}else if(event.data.queueID=='googleshoppingPicQueue'){jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem_attr"> <span class="percentage"></span><div class="uploadifyProgress" style="width:100px;"><div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar_attr"><!--Progress Bar--></div></div></div>');}
else{jQuery(queue).append('<div id="'+jQuery(this).attr('id')+ID+'" class="uploadifyQueueItem"><div class="cancel"><a href="javascript:jQuery(\'#'+jQuery(this).attr('id')+'\').uploadifyCancel(\''+ID+'\')" onclick="if(window.event){window.event.returnValue = false;}"><img src="'+settings.cancelImg+'" border="0"  /></a></div><span class="fileName">'+fileName+' ('+byteSize+suffix+')</span><span class="percentage"></span><div class="uploadifyProgress"><div id="'+jQuery(this).attr('id')+ID+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div></div></div>');}}else{document.getElementById(jQuery(this).attr('id')+'Uploader').cancelFileUpload(ID,true,false)}});if(typeof(settings.onSelectOnce)=='function'){jQuery(this).bind("uploadifySelectOnce",settings.onSelectOnce);}
jQuery(this).bind("uploadifyQueueFull",{'action':settings.onQueueFull},function(event,queueSizeLimit){if(event.data.action(event,queueSizeLimit)!==false){alert('您最多一次可选择 '+queueSizeLimit+' 张图片上传。')}});jQuery(this).bind("uploadifyCheckExist",{'action':settings.onCheck},function(event,checkScript,fileQueueObj,folder,single){var postData=new Object();postData=fileQueueObj;postData.folder=pagePath+folder;if(single){for(var ID in fileQueueObj){var singleFileID=ID;}}
jQuery.post(checkScript,postData,function(data){for(var key in data){if(event.data.action(event,checkScript,fileQueueObj,folder,single)!==false){var replaceFile=confirm("Do you want to replace the file "+data[key]+"?");if(!replaceFile){document.getElementById(jQuery(event.target).attr('id')+'Uploader').cancelFileUpload(key,true,true);}}}
if(single){document.getElementById(jQuery(event.target).attr('id')+'Uploader').startFileUpload(singleFileID,true);}else{document.getElementById(jQuery(event.target).attr('id')+'Uploader').startFileUpload(null,true);}},"json");});jQuery(this).bind("uploadifyCancel",{'action':settings.onCancel},function(event,ID,fileObj,data,clearFast){if(event.data.action(event,ID,fileObj,data,clearFast)!==false){var fadeSpeed=(clearFast==true)?0:250;jQuery("#"+jQuery(this).attr('id')+ID).fadeOut(fadeSpeed,function(){jQuery(this).remove()});}});if(typeof(settings.onClearQueue)=='function'){jQuery(this).bind("uploadifyClearQueue",settings.onClearQueue);}
var errorArray=[];jQuery(this).bind("uploadifyError",{'action':settings.onError},function(event,ID,fileObj,errorObj){if(event.data.action(event,ID,fileObj,errorObj)!==false){var fileArray=new Array(ID,fileObj,errorObj);errorArray.push(fileArray);jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(" - "+errorObj.type+" Error");jQuery("#"+jQuery(this).attr('id')+ID).addClass('uploadifyError');}});jQuery(this).bind("uploadifyProgress",{'action':settings.onProgress,'toDisplay':settings.displayData},function(event,ID,fileObj,data){if(event.data.action(event,ID,fileObj,data)!==false){jQuery("#"+jQuery(this).attr('id')+ID+"ProgressBar").css('width',data.percentage+'%');if(event.data.toDisplay=='speed')displayData=' - '+data.speed+'KB/s';if(event.data.toDisplay==null)displayData=' ';jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(displayData);}});jQuery(this).bind("uploadifyComplete",{'action':settings.onComplete},function(event,ID,fileObj,response,data){if(event.data.action(event,ID,fileObj,unescape(response),data)!==false){jQuery("#"+jQuery(this).attr('id')+ID+" .percentage").text(' - Completed');jQuery("#"+jQuery(this).attr('id')+ID).fadeOut(1,function(){jQuery(this).remove()});}});if(typeof(settings.onAllComplete)=='function'){jQuery(this).bind("uploadifyAllComplete",{'action':settings.onAllComplete},function(event,uploadObj){if(event.data.action(event,uploadObj)!==false){errorArray=[];}});}});},uploadifySettings:function(settingName,settingValue,resetObject){var returnValue=false;jQuery(this).each(function(){if(settingName=='scriptData'&&settingValue!=null){if(resetObject){var scriptData=settingValue;}else{var scriptData=jQuery.extend(settings.scriptData,settingValue);}
var scriptDataString='';for(var name in scriptData){scriptDataString+='&'+name+'='+escape(scriptData[name]);}
settingValue=scriptDataString.substr(1);}
returnValue=document.getElementById(jQuery(this).attr('id')+'Uploader').updateSettings(settingName,settingValue);});if(settingValue==null){if(settingName=='scriptData'){var returnSplit=unescape(returnValue).split('&');var returnObj=new Object();for(var i=0;i<returnSplit.length;i++){var iSplit=returnSplit[i].split('=');returnObj[iSplit[0]]=iSplit[1];}
returnValue=returnObj;}}},uploadifyUpload:function(ID){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').startFileUpload(ID,false);});},uploadifyCancel:function(ID){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').cancelFileUpload(ID,true,true);});},uploadifyClearQueue:function(){jQuery(this).each(function(){document.getElementById(jQuery(this).attr('id')+'Uploader').clearFileUploadQueue(false);});}})})(jQuery);
function getProductPicCount(){var imgList=$("input[name='inp_imgurl']");var nImgCount=imgList.length;return nImgCount;}
function showAlbumImgList_syi(searchtype){var pagenum="";var strUrl="";if(searchtype=="2"){var nImgCount=getProductPicCount();strUrl="/syi/albumsselect-pageload.do?page="+pagenum+"&searchtype="+searchtype;if(searchtype=="2"){strUrl+="&imgCount="+nImgCount;}
$("#ifm_album_imglist").attr("src",strUrl);$("#div_album_imglist").modal({onConfirm:function(){return true;}});}else if(searchtype=="3"){var nImgCount=getProductPicCount();strUrl="/syi/albumsselect-pageload.do?page="+pagenum+"&searchtype="+searchtype;strUrl+="&imgCount="+nImgCount;$("#ifm_album_imglist").attr("src",strUrl);$("#div_album_imglist").modal({onConfirm:function(){return true;}});}else if(searchtype=="4"){var nImgCount=getProductPicCount();strUrl="/syi/albumsselect-pageload.do?page="+pagenum+"&searchtype="+searchtype;strUrl+="&imgCount="+nImgCount;$("#ifm_album_imglist").attr("src",strUrl);$("#div_album_imglist").modal({onConfirm:function(){return true;}});}
var ww=$(window).width();var wh=$(window).height();var cw=$('#modalContainer').width();var ch=$('#modalContainer').height();var top=wh>ch?(wh-ch)/2:10;var left=ww>cw?(ww-cw)/2:10;$('#modalContainer').css({left:left+'px',top:top+'px'});}
function showPhotoUploadWin_syi(searchtype){var strUrl="/syi/desc-photoupload.do";$("#div_desc_photoupload").modal({onConfirm:function(){return true;}});initUploadify_desc();$("#div_imgcontainer_upload").dragsort({dragSelector:"div",dragBetween:true,dragEnd:saveOrder_desc,placeHolderTemplate:"<li ><div></div></li>"});}
function saveOrder_desc(){}
function initUploadify(){g_simUploadLimit=0;jQuery("#fileupload").uploadify({'uploader':'/syi/js/photo/upload2/uploadalbums.swf?v='+(new Date()).getTime(),'script':'http://upload.dhgate.com/uploadfile','cancelImg':'/syi/js/photo/upload2/cancel.png','folder':'uploaddify','scriptAccess':'always','method':'GET','queueID':'productPicQueue','auto':false,'multi':true,'queueSizeLimit':8,'simUploadLimit':8,'sizeLimit':2*1024*1024,'hideButton':true,'wmode':'transparent','width':72,'height':23,'fileExt':'*.jpg;*.JPG;*.jpeg;*.JPEG;','fileDesc':'choose *.jpg/','onInit':function(){},'uploadifySettings':function(event){},'onError':function(event,ID,fileObj,errorObj){showErrorTip('div_imgcontainer','抱歉，图片上传失败，请稍后再试。');$("#pimgname_"+ID+" p").text("上传失败").css("color","red");$("#pimg_del_"+ID).show();$('#fileupload').uploadifyCancel(ID);return false;},'onOpen':function(event,ID,fileObj){},'onSelect':function(event,ID,fileObj){hideErrorTip('div_imgcontainer');if(validateOnSelect_syi(event,ID,fileObj,'2')){var functionname=jQuery('#functionname').val();var supplierid=jQuery('#supplierid').val();var imagebannername=jQuery('#imagebannername').val();var imgtoken=jQuery('#imgtoken').val();jQuery('#fileupload').uploadifySettings('scriptData',{'functionname':functionname,'supplierid':supplierid,'imagebannername':imagebannername,'token':imgtoken});jQuery('#fileupload').uploadifyUpload();}else{return false;}},'onQueueFull':function(event,queueSizeLimit){return false;},'onSelectOnce':function(){},'onComplete':function(event,ID,fileObj,response,data){if(response!=""){var s_value=window.eval("("+response+")");if(s_value.result=='1'){var imgmd5=s_value.l_imgmd5;var imgurl=s_value.l_imgurl;var imgsize=s_value.l_imgsize;var localfilename=s_value.l_localfilename;addImg_upload_queue(imgmd5,imgsize,imgurl,localfilename,'2',ID);}else if(s_value.result=='2'){var imgmd5=s_value.l_imgmd5;var imgurl=s_value.l_imgurl;var imgsize=s_value.l_imgsize;var localfilename=s_value.l_localfilename;addImg_upload_queue(imgmd5,imgsize,imgurl,localfilename,'2',ID);}}},'onAllComplete':function(event,queueId,fileObj,response,data){}});}
function initUploadify_description(fileupload_id){return;}
function initUploadify_desc(){var fileupload_id='';g_simUploadLimit=0;jQuery("#puw_fileupload").uploadify({'uploader':'/syi/js/photo/upload2/uploadalbums.swf?v='+(new Date()).getTime(),'script':'http://upload.dhgate.com/uploadfile','cancelImg':'/syi/js/photo/upload2/cancel.png','folder':'uploaddify','scriptAccess':'always','method':'GET','queueID':'descPicQueue','auto':false,'multi':true,'queueSizeLimit':8,'simUploadLimit':8,'sizeLimit':2*1024*1024,'hideButton':true,'wmode':'transparent','width':70,'height':23,'fileExt':'*.jpg;*.JPG;*.jpeg;*.JPEG;','fileDesc':'choose *.jpg/','onInit':function(){},'uploadifySettings':function(event){},'onError':function(event,ID,fileObj,errorObj){showInfoTip_photo('div_imgdescErrTip','抱歉，图片上传失败，请稍后再试。');var idStr=$("input[name='pu_state'][value='"+ID+"']").attr("id");var indexStr=idStr.replace("pu_state_","");$("#pu_imgshowname_"+indexStr).hide();$("#descPicQueue_"+indexStr).hide();$("#pu_img_del_"+indexStr).show();return false;},'onOpen':function(event,ID,fileObj){},'onSelect':function(event,ID,fileObj){var indexS=getCurrentOperIndex();if(indexS==null||indexS==''){showInfoTip_photo('div_imgdescErrTip','每次您最多可上传 8 张产品图片。');return false;}else{}
if(validateOnSelect_puw(event,ID,fileObj)){var functionname=jQuery('#functionname').val();var supplierid=jQuery('#supplierid').val();var imagebannername=jQuery('#imagebannername').val();var imgtoken=jQuery('#imgtoken').val();jQuery('#puw_fileupload').uploadifySettings('scriptData',{'functionname':functionname,'supplierid':supplierid,'imagebannername':imagebannername,'token':imgtoken});jQuery('#puw_fileupload').uploadifyUpload();}else{return false;}},'onQueueFull':function(event,queueSizeLimit){return false;},'onComplete':function(event,ID,fileObj,response,data){if(response!=""){var s_value=window.eval("("+response+")");if(s_value.result=='1'||s_value.result=='2'){var idStr=$("input[name='pu_state'][value='"+ID+"']").attr("id");var indexStr=idStr.replace("pu_state_","");var imgmd5=s_value.l_imgmd5;var imgurl=s_value.l_imgurl;var imgsize=s_value.l_imgsize;var localfilename=s_value.l_localfilename;addImg_upload_puw(imgmd5,imgsize,imgurl,localfilename,indexStr);}}},'onAllComplete':function(event,queueId,fileObj,response,data){}});}
function saveUploadLog(imgmd5,imgurl,imgsize){var type='1';var supplierid=jQuery('#supplierid').val();var strUrl='/mydhgate/albums/albumsajax.do?act=saveUploadLog&isblank=true';var strData="imgmd5="+imgmd5+"&imgurl="+imgurl+"&imgsize="+imgsize+"&supplierid="+supplierid+"&type="+type;var oError=null;jQuery.ajax({async:true,dataType:"json",type:"POST",url:strUrl,data:strData,success:function(data){if(data!=null){if(data.result=="1"){}}},error:function(){return false;}});}
function isRepeatImage(imgmd5,imgsize){if(!imgmd5||!imgsize)return;var result="0";var strUrl='/mydhgate/albums/albumsajax.do?act=isRepeatImage&isblank=true';var strData="imgmd5="+imgmd5+"&imgsize="+imgsize;var oError=null;jQuery.ajax({async:true,dataType:"json",type:"POST",url:strUrl,data:strData,success:function(data){if(data!=null){if(data.result=="1"){result=data.result;}}},error:function(data,state,e){result="0";}});return result;}
function delhtml(index){jQuery('#imgshowurl_'+index).attr("src","http://image.dhgate.com/nophoto.jpg");jQuery('#imgurl_'+index).val("");jQuery('#imgmd5_'+index).val("");jQuery('#localfilename_'+index).val("");jQuery('#imgsize_'+index).val("");jQuery('#button_'+index).hide();hideErrorTip('div_imgcontainer');}
function validateOnSelect_syi(event,ID,fileObj,search_type){var tipid='div_imgcontainer';if(search_type=='3'){tipid='featureshtml';}
if(search_type=='2'){var size=getImgContainSize();if(size==0){showErrorTip(tipid,'您最多可上传 8 张产品图片。');return false;}}
if(fileObj.size>2*1024*1024){showErrorTip(tipid,'您选取的图片中有大于2M的图片');return false;}
if((fileObj.type).toLowerCase()==".jpg"||(fileObj.type).toLowerCase()==".jpeg"){return true;}else{showErrorTip(tipid,'您选取的图片中有非jpg格式的图片');return false;}
return true;}
function validateOnSelect_puw(event,ID,fileObj){var tipid='div_imgdescErrTip';var size=getCurrentImgSumPuw();if(size>=8){showInfoTip_photo(tipid,'每次您最多可上传 8 张产品图片。');return false;}
if(fileObj.size>2*1024*1024){showInfoTip_photo(tipid,'您选取的图片中有大于2M的图片');return false;}
if((fileObj.type).toLowerCase()==".jpg"||(fileObj.type).toLowerCase()==".jpeg"){return true;}else{showErrorTip(tipid,'您选取的图片中有非jpg格式的图片');return false;}
return true;}
function delUploadInfo(){jQuery.modal.close();jQuery('#popcon').html("");};
(function($){$.fn.dragsort=function(options){var opts=$.extend({},$.fn.dragsort.defaults,options);var lists=[];var list=null,lastPos=null;if(this.selector)
$("head").append("<style type='text/css'>"+(this.selector.split(",").join(" "+opts.dragSelector+",")+" "+opts.dragSelector)+" { cursor: pointer; }</style>");this.each(function(i,cont){if($(cont).is("table")&&$(cont).children().size()==1&&$(cont).children().is("tbody"))
cont=$(cont).children().get(0);var newList={draggedItem:null,placeHolderItem:null,pos:null,offset:null,offsetLimit:null,scroll:null,container:cont,init:function(){$(this.container).attr("data-listIdx",i).mousedown(this.grabItem).find(opts.dragSelector).css("cursor","pointer");$(this.container).children(opts.itemSelector).each(function(j){$(this).attr("data-itemIdx",j);});},grabItem:function(e){if(e.which!=1||$(e.target).is(opts.dragSelectorExclude))
return;var elm=e.target;while(!$(elm).is("[data-listIdx='"+$(this).attr("data-listIdx")+"'] "+opts.dragSelector)){if(elm==this)return;elm=elm.parentNode;}
if(list!=null&&list.draggedItem!=null)
list.dropItem();$(e.target).css("cursor","move");list=lists[$(this).attr("data-listIdx")];list.draggedItem=$(elm).closest(opts.itemSelector);var mt=parseInt(list.draggedItem.css("marginTop"));var ml=parseInt(list.draggedItem.css("marginLeft"));list.offset=list.draggedItem.offset();list.offset.top=e.pageY-list.offset.top+(isNaN(mt)?0:mt)-1;list.offset.left=e.pageX-list.offset.left+(isNaN(ml)?0:ml)-1;if(!opts.dragBetween){var containerHeight=$(list.container).outerHeight()==0?Math.max(1,Math.round(0.5+$(list.container).children(opts.itemSelector).size()*list.draggedItem.outerWidth()/$(list.container).outerWidth()))*list.draggedItem.outerHeight():$(list.container).outerHeight();list.offsetLimit=$(list.container).offset();list.offsetLimit.right=list.offsetLimit.left+$(list.container).outerWidth()-list.draggedItem.outerWidth();list.offsetLimit.bottom=list.offsetLimit.top+containerHeight-list.draggedItem.outerHeight();}
var h=list.draggedItem.height();var w=list.draggedItem.width();var orig=list.draggedItem.attr("style");list.draggedItem.attr("data-origStyle",orig?orig:"");if(opts.itemSelector=="tr"){list.draggedItem.children().each(function(){$(this).width($(this).width());});list.placeHolderItem=list.draggedItem.clone().attr("data-placeHolder",true);list.draggedItem.after(list.placeHolderItem);list.placeHolderItem.children().each(function(){$(this).css({borderWidth:0,width:$(this).width()+1,height:$(this).height()+1}).html("&nbsp;");});}else{list.draggedItem.after(opts.placeHolderTemplate);list.placeHolderItem=list.draggedItem.next().css({height:h,width:w}).attr("data-placeHolder",true);}
list.draggedItem.css({position:"absolute",opacity:0.8,"z-index":999,height:h,width:w});$(lists).each(function(i,l){l.createDropTargets();l.buildPositionTable();});list.scroll={moveX:0,moveY:0,maxX:$(document).width()-$(window).width(),maxY:$(document).height()-$(window).height()};list.scroll.scrollY=window.setInterval(function(){if(opts.scrollContainer!=window){$(opts.scrollContainer).scrollTop($(opts.scrollContainer).scrollTop()+list.scroll.moveY);return;}
var t=$(opts.scrollContainer).scrollTop();if(list.scroll.moveY>0&&t<list.scroll.maxY||list.scroll.moveY<0&&t>0){$(opts.scrollContainer).scrollTop(t+list.scroll.moveY);list.draggedItem.css("top",list.draggedItem.offset().top+list.scroll.moveY+1);}},10);list.scroll.scrollX=window.setInterval(function(){if(opts.scrollContainer!=window){$(opts.scrollContainer).scrollLeft($(opts.scrollContainer).scrollLeft()+list.scroll.moveX);return;}
var l=$(opts.scrollContainer).scrollLeft();if(list.scroll.moveX>0&&l<list.scroll.maxX||list.scroll.moveX<0&&l>0){$(opts.scrollContainer).scrollLeft(l+list.scroll.moveX);list.draggedItem.css("left",list.draggedItem.offset().left+list.scroll.moveX+1);}},10);list.setPos(e.pageX,e.pageY);$(document).bind("selectstart",list.stopBubble);$(document).bind("mousemove",list.swapItems);$(document).bind("mouseup",list.dropItem);if(opts.scrollContainer!=window)
$(window).bind("DOMMouseScroll mousewheel",list.wheel);return false;},setPos:function(x,y){var top=y-this.offset.top;var left=x-this.offset.left;if(!opts.dragBetween){top=Math.min(this.offsetLimit.bottom,Math.max(top,this.offsetLimit.top));left=Math.min(this.offsetLimit.right,Math.max(left,this.offsetLimit.left));}
this.draggedItem.parents().each(function(){if($(this).css("position")!="static"&&(!$.browser.mozilla||$(this).css("display")!="table")){var offset=$(this).offset();top-=offset.top;left-=offset.left;return false;}});if(opts.scrollContainer==window){y-=$(window).scrollTop();x-=$(window).scrollLeft();y=Math.max(0,y-$(window).height()+5)+Math.min(0,y-5);x=Math.max(0,x-$(window).width()+5)+Math.min(0,x-5);}else{var cont=$(opts.scrollContainer);var offset=cont.offset();y=Math.max(0,y-cont.height()-offset.top)+Math.min(0,y-offset.top);x=Math.max(0,x-cont.width()-offset.left)+Math.min(0,x-offset.left);}
list.scroll.moveX=x==0?0:x*opts.scrollSpeed/Math.abs(x);list.scroll.moveY=y==0?0:y*opts.scrollSpeed/Math.abs(y);this.draggedItem.css({top:top,left:left});},wheel:function(e){if(($.browser.safari||$.browser.mozilla)&&list&&opts.scrollContainer!=window){var cont=$(opts.scrollContainer);var offset=cont.offset();if(e.pageX>offset.left&&e.pageX<offset.left+cont.width()&&e.pageY>offset.top&&e.pageY<offset.top+cont.height()){var delta=e.detail?e.detail*5:e.wheelDelta/-2;cont.scrollTop(cont.scrollTop()+delta);e.preventDefault();}}},buildPositionTable:function(){var item=this.draggedItem==null?null:this.draggedItem.get(0);var pos=[];$(this.container).children(opts.itemSelector).each(function(i,elm){if(elm!=item){var loc=$(elm).offset();loc.right=loc.left+$(elm).width();loc.bottom=loc.top+$(elm).height();loc.elm=elm;pos.push(loc);}});this.pos=pos;},dropItem:function(){if(list.draggedItem==null)
return;$(list.container).find(opts.dragSelector).css("cursor","pointer");list.placeHolderItem.before(list.draggedItem);if($.browser.msie&&$.browser.version=="8.0"){list.draggedItem.attr("style",list.draggedItem.attr("data-origStyle")).removeAttr('style');}else{list.draggedItem.attr("style",list.draggedItem.attr("data-origStyle")).removeAttr("data-origStyle");}
list.placeHolderItem.remove();$("[data-dropTarget]").remove();window.clearInterval(list.scroll.scrollY);window.clearInterval(list.scroll.scrollX);var changed=false;$(lists).each(function(){$(this.container).children(opts.itemSelector).each(function(j){if(parseInt($(this).attr("data-itemIdx"))!=j){changed=true;$(this).attr("data-itemIdx",j);}});});if(changed)opts.dragEnd.apply(list.draggedItem);list.draggedItem=null;$(document).unbind("selectstart",list.stopBubble);$(document).unbind("mousemove",list.swapItems);$(document).unbind("mouseup",list.dropItem);if(opts.scrollContainer!=window)
$(window).unbind("DOMMouseScroll mousewheel",list.wheel);return false;},stopBubble:function(){return false;},swapItems:function(e){if(list.draggedItem==null)
return false;list.setPos(e.pageX,e.pageY);var ei=list.findPos(e.pageX,e.pageY);var nlist=list;for(var i=0;ei==-1&&opts.dragBetween&&i<lists.length;i++){ei=lists[i].findPos(e.pageX,e.pageY);nlist=lists[i];}
if(ei==-1||$(nlist.pos[ei].elm).attr("data-placeHolder"))
return false;if(lastPos==null||lastPos.top>list.draggedItem.offset().top||lastPos.left>list.draggedItem.offset().left)
$(nlist.pos[ei].elm).before(list.placeHolderItem);else
$(nlist.pos[ei].elm).after(list.placeHolderItem);$(lists).each(function(i,l){l.createDropTargets();l.buildPositionTable();});lastPos=list.draggedItem.offset();return false;},findPos:function(x,y){for(var i=0;i<this.pos.length;i++){if(this.pos[i].left<x&&this.pos[i].right>x&&this.pos[i].top<y&&this.pos[i].bottom>y)
return i;}
return-1;},createDropTargets:function(){if(!opts.dragBetween)
return;$(lists).each(function(){var ph=$(this.container).find("[data-placeHolder]");var dt=$(this.container).find("[data-dropTarget]");if(ph.size()>0&&dt.size()>0)
dt.remove();else if(ph.size()==0&&dt.size()==0)
$(this.container).append(list.placeHolderItem.clone().removeAttr("data-placeHolder").attr("data-dropTarget",true));});}};newList.init();lists.push(newList);});return this;};$.fn.dragsort.defaults={itemSelector:"li",dragSelector:"li",dragSelectorExclude:"input, textarea, a[href]",dragEnd:function(){},dragBetween:false,placeHolderTemplate:"<li>&nbsp;</li>",scrollContainer:window,scrollSpeed:5};})(jQuery);
var g_strDHGate_ImageServer="http://image.dhgate.com";var DHDealImage=(function(){var self={};self.getThumbnails=function(path){if(path===null){return"";}
if(path.indexOf("f2/albu")==0){return g_strDHGate_ImageServer+"/100x100/"+path;}else if(path.indexOf("albu_")==0){return g_strDHGate_ImageServer+"/"+path+"/1.thumb.jpg";}else if(path.indexOf("upload")==0){var extensionIndex=path.lastIndexOf(".");return g_strDHGate_ImageServer+"/"+path.substring(0,extensionIndex)+".thumb.gif";}
return path;};self.get0x0=function(path){if(path===null){return"";}
if(path.indexOf("f2/albu")==0){return g_strDHGate_ImageServer+"/0x0/"+path;}else if(path.indexOf("albu_")==0){return g_strDHGate_ImageServer+"/"+path+"/1.0x0.jpg";}else if(path.indexOf("upload")==0){return path;}
return path;};self.get260x260=function(path){if(path===null){return"";}
if(path.indexOf("f2/albu")==0){return g_strDHGate_ImageServer+"/260x260/"+path;}else if(path.indexOf("albu_")==0){return g_strDHGate_ImageServer+"/"+path+"/1.260x260.jpg";}else if(path.indexOf("upload")==0){var extensionIndex=path.lastIndexOf(".");return g_strDHGate_ImageServer+"/"+path.substring(0,extensionIndex)+".260x260.jpg";}
return path;};self.get0x0preview=function(path){if(path===null){return"";}
if(path.indexOf("f2/albu")==0){return g_strDHGate_ImageServer+"/0x0p/"+path;}else if(path.indexOf("albu_")==0){return g_strDHGate_ImageServer+"/"+path+"/temp1.0x0.jpg";}else if(path.indexOf("upload")==0){self.get0x0(path);}
return path;};return self;})();if(!window.G_EVENT){window.G_EVENT=$({})}
var DhgateConsole={error:function(error){var errorStr=JSON.stringify(error);$.ajax({type:"POST",url:"/mydhgate/product/ajaxerrorlog.do",data:{error:errorStr,isblank:true},dataType:"json",error:function(){}});},info:function(msg){var logUL$=$('#logUL');if(logUL$.length==0)return;logUL$.append('<li>'+msg+'</li>');},clear:function(){var logUL$=$('#logUL');if(logUL$.length==0)return;logUL$.empty();}};$.ajaxSetup({dataType:'json',timeout:15000,type:'POST',cache:false,error:function(data,status,e){if(status!='parsererror'){DhgateConsole.error({data:data,status:status,e:e});}}});var g_nImgMaxIndex=-1;function getProductImageDataForSubmit(){DhgateConsole.info('获取图片数据');var imgList=null;var imgUrlList=$("input[name='inp_imgurl']");var imgMD5List=$("input[name='inp_imgmd5']");var localFileNameList=$("input[name='inp_localfilename']");if(imgUrlList.length==0||imgUrlList[0].value==""){showErrorTip("div_imgcontainer",msg_getProductImageDataForSubmit_html);}else{var nImgCount=imgUrlList.length;var imgIndex=0;for(var i=0;i<nImgCount;i++){var strImgUrl=imgUrlList[i].value;var strImgMD5=imgMD5List[i].value;if(strImgUrl!=""&&strImgMD5!=""){var oImg=new GoodsImageVO();oImg.sequence=imgIndex;oImg.fileurl=strImgUrl;oImg.imgmd5=strImgMD5;if(imgList==null){imgList=[];}
imgList[imgIndex++]=oImg;}}}
return imgList;}
function getProductImageDataForSubmitNoTip(){DhgateConsole.info('获取图片数据');var imgList=null;var imgUrlList=$("input[name='inp_imgurl']");var imgMD5List=$("input[name='inp_imgmd5']");var localFileNameList=$("input[name='inp_localfilename']");if(imgUrlList.length==0||imgUrlList[0].value==""){}else{var nImgCount=imgUrlList.length;var imgIndex=0;for(var i=0;i<nImgCount;i++){var strImgUrl=imgUrlList[i].value;var strImgMD5=imgMD5List[i].value;if(strImgUrl!=""&&strImgMD5!=""){var oImg=new GoodsImageVO();oImg.sequence=imgIndex;oImg.fileurl=strImgUrl;oImg.imgmd5=strImgMD5;if(imgList==null){imgList=[];}
imgList[imgIndex++]=oImg;}}}
return imgList;}
function hideImgUploadSelect(){$('#div_selectupload_type').hide();}
function addImgUI(){if($("#div_imgcontaine_init").length>0){$("#div_imgcontaine_init").hide();$("#div_imgcontainer").show();}
var imgList=$("input[name='inp_imgurl']");if(imgList.length>7){return;}else{var randomStr=Math.round((Math.random())*10000);var strImgUI=createImgUI_syi(randomStr);$("#div_imgcontainer").append(strImgUI);var inp_imgbox_index=$('#inp_imgbox_index').val();if(inp_imgbox_index!=''){inp_imgbox_index=parseInt(inp_imgbox_index)+1;}else{inp_imgbox_index=0;}
$('#inp_imgbox_index').val(inp_imgbox_index);}}
function addImgUI_queue(queue_suffix){if($("#div_imgcontaine_init").length>0){$("#div_imgcontaine_init").hide();$("#div_imgcontainer").show();}
var imgList=$("input[name='inp_imgurl']");if(g_nImgMaxIndex==-1){g_nImgMaxIndex=imgList.length;}
if(imgList.length>7){return;}else{var strImgUI=createImgUI_syi(queue_suffix);$("#div_imgcontainer").append(strImgUI);if(getProductPicCount()=='1'){setMainPicBoxCss();}
var inp_imgbox_index=$('#inp_imgbox_index').val();if(inp_imgbox_index!=''){inp_imgbox_index=parseInt(inp_imgbox_index)+1;}else{inp_imgbox_index=0;}
$('#inp_imgbox_index').val(inp_imgbox_index);}}
function setImgData(nIndex,strImgPath,strImgUrl,strImgMD5,strImgName){var strImgNameTemp='';var limitSize=isHasChina(strImgName);var strImgNametitle=strImgName;strImgName=strImgName.replace(".jpg","");if(strImgName.length>limitSize+1){strImgNameTemp=strImgName.substr(0,limitSize);strImgNameTemp=strImgNameTemp+'...';}else{strImgNameTemp=strImgName;}
$("#pimg_"+nIndex).attr("src",strImgPath);$("#picurl_"+nIndex).val(strImgUrl);$("#md5_"+nIndex).val(strImgMD5);$("#pimgname_"+nIndex).attr("title",strImgNametitle);$("#pimgname_"+nIndex+" p").html(strImgNameTemp);$("#pimg_del_"+nIndex).show();hideErrorTip('div_imgcontainer');setImgContainSize();}
function setImgContainSize(){var imgList=$("input[name='inp_imgmd5']");var imgListLength=imgList.length;var size=0;size=8-imgListLength;$("#photonum_b").html(size);}
function getImgContainSize(){var imgList=$("input[name='inp_imgmd5']");var imgListLength=imgList.length;var size=0;size=8-imgListLength;return size;}
function validateIsExist(imgmd5){var imgList=$("input[name='inp_imgmd5']");nImgListCount=imgList.length;if(nImgListCount>0){for(var i=0;i<nImgListCount;i++){var oImgMD5Item=imgList[i];if(oImgMD5Item.value==imgmd5){return true;}}}
return false;}
function isHasChina(str){if(/.*[\u4e00-\u9fa5]+.*$/.test(str))
{return 4;}
return 8;}
function setImgData_upload(nIndex,imgmd5,imgsize,imgurl,localfilename){var strImgPath=DHDealImage.getThumbnails(imgurl);var localfilename=decodeURIComponent(localfilename);var limitSize=isHasChina(localfilename);var strImgNameTemp='';var localfilenametitle=localfilename;localfilename=localfilename.replace(".jpg","");if(localfilename.length>limitSize+1){strImgNameTemp=localfilename.substr(0,limitSize);strImgNameTemp=strImgNameTemp+'...';}else{strImgNameTemp=localfilename;}
$("#pimg_"+nIndex).attr("src",strImgPath);$("#picurl_"+nIndex).val(imgurl);$("#md5_"+nIndex).val(imgmd5);$("#pictype_"+nIndex).val('2');$("#pimgname_"+nIndex).attr("title",localfilenametitle);$("#pimgname_"+nIndex+" p").html(strImgNameTemp);$("#pimg_del_"+nIndex).show();$("#btn_imgedit_"+nIndex).removeClass("input2").addClass("input1");hideErrorTip('div_imgcontainer');setImgContainSize();if(getProductPicCount()=='1'){setMainPicBoxCss();}}
function hideErrorTip_syi(id){var errorInfo=$("#"+id+"ErrTip");if(errorInfo.length>0){errorInfo.hide();}}
function showInfoTip_photo(id,info){$("#"+id).html(info).show();}
function hideInfoTip_photo(id){if($("#"+id).length>0){$("#"+id).hide();}}
function setMainPicBoxCss(){var imgList=$("input[name='inp_imgmd5']");var nImgCount=imgList.length;for(var i=0;i<nImgCount;i++){var md5_id=$("input[name='inp_imgmd5']")[i].id;var div_id=md5_id.replace("md5_","");if(i==0){$("#div_imgcontainer_"+div_id).addClass('addpiccolor');}else{$("#div_imgcontainer_"+div_id).removeClass('addpiccolor');}}}
function deleteImgUI(nIndex){var msg='';var bNeedCheckFirst=false;var imgList=$("input[name='inp_imgmd5']");var nImgCount=imgList.length;if(nImgCount==1){showErrorTip("div_imgcontainer",msg_getProductImageDataForSubmit_html);}else{hideErrorTip('div_imgcontainer');if(imgList[0]==$("#md5_"+nIndex)[0]){if(imgList[1].value!=""){}}}
var md5=$("#md5_"+nIndex).val();if(md5){G_EVENT.trigger('upload-img-delete',{md5:md5});}
$("#div_imgcontainer_"+nIndex).remove();setImgContainSize();setMainPicBoxCss();if(getProductPicCount()=='0'){$("#div_imgcontaine_init").show();$("#div_imgcontainer").hide();}}
function createImgUI_syi(nIndex){var arrHTML=[];arrHTML[arrHTML.length]='<div id="div_imgcontainer_'+nIndex+'"  class="syi-upload-list" >';arrHTML[arrHTML.length]='<span class="img">';arrHTML[arrHTML.length]='<img id="pimg_'+nIndex+'" src="'+g_strDHGate_ImageServer+'/dhs/mos/image/syi/new/no-photo-m2.jpg" width="80" height="80"/>';arrHTML[arrHTML.length]='</span>';arrHTML[arrHTML.length]='<span id="div_imgupsel_'+nIndex+'" onmouseout="hideImgUploadSelect()">';arrHTML[arrHTML.length]='<span id="productPicQueue_'+nIndex+'\"></span>';arrHTML[arrHTML.length]='<span id="pimgname_'+nIndex+'" style="cursor: pointer; width:88px; height:20px; text-align:right;" title="12343423aaa.jpg" ><p>&nbsp;</p></span>';arrHTML[arrHTML.length]='<span id="pimg_del_'+nIndex+'" class="pro-tit-del" style="cursor: pointer; height:20px; text-align:right;display:none;"><span><a href="#" onclick="deleteImgUI(\''+nIndex+'\')" >删除</a></span></span>';arrHTML[arrHTML.length]='<input type="hidden" id="picurl_'+nIndex+'" name="inp_imgurl" value=""/>';arrHTML[arrHTML.length]='<input type="hidden" id="md5_'+nIndex+'" name="inp_imgmd5"  value=""/>';arrHTML[arrHTML.length]='<input type="hidden" id="pictype_'+nIndex+'" name="inp_pictype"  value=""/>';arrHTML[arrHTML.length]='</span></div>';return arrHTML.join("");}
var g_curIndex=-1;function changeImg(searchtype,imgIndex){g_curIndex=imgIndex;$.dhgateTools.confirm({onConfirm:function(){if($("#inp_adddimgbya").attr("checked")){$.modal.close();showAlbumImgList(searchtype,imgIndex);}else{$.modal.close();showUploadWin(1,imgIndex,'');}
return false;},title:mes_changeImg_title,message:["<input id=\"inp_adddimgbya\" name=\"inp_adddimg\" type=\"radio\" value=\"1\"  checked >"+mes_changeImg_html,"<input name=\"inp_adddimg\" type=\"radio\" value=\"0\" >"+mes_inp_adddimg_local]});}
function addProductImg(searchtype,imgIndex){g_curIndex=imgIndex;$.dhgateTools.confirm({onConfirm:function(){if($("#inp_adddimgbya").attr("checked")){$.modal.close();showAlbumImgList(searchtype,imgIndex);}else{$.modal.close();showUploadWin(searchtype,imgIndex,'');}
return false;},title:mes_addProductImg_title,message:["<input id=\"inp_adddimgbya\" name=\"inp_adddimg\" type=\"radio\" value=\"1\"  checked >"+msg_addProductImg_html,"<input name=\"inp_adddimg\" type=\"radio\" value=\"0\" >"+mes_inp_adddimg_local]});}
function onSearchwindowid(tdalbumswindowid,searchtype){var pagenum='';var nImgCount=getProductPicCount();var strUrl="/syi/albumsselect-pageload.do?page="+pagenum+"&searchtype="+searchtype;strUrl+="&imgCount="+nImgCount;strUrl+="&tdalbumswindowid="+tdalbumswindowid;changeAlbumsListUrl(strUrl);}
function onSearchname(searchtype){var oWin=$('#ifm_album_imglist').contents();var inputalbumsname=oWin.find("#inputalbumsname").val();var nImgCount=getProductPicCount();if(inputalbumsname==null||inputalbumsname==""){return false;}else{var nPage;if(nPage=null)nPage=1;var strUrl="/syi/albumsselect-search.do?tdalbumswindowid="+
oWin.find("#tdalbumswindowid").val()+"&page="+''+"&searchtype="+searchtype+"&imgCount="+nImgCount+"&inputalbumsname="+encodeURIComponent(encodeURIComponent(inputalbumsname));$("#ifm_album_imglist").attr("src",strUrl);}}
function changeAlbumsListUrl(strUrl){$("#ifm_album_imglist").attr("src",strUrl);}
function toSelectedImg(oCheckbox_id,searchtype){var oWin=$('#ifm_album_imglist').contents().find("#div_photo_list");var oCheckbox=oWin.find("#"+oCheckbox_id);if(oCheckbox.attr("checked")){oCheckbox.attr("checked",false);}else{oCheckbox.attr("checked",true);}
selectedImg(oCheckbox_id,searchtype);}
function selectedImg(oCheckbox_id,searchtype){var strImgId=oCheckbox_id.replace("r_","");var oWin=$('#ifm_album_imglist').contents().find("#div_photo_list");var oCheckbox=oWin.find("#"+oCheckbox_id);if(oCheckbox.attr("checked")==true){var imgList=$("input[name='inp_imgmd5']");var strMD5=oWin.find("#md5_"+strImgId).val();var cList=oWin.find("[name=itemArr]");var nImgCount=0;var nImgListCount=0;var cssflag=true;var nSelectCount=0;if(cList.length>1){for(var i=0;i<cList.length;i++){if(cList[i].checked){nSelectCount++;}}}
if(searchtype=='2'){nImgListCount=imgList.length;if(nImgListCount>0){for(var i=0;i<nImgListCount;i++){var oImgMD5Item=imgList[i];if(oImgMD5Item.value==strMD5){oCheckbox.attr("checked",false);cssflag=false;alert('您选中的相册图片已经是产品图片，请选择其他图片!');return;}}}
nImgCount=imgList.length;if(nImgCount==8||(nImgCount+nSelectCount)>8){alert('您选中要添加的产品图片已经达到8张，不能再选!');oCheckbox.attr("checked",false);cssflag=false;}}else if(searchtype=='3'){}
if(cssflag){oWin.find("#l_"+strImgId).attr("class","selected");}else{oWin.find("#l_"+strImgId).attr("class","");}
var size=$(window.frames["ifm_album_imglist"].document).find("#numTip").html();var num=parseInt(size);if(searchtype=='2'){if(num!=0){num--;$(window.frames["ifm_album_imglist"].document).find("#numTip").html(num);}}else if(searchtype=='3'){num++;$(window.frames["ifm_album_imglist"].document).find("#numTip").html(num);}}else{oWin.find("#l_"+strImgId).attr("class","");var size=$(window.frames["ifm_album_imglist"].document).find("#numTip").html();var num=parseInt(size);if(searchtype=='2'){num++;$(window.frames["ifm_album_imglist"].document).find("#numTip").html(num);}else if(searchtype=='3'){num--;$(window.frames["ifm_album_imglist"].document).find("#numTip").html(num);}}}
function modifyImg(oBtn,searchtype,nImgIndex){var oWin=$(window.frames["ifm_album_imglist"].document).find("#div_photo_list");var cList=oWin.find("input[name=itemArr]");if(cList.length>1){if(searchtype==1){for(var i=0;i<cList.length;i++){if(cList[i].checked){if(confirm(mes_modifyImg_confirm)){var strImgId=cList[i].value;var strImgPath=oWin.find("#thumb_"+strImgId).attr("src");var strImgUrl=oWin.find("#picurl_"+strImgId).val();var strMD5=oWin.find("#md5_"+strImgId).val();var strImgName=oWin.find("#picname_"+strImgId).val();var msg="";var bContinue=true;var imgList=$("input[name='inp_imgurl']");if(imgList[0]==$("#picurl_"+nImgIndex)[0]){var strUrl="/mydhgate/product/ProductAjaxAction.do?act=doublefimg&isblank=true&md5="+strMD5;var productId=$("#productid").val();if(productId!=null&&productId!=""){strUrl+="&pid="+productId;}
$.ajax({type:"GET",url:strUrl,data:"",success:function(data){if(data.result!="1"){msg=data.msg;bContinue=false;}
if(msg!=""){alert(msg);}
if(bContinue){setImgData(nImgIndex,strImgPath,strImgUrl,strMD5,strImgName);}},async:false,dataType:"json",error:function(){oError={error:"data",msg:mes_error_msg};bContinue=false;}});}else{setImgData(nImgIndex,strImgPath,strImgUrl,strMD5,strImgName);}}
break;}}}}}
function addImg(oBtn,searchtype){var oWin=$(document.getElementById('ifm_album_imglist')).contents().find("#div_photo_list");var cList=oWin.find(":checked[name=itemArr]");if(cList==null||cList.length<1){alert('当前未选取图片！');return;}
var nImgCount=0;var nSelectCount=0;var nFirstHideImg=-1;if(cList.length>0){var nAddCount=0;if(searchtype=='3'){var urls=new Array();for(var i=0;i<cList.length;i++){var strImgId=cList[i].value;var strImgUrl=oWin.find("#picurl_"+strImgId).val();strImgUrl=DHDealImage.get0x0preview(strImgUrl);urls[i]={src:strImgUrl};}
$.pub('execCommand.edite',['insertImage',urls]);}else if(searchtype=='2'){for(var i=0;i<cList.length;i++){var strImgId=cList[i].value;var strImgUrl=oWin.find("#thumb_"+strImgId).attr("src");var strImgId=cList[i].value;var strMD5=oWin.find("#md5_"+strImgId).val();var strImgName=oWin.find("#picname_"+strImgId).val();var msg="";var nImgIndex=null;addImgUI();var currentImgList=$("input[name='inp_imgmd5']");var currentLength=nImgIndex=currentImgList[currentImgList.length-1].id.replace("md5_","");setImgData(nImgIndex,strImgUrl,oWin.find("#picurl_"+strImgId).val(),strMD5,strImgName);if(getProductPicCount()=='1'){setMainPicBoxCss();}
nAddCount++;}}
if(2==searchtype&&nAddCount>0){var imgList=$("input[name='inp_imgurl']");nImgCount=imgList.length;if(imgList[imgList.length-1].value==""){nImgCount--;}
oWin.find("#numTip").html('还可以添加'+(8-nImgCount)+'个产品图片');for(var i=0;i<cList.length;i++){cList[i].checked=false;}}
var ggs={url:oWin.find("#picurl_"+cList[0].value).val(),md5:oWin.find("#md5_"+cList[0].value).val()}
G_EVENT.trigger("setGoogleShoppingPicFromAlbum",[{searchtype:searchtype,url:ggs.url,src:DHDealImage.getThumbnails(ggs.url),md5:ggs.md5}]);}
closeSimpleModel();}
function closeSimpleModel(){$.modal.close();}
function addImg_upload(imgmd5,imgsize,imgurl,localfilename,searchtype){if(2==searchtype){var imgList=$("input[name='inp_imgmd5']");nFirstHideImg=imgList.length;var msg="";var bContinue=true;var nImgIndex=null;var oItem=imgList[imgList.length-1];var nImgIndex=$('#inp_imgbox_index').val();if(nFirstHideImg==10000){var strUrl="/mydhgate/product/ProductAjaxAction.do?act=doublefimg&isblank=true&md5="+strMD5;var productId=$("#productid").val();if(productId!=null&&productId!=""){strUrl+="&pid="+productId;}
$.ajax({type:"GET",url:strUrl,data:"",async:false,success:function(data){if(data.result!="1"){msg=data.msg;}
if(msg!=""){alert(msg);bContinue=false;}else{addImgUI();setImgData(nImgIndex,strImgUrl,oWin.$("#picurl_"+strImgId).val(),strMD5,strImgName);}},dataType:"json",error:function(){oError={error:"data",msg:mes_error_msg};}});}else{if(!validateIsExist(imgmd5)){setImgData_upload(nImgIndex,imgmd5,imgsize,imgurl,localfilename);savaImageInfoToAlbum(nImgIndex,imgmd5,imgsize,imgurl,localfilename);}}}}
function addImg_upload_queue(imgmd5,imgsize,imgurl,localfilename,searchtype,queue_suffix){if(2==searchtype){var imgList=$("input[name='inp_imgmd5']");nFirstHideImg=imgList.length;var msg="";var bContinue=true;var nImgIndex=null;var oItem=imgList[imgList.length-1];var nImgIndex=$('#inp_imgbox_index').val();if(nFirstHideImg==10000){var strUrl="/mydhgate/product/ProductAjaxAction.do?act=doublefimg&isblank=true&md5="+strMD5;var productId=$("#productid").val();if(productId!=null&&productId!=""){strUrl+="&pid="+productId;}
$.ajax({type:"GET",url:strUrl,data:"",async:false,success:function(data){if(data.result!="1"){msg=data.msg;}
if(msg!=""){alert(msg);bContinue=false;}else{addImgUI();setImgData(nImgIndex,strImgUrl,oWin.$("#picurl_"+strImgId).val(),strMD5,strImgName);}},dataType:"json",error:function(){oError={error:"data",msg:mes_error_msg};}});}else{if(!validateIsExist(imgmd5)){setImgData_upload(queue_suffix,imgmd5,imgsize,imgurl,localfilename);savaImageInfoToAlbum(queue_suffix,imgmd5,imgsize,imgurl,localfilename);}else{deleteImgUI(queue_suffix);}}}}
function savaImageInfoToAlbum(nImgIndex,imgmd5,imgsize,imgurl,localfilename){var strajaxUrl="/syi/albumsselect-saveuploadinfo.do";var s_albums_winid=$("#s_albums_winid").val();var strData="imgurl_1="+imgurl+"&imgmd5_1="+imgmd5+"&localfilename_1="+localfilename+"&imgsize_1="+imgsize+"&tdalbumswindowid="+s_albums_winid;strData=encodeURI(strData);var retFlag=false;$.ajax({type:"POST",url:strajaxUrl,data:strData,success:function(data){if(data.result=="1"){G_EVENT.trigger("upload-img-success",data);}else{deleteImgUI(nImgIndex);}},dataType:"json",error:function(){}});}
function onChangeAlbums_syn(){var ori_tdalbumswindowid=$("#ori_tdalbumswindowid").val();var move_albumswinid=$("#s_albums_winid").val();$("#ori_tdalbumswindowid").val(move_albumswinid);var imgList=$("input[name='inp_pictype']");var strArgMd5='';var len=imgList.length;var strindex=0;for(var i=0;i<len;i++){if(imgList[i].value=='2'){strindex=imgList[i].id.replace("pictype_","");if(strArgMd5!=''){strArgMd5=strArgMd5+',';}
strArgMd5=strArgMd5+$("#md5_"+strindex).val();}}
if(strArgMd5.length<=0){return;}
var strajaxUrl="/syi/albumsselect-batcmoveajax.do";var strData="tdalbumswindowid="+ori_tdalbumswindowid+"&movealbumswinid="+move_albumswinid+"&windowPhotoMd5s="+strArgMd5;var retFlag=false;$.ajax({type:"POST",url:strajaxUrl,data:strData,success:function(data){if(data.result=="1"){}else{}},dataType:"json",error:function(){}});}
var g_searchtype=-1;function showUploadWin(searchtype){$('#uploadpicModalContent').modal({close:false});var nImgCount=0;var imgIndex="";if(3!=searchtype){imgIndex=$('#inp_img_index').val();if(imgIndex==""){searchtype="2";}else{searchtype="1";g_curIndex=imgIndex;}}
g_curIndex=1;g_searchtype=searchtype;if(imgIndex!=""){initsingleUploadify();}else{initUploadify();$("#imguplist").dragsort({dragSelector:"div",dragBetween:true,dragEnd:saveOrder,placeHolderTemplate:"<li class='placeHolder'><div></div></li>"});}}
function saveOrder(){var data=$("#imguplist li").map(function(){return $(this).children().html();}).get();$("input[name=list1SortOrder]").val(data.join("|"));};function transImgUrl(strImgUrl,nType){var strNewUrl="";if(strImgUrl==null||strImgUrl=="")return strNewUrl;if(nType==0){if(strImgUrl.indexOf("/")>=0){strNewUrl=strImgUrl.replace(".jpg",".thumb.gif");}else{strNewUrl=strImgUrl+"/1.thumb.jpg";}}else{if(strImgUrl.indexOf("/")>=0){strNewUrl=strImgUrl;}else{strNewUrl=strImgUrl+"/temp2.0x0.jpg";}}
strNewUrl=g_strDHGate_ImageServer+"/"+strNewUrl;return strNewUrl;}
function initUploadPhoto(){initUploadify();jQuery("#div_imgcontainer").dragsort({itemSelector:"div",dragSelector:"div",dragBetween:true,dragEnd:saveOrder,placeHolderTemplate:"<div class='syi-upload-list'></div>"});}
function saveOrder(){setMainPicBoxCss();}
function getCurrentOperIndex(){var current_oper_index='';var imgMd5List=$("input[name='pu_imgmd5']");for(var i=0;i<8;i++){var md5Str=imgMd5List[i].value;var idStr=imgMd5List[i].id;var indexstr=idStr.replace("pu_imgmd5_","");var state=$("#pu_state_"+indexstr).val();if(md5Str.length<=0&&state==""){current_oper_index=indexstr;break;}}
$("#current_oper_index").val(current_oper_index);return current_oper_index;}
function getCurrentImgSumPuw(){var imgStateList=$("input[name='pu_state']:[value='']");var num=8-imgStateList.length;return num;}
function addImg_upload_puw(imgmd5,imgsize,imgurl,localfilename,queue_suffix){if(!validateIsExist_puw(imgmd5)){setImgData_puw(queue_suffix,imgmd5,imgsize,imgurl,localfilename);}else{showInfoTip_photo('div_imgdescErrTip','上传照片不能重复。');deleteImgUI_puw(queue_suffix);}}
function setImgData_puw(nIndex,imgmd5,imgsize,imgurl,localfilename){var strImgPath=DHDealImage.getThumbnails(imgurl);var ori_localfilename=localfilename;var localfilename=decodeURIComponent(localfilename);var limitSize=isHasChina(localfilename);var strImgNameTemp='';var localfilenametitle=localfilename;localfilename=localfilename.replace(".jpg","");if(localfilename.length>limitSize+1){strImgNameTemp=localfilename.substr(0,limitSize);strImgNameTemp=strImgNameTemp+'...';}else{strImgNameTemp=localfilename;}
$("#pu_imgshowurl_"+nIndex).attr("src",strImgPath);$("#pu_imgshowname_"+nIndex).attr("title",localfilenametitle);$("#pu_imgshowname_"+nIndex).html(strImgNameTemp);$("#pu_imgshowname_"+nIndex).show();$("#pu_imgurl_"+nIndex).val(imgurl);$("#pu_imgmd5_"+nIndex).val(imgmd5);$("#pu_localfilename_"+nIndex).val(ori_localfilename);$("#pu_imgsize_"+nIndex).val(imgsize);$("#pu_img_del_"+nIndex).show();}
function validateIsExist_puw(imgmd5){var imgList=$("input[name='pu_imgmd5']");var count=imgList.length;if(count>0){for(var i=0;i<count;i++){var oImgMD5Item=imgList[i];if(oImgMD5Item.value==imgmd5){return true;}}}
return false;}
function deleteImgUI_puw(nIndex){var defaultImageUrl="http://www.dhresource.com/dhs/mos/image/syi/new/no-photo-m3.jpg";$("#pu_imgshowurl_"+nIndex).attr("src",defaultImageUrl);$("#pu_imgshowname_"+nIndex).attr("title",'');$("#pu_imgshowname_"+nIndex).html('');$("#pu_imgurl_"+nIndex).val('');$("#pu_imgmd5_"+nIndex).val('');$("#pu_localfilename_"+nIndex).val('');$("#pu_imgsize_"+nIndex).val('');$("#pu_state_"+nIndex).val('');$("#pu_img_del_"+nIndex).hide();}
function savaImageInfoToAlbum_puw(){var strajaxUrl="/syi/desc-saveuploadinfo.do";var puw_albums_winid=$("#puw_albums_winid").val();var imgArgStr=getDescImgArgs();if(imgArgStr=='')return false;var strData=imgArgStr+"&tdalbumswindowid="+puw_albums_winid;strData=encodeURI(strData);var retFlag=false;$.ajax({type:"POST",url:strajaxUrl,data:strData,success:function(data){if(data.result=="1"){var urls=new Array();var imgurls=$("#current_oper_imgurls").val();if(imgurls==''||imgurls.length<=0)return false;var urlsArg=$("#current_oper_imgurls").val().split(',');for(var i=0;i<urlsArg.length;i++){urls[i]={src:DHDealImage.get0x0preview(urlsArg[i])};}
$.pub('execCommand.edite',['insertImage',urls]);closeSimpleModel();}else{showInfoTip_photo('div_imgdescErrTip','同步到相册失败！请稍后再试或联系敦煌管理员。');}},dataType:"json",error:function(){}});}
function getDescImgArgs(){var imgMd5List=$("input[name='pu_imgmd5'][value!='']");var indexs=[];var strDataArg='';var indexArg='';var imgurls='';var count=imgMd5List.length;if(count>0){for(var i=0;i<count;i++){var oImgMD5Item=imgMd5List[i];var indexStr=oImgMD5Item.id;var index=indexStr.replace("pu_imgmd5_","");indexs[i]=index;var imgurl=$("#pu_imgurl_"+index).val();;var imgmd5=$("#pu_imgmd5_"+index).val();;var localfilename=$("#pu_localfilename_"+index).val();;var imgsize=$("#pu_imgsize_"+index).val();;if(strDataArg!=''){strDataArg=strDataArg+'&';indexArg=indexArg+'_';imgurls=imgurls+',';}
strDataArg=strDataArg+"imgurl_"+index+"="+imgurl+"&imgmd5_"+index+"="+imgmd5+"&localfilename_"+index+"="+localfilename+"&imgsize_"+index+"="+imgsize;indexArg=indexArg+index;imgurls=imgurls+imgurl;}
if(strDataArg!=''){strDataArg=strDataArg+"&indexargs="+indexArg;}
$("#current_oper_imgurls").val(imgurls);}else{alert('请您先上传图片!');}
return strDataArg;};
(function($){var o=$({});$.sub=function(){o.bind.apply(o,arguments);};$.unsub=function(){o.unbind.apply(o,arguments);};$.pub=function(){o.trigger.apply(o,arguments);};}(jQuery));var vhtml='<p style="color: #ababab;">1、建议内容： 详细描述一般包含产品功能属性、产品细节图片、支付物流、售后服务、公司实力等内容。<br />2、图片建议： 插入5张以上真实美观的产品细节图。</p>';$(document).ready(function(){initPageRendering();initLayoutTip();initDraftBox();enableSubmitButton();intiValidate();setSyiVersionURL();initUploadPhoto();setTimeout(function(){helpIconBtn();},300);document.body.onbeforeunload=function(){return"如果点“确定”离开该页，则此页面未保存的产品信息都将丢失。";};$.sub('albums.edite',function(){window.showAlbumImgList_syi&&window.showAlbumImgList_syi('3');});$.sub('upload.edite',function(){window.showPhotoUploadWin_syi&&window.showPhotoUploadWin_syi('3');});$("#tpath").change(function(url){if($(this).find("option:selected").text()=="Garden"){selectedhtmlmodel(this.value,'elm');}});$.sub('checkcharset.edite',function(evt,chars){if(chars.length){showErrorTip("featureshtml","内容中有汉字");}else{hideErrorTip("featureshtml");}});$("#albumImgListButton").bind("click").click(function(){showAlbumImgList_syi('2');});var backCateObj=document.getElementById("selectCateButtonBack");if(backCateObj){backCateObj.onclick=function(){document.body.onbeforeunload=null;reselcatelog();}}});function initGuideBox(){var cover=true;var beCover=true;var readnewsyi=$("#readnewsyi").attr("value");if(readnewsyi=="show"){cover=false;beCover=false;}
if(cover&&beCover&&readnewsyi!="show"){$("#idPop_e").show();var e=new Pop({oPop:"idPop_e",zIndex:1001,mode:["center","center"],idClose:["close_e","close_e_1","close_e_2"],cover:cover,beCover:beCover,zIndexCover:1000,colorCover:"#d8d8d8",opactiyCover:0.4});showGuideBoxListImg();}}
function showRequest(formData,jqForm,options){var queryString=$.param(formData);alert('About to submit: \n\n'+queryString);return true;}
function showResponse(responseText,data){syiupload("syi_success");if(data==null){createFrontErrorUI();window.setTimeout(function(){$("#div_submitcontainer").removeClass().addClass("syi-submit");$("#span_submitInfo").html("\u63d0  \u4ea4");},10);return;}
var productId=responseText['productId'];var errors=responseText['errors'];var type=responseText['type'];var sourcetype=responseText['sourcetype'];var isAdd=$.trim($("#productid").val()).length>0?"0":"1";var viewSource=$("#viewSource").val();var sourceItemcode=$("#sourceItemcode").val();var repeatGroupId=$("#repeatGroupId").val();var itemcode=$("#itemcode").val();if(productId!=null&&productId!=""){var successUrl="http://seller.dhgate.com/syi/savesuccess.do?type="
+type+"&productId="+productId+"&itemcode="+itemcode+"&rid="+$.trim($("#rid").val())+"&isAdd="+isAdd+"&sourcetype="+sourcetype+"&viewSource="+viewSource+"&sourceItemcode="+sourceItemcode+"&repeatGroupId="+repeatGroupId;var cateDispId=responseText['cateDispId'];if(cateDispId!=null&&cateDispId!=""){successUrl+="&cateDispId="+cateDispId;}
var isAuditQueue=responseText['isAuditQueue'];if(isAuditQueue=="1"){successUrl+="&isAuditQueue=1";}
document.body.onbeforeunload=null;window.location.href=successUrl;}else{createBackErrorUI(errors);resetSubmitButton();}}
function showError(data,status){syiupload("syi_failure");if(status=="timeout"){errorSubmitButton("1");}
else if(status=="parsererror"){errorSubmitButton("2");}else{errorSubmitButton("0");}
enableSubmitButton();}
function priviewProductData(){disableSubmitButton();$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交");var shouldSumbmit=true;if(!$.formValidator.pageIsValid()){DhgateConsole.info("数据检查没有通过，停止上传");shouldSumbmit=false;resetSubmitButton();return;}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...5%");}
var reg_r_t_n=new RegExp("[\r\t\n]","g");var bdContent=dhedite.getContent().replace(reg_r_t_n,"");var bcContentText=dhedite.getContentTxt().replace(reg_r_t_n,"");var hasContent=dhedite.hasContents();var b_htmlcontent=check_content(bdContent,bcContentText,hasContent);if(!b_htmlcontent){DhgateConsole.info("长描校验未通过");shouldSumbmit=false;resetSubmitButton();return;}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...20%");}
if(!checkPackSize()){DhgateConsole.info("包装信息校验未通过，停止上传");shouldSumbmit=false;resetSubmitButton();return;}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...30%");}
var attrvoList=getProductAttrListForSubmit();if(attrvoList==null){console.log("属性校验位通过");shouldSumbmit=false;resetSubmitButton();return;}else{try{var jsonAttr=JSON.stringify(attrvoList);$("#attrlistid").val(jsonAttr);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...40%");}
var shippingmodelid=$('#shippingmodelid').val();if(!shippingmodelid){console.log("运费设置数据错误");shouldSumbmit=false;resetSubmitButton();}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...50%");}
var proSpecList=getProductPriceDataForSubmit();if(proSpecList==null){console.log("价格置数据错误");shouldSumbmit=false;resetSubmitButton();return;}else{try{var jsonProSpec=JSON.stringify(proSpecList);$("#prospeclistid").val(jsonProSpec);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...60%");}
var imgList=getProductImageDataForSubmit();if(imgList==null){console.log("产品图片数据错误");shouldSumbmit=false;resetSubmitButton();return;}else{try{var jsonAttr=JSON.stringify(imgList);$("#imglistid").val(jsonAttr);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...70%");}
var proInventoryList=getProInventorylist();if(proInventoryList==null){console.log("产品备货信息错误");shouldSumbmit=false;resetSubmitButton();return;}else{if(proInventoryList.length>0){try{var jsonAttr=JSON.stringify(proInventoryList);$("#productInventorylist").val(jsonAttr);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#previewopt").html("正在提交...80%");}}
var shippingModule=$('#shippingmodelname').val();if(shippingModule.length<1){shouldSumbmit=false;}
var skuErrorList=$('.error-text');if(skuErrorList.length>0){shouldSumbmit=false;}
if(shouldSumbmit){doPreviewData();}
resetSubmitButton();}
function doPreviewData(oneday){syiupload("syi_submit");$.pub('sync.edite');$("#syi_form").attr("action","/syi/previewInfo.do");$("#syi_form").submit();enableSubmitButton();return false;}
function submitProductData(){disableSubmitButton();$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交");var shouldSumbmit=true;if(!$.formValidator.pageIsValid()){DhgateConsole.info("数据检查没有通过，停止上传");shouldSumbmit=false;resetSubmitButton();}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...5%");}
var reg_r_t_n=new RegExp("[\r\t\n]","g");var bdContent=dhedite.getContent().replace(reg_r_t_n,"");var bcContentText=dhedite.getContentTxt().replace(reg_r_t_n,"");var hasContent=dhedite.hasContents();var b_htmlcontent=check_content(bdContent,bcContentText,hasContent);if(!b_htmlcontent){DhgateConsole.info("长描校验未通过");shouldSumbmit=false;resetSubmitButton();}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...20%");}
if(!checkPackSize()){DhgateConsole.info("包装信息校验未通过，停止上传");shouldSumbmit=false;resetSubmitButton();}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...30%");}
G_EVENT.trigger("setSyiAttrs");G_EVENT.trigger('setSyiSaleInfo');var shippingmodelid=$('#shippingmodelid').val();if(!shippingmodelid){console.log("运费设置数据错误");shouldSumbmit=false;resetSubmitButton();}else{$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...50%");}
var proSpecList=getProductPriceDataForSubmit();if(proSpecList==null){console.log("价格置数据错误");shouldSumbmit=false;resetSubmitButton();}else{try{var jsonProSpec=JSON.stringify(proSpecList);$("#prospeclistid").val(jsonProSpec);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...60%");}
var imgList=getProductImageDataForSubmit();if(imgList==null){console.log("产品图片数据错误");shouldSumbmit=false;resetSubmitButton();}else{try{var jsonAttr=JSON.stringify(imgList);$("#imglistid").val(jsonAttr);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...70%");}
var proInventoryList=getProInventorylist();if(proInventoryList==null){console.log("产品备货信息错误");shouldSumbmit=false;resetSubmitButton();}else{if(proInventoryList.length>0){try{var jsonAttr=JSON.stringify(proInventoryList);$("#productInventorylist").val(jsonAttr);}catch(err){}
$("#loadingimg").removeClass().addClass("submit-syi loadding-syi-btn");$("#submitopt").html("正在提交...80%");}}
var shippingModule=$('#shippingmodelname').val();if(shippingModule.length<1){shouldSumbmit=false;}
G_EVENT.trigger("chkGoogleShoppingPic");G_EVENT.trigger("chkValidateCode");setTimeout(function(){var skuErrorList=$('.error-text').filter(':visible');if(skuErrorList.length>0){shouldSumbmit=false;}
if(shouldSumbmit){DhgateConsole.info("数据检查通过，提交数据");doSubmitData();}else{createFrontErrorUI();enableSubmitButton();}},0);}
function doSubmitData(oneday){syiupload("syi_submit");var par={"oneday":oneday};var options={success:showResponse,error:showError,data:par,url:'http://seller.dhgate.com/syi/save.do',type:'post',dataType:'json',contentType:"application/x-www-form-urlencoded; charset=utf-8",timeout:60000,iframe:1};$.pub('sync.edite');$("#syi_form").ajaxSubmit(options);return false;}
function resetSubmitButton(){enableSubmitButton();}
function errorSubmitButton(type){if(type=="1"){$("#errormsgid").html("网络超时，请稍后重试，如果问题仍然存在，请联系敦煌网客服部门。");}else if(type=="2"){$("#errormsgid").html("服务出错，请稍后重试，如果问题仍然存在，请联系敦煌网客服部门。");}else{$("#errormsgid").html("网络繁忙，请稍后重试，如果问题仍然存在，请联系敦煌网客服部门。");}
$("#syi_submit_id").removeClass().addClass("syi-submit error-edit");}
function disableSubmitButton(){$("#loadingimg").removeClass().addClass("submit-syi disabled-syi-btn");$("#btn_submitproduct").unbind("click.a").attr('disabled',true);$("#btn_previewproduct").unbind("click.a").attr('disabled',true);}
function enableSubmitButton(){$("#loadingimg").removeClass().addClass("submit-syi");$("#submitopt").html("提 交");$("#previewopt").html("预览");$("#btn_submitproduct").unbind('click.a').bind('click.a',function(){$("#errorMsgDiv").hide();_dh_errors={};isShowError=true;submitProductData()}).removeAttr('disabled');}
function enablePreviewButton(){$("#loadingimg").removeClass().addClass("submit-syi");$("#submitopt").html("提 交");$("#previewopt").html("预览");$("#btn_previewproduct").unbind('click.a').bind('click.a',function(){$("#errorMsgDiv").hide();_dh_errors={};isShowError=true;priviewProductData()}).removeAttr('disabled');}
function getProductBaseDataForSubmit(bGetAllDate){DhgateConsole.info('获取产品基本数据');var isSubmit=true;goodsFormVO=new GoodsFormVO();var producttype=$("#producttype").val();if(bGetAllDate){isSubmit=formSaveHTML(0);if(isSubmit){isSubmit=formSaveHTML(1);}else{formSaveHTML(1);}
goodsFormVO.productname=$("#productname").val();goodsFormVO.productdesc=$("#productdesc").val();goodsFormVO.videourl=$("#videourl").val();}
goodsFormVO.sizelen=$("#sizelen").val();goodsFormVO.sizewidth=$("#sizewidth").val();goodsFormVO.sizeheight=$("#sizeheight").val();goodsFormVO.packquantity=$("#packquantity").val();if($("#isonlyweight").attr("checked")){goodsFormVO.baseqt=$("#baseqt").val();goodsFormVO.stepweight=$("#stepweight").val();goodsFormVO.stepqt=$("#stepqt").val();goodsFormVO.isonlyweight="1";}else{goodsFormVO.isonlyweight="0";}
if(goodsFormVO.packquantity==""||goodsFormVO.packquantity==0||isNaN(goodsFormVO.packquantity)){goodsFormVO.packquantity=1;$("#packquantity").val("1");}
goodsFormVO.productweight=$("#productweight").val();if(!checkPackSize()){isSubmit=false;}
if(!checkWeight()){isSubmit=false;}
goodsFormVO.uniqueid=$("#uniqueid").val();goodsFormVO.measureid=$("#measureid").val();goodsFormVO.producttype=$("#producttype").val();goodsFormVO.sourcetype=$("#sourcetype").val();goodsFormVO.sourceItemcode=$("#sourceItemcode").val();goodsFormVO.vaildday=$("#vaildday").val();goodsFormVO.productid=$("#productid").val();if(bGetAllDate){goodsFormVO.productgroupid=$("#productgroupid").val();goodsFormVO.factoryproductname=$("#factoryproductname").val();goodsFormVO.isquickup=$("#isquickup").val()=="1"?"1":"0";goodsFormVO.specialzone=$("#specialzone1").attr("checked")?"1":"0";goodsFormVO.productvip=$("#productvip1").attr("checked")?"1":"0";goodsFormVO.manufactory=$("#manufactory").val();}
if(isSubmit){return goodsFormVO;}
return null;}
function isContentNull(ec){if(ec==vhtml||ec.length==0){showErrorTip("featureshtml","请填写详细描述信息");return false;}else{hideErrorTip("featureshtml");return true;}}
function check_content(bdContent,bcContentText,hasContents){hideErrorTip("featureshtml");var check=0;if(bdContent.length>80000){showErrorTip("featureshtml","内容超过80000字");check++;}else if(!hasContents){showErrorTip("featureshtml","产品详细描述不能为空");check++;}
if(!check_zn(bcContentText)){showErrorTip("featureshtml","内容中有汉字");check++;}
if(check==0){hideErrorTip("featureshtml");}
return check?false:true;}
function check_zn(ec){var count=0;if(ec!=null){var tx=ec,chars=tx.split('');$(chars).each(function(){if(/.*[\u4e00-\u9fa5]+.*$/.test(this)){count++;return false;}});}
return count?false:true;};
var g_oHtmlModelList={};var g_strHtmlModelPop="<div class=\"tc_warp\" style=\"width:366px;\" ><div class=\"tc_title\"><dl><dt>"+msg_isInputEle_html1+"/dt><dd><a href=\"#blank\" onclick=\"$.modal.close();return false;\"><img src=\"http://image.dhgate.com/2008/web20/seller/img/reg_image/new_tc_close.gif\" alt=\"close\" /></a></dd></dl></div> <div class=\"tc_main\"><div class=\"tc_content\"><div class=\"box1\"><p class=\"p1\">$HTML$</p><div class=\"tc_content_button center\"><button class=\"button1\" type=\"button\" onclick=\"jQuery.modal.close();return false;\"><span style=\"color:#fff\" class=\"button1_lt\"><span class=\"button1_ri\">"+msg_isInputEle_html2+"</span></span></button></div></div></div></div></div>";function selectedhtmlmodel(strModelId,strEditId,strType){if(strModelId=="")return;if(strType==null)strType="1";if(g_oHtmlModelList[strModelId]==null){getHtmlModel(strModelId,strEditId,strType);}else{showhtmlmodel(strModelId,strEditId,strType);}}
function showhtmlmodel(strModelId,strEditId,strType){var oData=g_oHtmlModelList[strModelId];if(oData==null||oData.content=="")return;var strInnerValues=oData.inner;var strOuterValues=oData.outer;if(strInnerValues!=""||strOuterValues!=""){var strHTML=g_strHtmlModelPop;if(strInnerValues!=""){var arrInnerValues=strInnerValues.split("||");for(var i=0;i<arrInnerValues.length;i++){var arrValueStruc=arrInnerValues[i].split("|");var valueId=arrValueStruc[0];if(valueId!=""&&arrValueStruc[2]=="1"){if($("#"+valueId).val()==""){alert(arrValueStruc[3]);return false;}}}}
var strOuterHTML="";if(strOuterValues!=""){var arrOuterValues=strOuterValues.split("||");for(var i=0;i<arrOuterValues.length;i++){var arrValueStruc=arrOuterValues[i].split("|");var valueId=arrValueStruc[0];strOuterHTML+="<p>"+arrValueStruc[2]+"：</p><p>";if(arrValueStruc[1]=="string"){strOuterHTML+="<textarea class=\"color1\" style=\"height:60px; width:360px;\" id='outer_"+valueId+"' style='ime-mode:disabled;' onfocus=\"$('#outer_"+valueId+"Tip').hide();if(this.value=='"+arrValueStruc[4]+"'){this.value='';}\" >"+arrValueStruc[4]+"</textarea></p>";}else if(arrValueStruc[1]=="int"||"float"){strOuterHTML+="<input class=\"color1\" style=\"height:20px; width:360px;\" id='outer_"+valueId+"' style='ime-mode:disabled;' value='"+arrValueStruc[4]+"' onfocus=\"$('#outer_"+valueId+"Tip').hide();if(this.value=='"+arrValueStruc[4]+"'){this.value='';}\" /></p>";}
strOuterHTML+="<p><span class='tip-error'  style='display:none; width:300px;' id='outer_"+valueId+"Tip'></span></p>";}}
if(strOuterHTML!=""){strOuterHTML+="<input type='hidden' value='"+strModelId+"' id='h_htmlmodel_id'>";if(oData.remark!=""){strOuterHTML+="<p class=\"p1\" style=\"width:365px;\"><strong>"+msg_showhtmlmodel_html+"</strong> "+oData.remark+"</p>";}
strHTML.replace("$HTML$",strOuterHTML);$("#p_agreement").html(strOuterHTML);$("#div_htmltemp").modal({close:false});}}else{var strHTMLContent=oData.content;strHTMLContent=strHTMLContent.replace(/&lt;/g,"<");strHTMLContent=strHTMLContent.replace(/&gt;/g,">");strHTMLContent=strHTMLContent.replace(/&quot;/g,"\"");strHTMLContent=strHTMLContent.replace(/&amp;/g,"&");$.pub('setContent.edite',strHTMLContent);}}
function getHtmlModel(strModelId,strEditId,strType){if(strType==null)strType="1";var strUrl="/syi/productmodel.do?isblank=true";var strData="mid="+strModelId+"&type="+strType;var oError=null;$.ajax({type:"POST",url:strUrl,data:strData,success:function(data){if(data.result=="1"){g_oHtmlModelList[strModelId]=data;showhtmlmodel(strModelId,strEditId,strType);}else{return true;}},async:true,dataType:"json",error:function(){oError={error:"data",msg:mes_error_msg};}});}
function setHTMLDescription(strEditId){var strModelId=$("#h_htmlmodel_id").val();var oData=g_oHtmlModelList[strModelId];if(oData==null||oData.content=="")return;var strHTMLContent=oData.content.replace(/&quot;/g,"\"");var strInnerValues=oData.inner;if(strInnerValues!=""){var arrInnerValues=strInnerValues.split("||");for(var i=0;i<arrInnerValues.length;i++){var arrValueStruc=arrInnerValues[i].split("|");var valueId=arrValueStruc[0];if(valueId!=""&&arrValueStruc[3]=="1"){strHTMLContent=strHTMLContent.replace(("$"+valueId+"$"),$("#outer_"+valueId).val());}}}
var strOuterValues=oData.outer;var strOuterHTML="";if(strOuterValues!=""){var arrOuterValues=strOuterValues.split("||");for(var i=0;i<arrOuterValues.length;i++){var arrValueStruc=arrOuterValues[i].split("|");var valueId=arrValueStruc[0];if(valueId!=""){var strValue=$("#outer_"+valueId).val();if(arrValueStruc[3]==1&&(strValue==""||strValue==arrValueStruc[4])){if($("#outer_"+valueId+"Tip")[0]!=null){$("#outer_"+valueId+"Tip").show().html(msg_setHTMLDescription_html1+arrValueStruc[2]);}else{alert(msg_setHTMLDescription_html1+arrValueStruc[2]);}
return false;}
if(strValue==arrValueStruc[3])strValue="";var strDataType=arrValueStruc[1];if(strValue!=""){if(strDataType=="int"){if(isNaN(parseInt(strValue))){if($("#outer_"+valueId+"Tip")[0]!=null){$("#outer_"+valueId+"Tip").show().html(arrValueStruc[2]+msg_setHTMLDescription_html2);}else{alert(arrValueStruc[2]+msg_setHTMLDescription_html2);}
return false;}else{strValue=parseInt(strValue);}}else if(strDataType=="float"){if(isNaN(parseFloat(strValue))){if($("#outer_"+valueId+"Tip")[0]!=null){$("#outer_"+valueId+"Tip").show().html(arrValueStruc[2]+msg_setHTMLDescription_html2);}else{alert(arrValueStruc[2]+msg_setHTMLDescription_html2);}
return false;}else{strValue=parseFloat(strValue);}}else{if(!checkValidEnglish($("#outer_"+valueId)[0])){$("#outer_"+valueId+"Tip").html("描述中不能包含有中文").show();return false;}}
strHTMLContent=strHTMLContent.replace(("$$"+valueId+"$$"),$("#outer_"+valueId).val());}}}}
strHTMLContent=strHTMLContent.replace(/&lt;/g,"<");strHTMLContent=strHTMLContent.replace(/&gt;/g,">");$.pub('setContent.edite',strHTMLContent);jQuery.modal.close();return false;};
function syilog(str){if(console){console.log(str);}}
var g_max_integer=1000000000;function createInventoryUI(keepOriValue,inventoryVOList){syilog(keepOriValue?"备货数量保留原值":"备货数量不保留原值");var oriInventoryQties={};if(keepOriValue){oriInventoryQties=getAllOriInventoryQty();}
var catePubId=$("#inp_catepubid").val();if(catePubId==null||catePubId==""){return;}
var inventoryStatusYes$=$("#inventoryStatusYes");if(inventoryStatusYes$.attr("checked")){$("#inventoryLocationDiv").show();if(isShowMaxInventoryPeriodHip()){$("#maxInventoryPeriodHip").show();}
clearInventoryQtyUI();if(!isEmptyJson(g_cate_buyer_attr)&&!checkedAllAttr(g_cate_buyer_attr)){return;}
if(!isEmptyJson(g_cate_seller_attr)&&!checkedAllAttr(g_cate_seller_attr)){return;}
var inventorySpecAttrList=getInventorySpecAttrList();if(inventorySpecAttrList.length<=0){$("#sumInventoryQtyDiv").hide();$("#sumInventoryQtyVal").html("0");$("#invetoryTotalQtyDiv").show();if(inventoryVOList!=null&&inventoryVOList.length>0){$("#invetoryQty").val(inventoryVOList[0].quantity);}
$("#setInventoryQtyHipDiv").hide();}else{$("#sumInventoryQtyDiv").show();$("#sumInventoryQtyVal").html("0");$("#setInventoryQtyHipDiv").show();setRowspanByAttr(inventorySpecAttrList);var initInventories=resetInitInventoryData(inventorySpecAttrList,inventoryVOList);var rows=[];var titleRow=new TrRow();titleRow.isTitle="1";rows[rows.length]=titleRow;for(var i in inventorySpecAttrList){var cateAttr=inventorySpecAttrList[i].attr;var cell=new ProductInventoryQtyCell();cell.content=cateAttr.lineAttrNameCn;titleRow.add(cell);}
var rowcount=getTotalRows(inventorySpecAttrList);for(var i=0;i<rowcount;i++){var cellRow=new TrRow();var inventoryQtyTextId="";for(var j=0;j<inventorySpecAttrList.length;j++){var inventorySpecAttr=inventorySpecAttrList[j];var cateAttr=inventorySpecAttr.attr;var rowspan=inventorySpecAttr.rowspan;var checkValueList=inventorySpecAttr.checkedValueList;var valueIndex=((i-(i%rowspan))/rowspan)%inventorySpecAttr.size();var cateAttrval=checkValueList[valueIndex];if(cateAttrval==null){alert("被选中的属性值为空");alert("*********************i=> "+i+", j=>"+j+", rowspan=>"+rowspan+", valueIndex=>"+valueIndex+", size=>"+inventorySpecAttr.size());}
if(j==0){inventoryQtyTextId="";}
if(inventorySpecAttr.commonSpec=="1"){inventoryQtyTextId+=cateAttrval.attrValId;}else{inventoryQtyTextId+=cateAttr.attrId+"_"+cateAttrval.attrValId;}
if(j<inventorySpecAttrList.length-1){var nextSpecAttr=inventorySpecAttrList[j+1];if(g_cate_buyer_attr[cateAttr.attrId]!=null&&(g_cate_seller_attr[nextSpecAttr.attr.attrId]!=null||nextSpecAttr.commonSpec=="1")){inventoryQtyTextId+="___";}else{inventoryQtyTextId+="__";}}
if(i%rowspan==0){var cell=new ProductInventoryQtyCell();cell.rowspan=rowspan;cell.content=cateAttrval.lineAttrvalNameCn;cell.picUrl=cateAttrval.picUrl;cellRow.add(cell);if(j==inventorySpecAttrList.length-1){var qtyCell=new ProductInventoryQtyCell();qtyCell.type="1";qtyCell.content="";qtyCell.inventoryQtyTextId=inventoryQtyTextId;if(oriInventoryQties[inventoryQtyTextId]){qtyCell.inventoryQtyValue=oriInventoryQties[inventoryQtyTextId]+"";}
if(initInventories[inventoryQtyTextId]==0||initInventories[inventoryQtyTextId]){qtyCell.inventoryQtyValue=initInventories[inventoryQtyTextId]+"";}
cellRow.add(qtyCell);}}}
rows[rows.length]=cellRow;}
var setInventoryQtyUI=getSetInventoryQtyUI(rows);$("#setInventoryQtySpan").html(setInventoryQtyUI);$("#setInventoryQtyDiv").show();showTotalInvetory();}}else{var inventoryLocationVal=$("#inventoryLocationVal").val();if(inventoryLocationVal==""){$("#inventoryLocation").val("CN");}else{$("#inventoryLocation").val(inventoryLocationVal);}
$("#inventoryLocationDiv").hide();$("#maxInventoryPeriodHip").hide();hideTotalInvetory();clearInventoryQtyUI();}}
function resetInitInventoryData(inventorySpecAttrList,inventoryVOList){var result={};if(inventorySpecAttrList==null||inventorySpecAttrList.length==0){return result}
if(inventoryVOList==null||inventoryVOList==0){return result}
var hasBuyAttr="0";var hasSaleAttr="0";var hasCommonSpec="0";for(var i=0;i<inventorySpecAttrList.length;i++){var specAttr=inventorySpecAttrList[i];if(specAttr.commonSpec=="1"){hasCommonSpec="1";}
var cateAttr=specAttr.attr;if(cateAttr!=null){if(g_cate_seller_attr[cateAttr.attrId]!=null){hasSaleAttr="1";}
if(g_cate_buyer_attr[cateAttr.attrId]!=null){hasBuyAttr="1";}}}
for(var i=0;i<inventoryVOList.length;i++){var inventoryVO=inventoryVOList[i];if(inventoryVO.specDesc==""||inventoryVO.specDesc==null){continue;}
var oriSpecDesc=inventoryVO.specDesc;var destSpecDesc="";var specDescArr=oriSpecDesc.split("___");if(hasBuyAttr=="1"&&hasSaleAttr=="1"){destSpecDesc+=reGenerateSpecDescBySpecAttrOrder(specDescArr[0],inventorySpecAttrList);if(specDescArr.length>=2){destSpecDesc+="___"+reGenerateSpecDescBySpecAttrOrder(specDescArr[1],inventorySpecAttrList);}}else if(hasBuyAttr=="1"&&hasSaleAttr=="0"){destSpecDesc+=reGenerateSpecDescBySpecAttrOrder(specDescArr[0],inventorySpecAttrList);if(hasCommonSpec=="1"){if(specDescArr.length>=2){destSpecDesc+="___"+specDescArr[1];}}else{}}else if(hasBuyAttr=="0"&&hasSaleAttr=="1"){destSpecDesc=reGenerateSpecDescBySpecAttrOrder(oriSpecDesc,inventorySpecAttrList);}else if(hasBuyAttr=="0"&&hasSaleAttr=="0"){destSpecDesc=oriSpecDesc;}
inventoryVO.specDesc=destSpecDesc;}
if(inventoryVOList!=null&&inventoryVOList.length>0){for(var i=0;i<inventoryVOList.length;i++){var inventoryVO=inventoryVOList[i];if(!inventoryVO||inventoryVOList[i].quantity==0){result[inventoryVO.specDesc]=0;}else{result[inventoryVOList[i].specDesc]=inventoryVOList[i].quantity;}}}
return result;}
function reGenerateSpecDescBySpecAttrOrder(specDesc,inventorySpecAttrList){if(specDesc==null||specDesc==""||inventorySpecAttrList==null||inventorySpecAttrList.length<=0){return;}
var cateAttrVals=specDesc.split("__");var result=[];for(var i=0;i<inventorySpecAttrList.length;i++){var specAttr=inventorySpecAttrList[i];var cateAttr=specAttr.attr;for(var j=0;j<cateAttrVals.length;j++){var strSpecAttrId=cateAttrVals[j].split("_")[0];if(cateAttr.attrId+""==strSpecAttrId){result.push(cateAttrVals[j]);cateAttrVals[j]="";break;}}}
for(var k=0;k<cateAttrVals.length;k++){if(cateAttrVals[k]!=""){result.push(cateAttrVals[k]);}}
return result.join("__");}
function TrRow(){this.isTitle="0";this.cells=[];this.add=function(cell){this.cells[this.cells.length]=cell;};}
function getTotalRows(inventorySpecAttrList){if(inventorySpecAttrList==null||inventorySpecAttrList.length==0){return 0;}
var count=1;for(var i=0;i<inventorySpecAttrList.length;i++){count*=inventorySpecAttrList[i].size();}
return count;}
function getInventorySpecAttrList(){var specAttrList=[];if(g_cate_buyer_attr!=null){for(var attrId in g_cate_buyer_attr){specAttrList[specAttrList.length]=getCheckedValueListByAttr(g_cate_buyer_attr[attrId]);}}
if(g_cate_seller_attr!=null&&!isEmptyJson(g_cate_seller_attr)){for(var attrId in g_cate_seller_attr){specAttrList[specAttrList.length]=getCheckedValueListByAttr(g_cate_seller_attr[attrId]);}}else{var commonPriceInventorySpecAttr=new InventorySpecAttr();commonPriceInventorySpecAttr.commonSpec="1";$("input[name='div_product_pricespecification']").each(function(){var valName=$("#inp_sname_"+this.value).val();if(valName!=null&&valName!=""){var attrval={};attrval.lineAttrvalNameCn=valName;attrval.attrValId=valName;attrval.lineAttrvalName=valName;commonPriceInventorySpecAttr.checkedValueList[commonPriceInventorySpecAttr.checkedValueList.length]=attrval;}});if(commonPriceInventorySpecAttr.size()>0){var commonSpecAttr={};commonSpecAttr.lineAttrNameCn="产品规格";commonPriceInventorySpecAttr.attr=commonSpecAttr;specAttrList[specAttrList.length]=commonPriceInventorySpecAttr;}}
return specAttrList;}
function getAllOriInventoryQty(){var oriInvenntoryQty={};$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity'][value!='']").each(function(){oriInvenntoryQty[this.id]=this.value;});return oriInvenntoryQty;}
function getTotalInvetoryQty(){var count=0;$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity'][value!='']").each(function(){var qty=0;try{if(this.value!=null&&this.value!=""&&!isNaN(this.value)){qty=parseInt(this.value);}}catch(e){}
if(!isNaN(qty)){count+=qty;}});return count;}
function getSetInventoryQtyUI(rows){var ui=[];ui[ui.length]='<table id="inventoryTable">';if(rows!=null&&rows.length>0){for(var i=0;i<rows.length;i++){var tmpRow=rows[i];var cells=tmpRow.cells;ui[ui.length]='<tr>'
if(tmpRow.isTitle=="1"){for(var j=0;j<cells.length;j++){ui[ui.length]='<th>'+cells[j].content+'</th>';}
ui[ui.length]='<th>备货数量<input type="checkbox" id="allsame" onclick="sameInventoryQty(this)" class="cheack-box-input" value="" class="ma" /><label for="allsame">全部相同</label></th>';}else{for(var j=0;j<cells.length;j++){if(cells[j].type=="0"){ui[ui.length]='<td';if(cells[j].rowspan>1){ui[ui.length]=' rowspan="'+cells[j].rowspan+'"';}
ui[ui.length]='>';if(cells[j].picUrl!=null&&cells[j].picUrl!=''){ui[ui.length]='<span class="colorbox"><img width="11" height="11" src="'+g_image_server_url+cells[j].picUrl+'">';}
ui[ui.length]=cells[j].content;ui[ui.length]='</td>';}else
if(cells[j].type=="1"){ui[ui.length]='<td><input type="text" class="attr-text-input" onchange="showTotalInvetory();" name="proInventoryQuantity" id="'+cells[j].inventoryQtyTextId+'" ';if(cells[j].inventoryQtyValue&&cells[j].inventoryQtyValue!=null&&cells[j].inventoryQtyValue!=""){ui[ui.length]=' value="'+cells[j].inventoryQtyValue+'" ';}
ui[ui.length]='/></td>';}}}
ui[ui.length]='</tr>';}}
ui[ui.length]='</table>';return ui.join('');}
function setRowspanByAttr(inventorySpecAttrList){if(inventorySpecAttrList==null||inventorySpecAttrList.length<=1){return;}
for(var i=0;i<inventorySpecAttrList.length-1;i++){var inventorySpecAttr=inventorySpecAttrList[i];var rowspan=1;for(var j=i+1;j<inventorySpecAttrList.length;j++){rowspan=rowspan*inventorySpecAttrList[j].size();}
inventorySpecAttr.rowspan=rowspan;}}
function getCheckedValueListByAttr(attr){if(attr==null){return null;}
var checkedValueIdList=getCheckedAttrvalIds(attr);var valueList=[];for(var i=0;i<checkedValueIdList.length;i++){if(checkedValueIdList[i]==g_nOtherValId+""){var attrval={};attrval.lineAttrvalNameCn="Other";attrval.lineAttrvalName="Other";attrval.attrValId=g_nOtherValId;valueList[valueList.length]=attrval;}
else{valueList[valueList.length]=attr["valueList"][checkedValueIdList[i]];}}
var specAttr=new InventorySpecAttr();specAttr.attr=attr;specAttr.checkedValueList=valueList;return specAttr;}
function InventorySpecAttr(){this.attr=null;this.commonSpec="0";this.checkedValueList=[]
this.size=function(){return this.checkedValueList.length;}
this.rowspan=1;}
function ProductInventoryQtyCell(){this.rowspan=1;this.content="";this.type="0";this.inventoryQtyTextId="";this.inventoryQtyValue=null;this.picUrl="";}
function getCheckedAttrvalIds(attr){if(!attr){alert("属性不存在");return null;}
var checkboxTagName="c_"+attr.attrId+"_vname";var attrvalIds=[];$(":checked[name="+checkboxTagName+"]").each(function(){attrvalIds[attrvalIds.length]=this.value.split('_')[1];});return attrvalIds;}
function checkedAllAttr(attrs){if(attrs==null){return true;}
for(attrId in attrs){if(hasCheckedAttrval(attrs[attrId])==false){return false;}}
return true;}
function hasCheckedAttrval(attr){if(attr==null){return false;}
if(attr.type!=g_attr_type_multi){return false;}
var result=false;var valueList=attr.valueList;for(var attrValId in valueList){if(isChecked(attrId,attrValId)){result=true;break;}}
if(result==false){if(attr.isother=="1"){if(isChecked(attr.attrId,g_nOtherValId)){result=true;}}}
return result;}
function isChecked(attrId,attrValId){var checkboxid="c_"+attrId+"_"+attrValId;return $("#"+checkboxid).attr("checked");}
function clearInventoryQtyUI(){$("#setInventoryQtyHipDiv").hide();$("#setInventoryQtyDiv").hide();$("#setInventoryQtySpan").html("");$("#invetoryTotalQtyDiv").hide();$("#invetoryQty").html("");}
function getProInventorylist(){hideErrorTip("productinventory");if($("#inventoryStatusYes").attr("checked")==false){return[];}
var inventorySpecAttrList=getInventorySpecAttrList();var inventoryList=[];var errorMsg="";if(inventorySpecAttrList==null||inventorySpecAttrList.length<=0){if(isEmptyJson(g_cate_buyer_attr)&&isEmptyJson(g_cate_seller_attr)){var inventoryQty=$("#invetoryQty").val();if(inventoryQty==""||isNaN(parseInt(inventoryQty))||!isInt(inventoryQty)||parseInt(inventoryQty)<=0){errorMsg="产品备货量填写不正确";showErrorTip("productinventory",errorMsg);return null;}
errorMsg=checkInventQtyRange(inventorySpecAttrList);if(errorMsg!=null&&errorMsg!=""){showErrorTip("productinventory",errorMsg);return null;}
inventoryVO=new ProductInventoryVO();inventoryVO.quantity=parseInt(inventoryQty);inventoryList[inventoryList.length]=inventoryVO;return inventoryList;}else{return null;}}else{setRowspanByAttr(inventorySpecAttrList);var checkedSuccess=true;$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity']").each(function(){var strQuantity=this.value;if(strQuantity==""||!isInt(strQuantity)||parseInt(strQuantity)<=0){errorMsg="产品备货数量填写不正确";showErrorTip("productinventory",errorMsg);checkedSuccess=false;return null;}});errorMsg=checkInventQtyRange(inventorySpecAttrList);if(errorMsg!=null&&errorMsg!=""){showErrorTip("productinventory",errorMsg);checkedSuccess=false;}
if(checkedSuccess==false){return null;}
var rowcount=getTotalRows(inventorySpecAttrList);for(var i=0;i<rowcount;i++){var inventoryQtyTextId="";var inventoryVO=null;for(j=0;j<inventorySpecAttrList.length;j++){var inventorySpecAttr=inventorySpecAttrList[j];var cateAttr=inventorySpecAttr.attr;var rowspan=inventorySpecAttr.rowspan;var checkValueList=inventorySpecAttr.checkedValueList;var valueIndex=((i-(i%rowspan))/rowspan)%inventorySpecAttr.size();var attrval=checkValueList[valueIndex];if(j==0){inventoryQtyTextId="";inventoryVO=new ProductInventoryVO();}
if(inventorySpecAttr.commonSpec=="1"){inventoryQtyTextId+=attrval.attrValId;}else{inventoryQtyTextId+=cateAttr.attrId+"_"+attrval.attrValId;}
if(j<inventorySpecAttrList.length-1){var nextSpecAttr=inventorySpecAttrList[j+1];if(g_cate_buyer_attr[cateAttr.attrId]!=null&&(g_cate_seller_attr[nextSpecAttr.attr.attrId]!=null||nextSpecAttr.commonSpec=="1")){inventoryQtyTextId+="___";}else{inventoryQtyTextId+="__";}}
if(j==inventorySpecAttrList.length-1){var strQuantity=$("input[id='"+inventoryQtyTextId+"']").val();inventoryVO.quantity=parseInt(strQuantity);inventoryVO.specDesc=inventoryQtyTextId;}
if(inventoryVO.commonSpec=="0"){if(inventorySpecAttr.commonSpec=="1"){inventoryVO.commonSpec="1";}}
if(inventoryVO.hasBuyAttr=="0"){if(g_cate_buyer_attr[cateAttr.attrId]){inventoryVO.hasBuyAttr="1";}}
if(inventoryVO.hasSaleAttr=="0"){if(g_cate_seller_attr[cateAttr.attrId]){inventoryVO.hasSaleAttr="1";}}}
if(inventoryVO!=null){inventoryList[inventoryList.length]=inventoryVO;}}
return inventoryList;}}
function sameInventoryQty(obj){if(obj.checked==false){return;}
var inventories$=$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity']");var sameVal="";inventories$.each(function(){if(this.value!=""&&!isNaN(this.value)&&isInt(this.value)){sameVal=this.value;return false;}});if(sameVal!=""){inventories$.each(function(){this.value=sameVal;});showTotalInvetory();}}
function getMaxLeadingtime(){if($("#inventoryStatusYes").attr("checked")!=true){return g_nMaxLeadingTime;}
if(g_category.stockPeriod!=null){return g_category.stockPeriod;}
return g_nMaxLeadingTime;}
function checkInventQtyRange(inventorySpecAttrList){var saleInventorySpecAttrList=getSaleInventorySpecAttrList(inventorySpecAttrList);if(saleInventorySpecAttrList==null||saleInventorySpecAttrList.length<=0){var maxPrenty=getMaxPriceEndQty();var minPrstartqty=getMinPriceStartQty();if(maxPrenty==0||minPrstartqty==g_max_integer){return"";}
var success=true;if(inventorySpecAttrList==null||inventorySpecAttrList.length==0){var inventoryTotalQty=0;inventoryTotalQty=parseInt($("#invetoryQty").val());if(maxPrenty<inventoryTotalQty||minPrstartqty>inventoryTotalQty){success=false;}}else{var estInventoryQty=getInvetoryQtyByPriceSpec("");if(estInventoryQty.min<minPrstartqty||estInventoryQty.max>maxPrenty){success=false;}}
if(success==true){return"";}else{return"备货量应该在"+minPrstartqty+"-"+maxPrenty+"之间";}}else{var maxPrendqtyJson={};if(saleInventorySpecAttrList[0].commonSpec=="1"){for(var i=0;i<saleInventorySpecAttrList[0].size();i++){var value=saleInventorySpecAttrList[0].checkedValueList[i].lineAttrvalName;var inipid="";$("input[id^='inp_sname_']").each(function(){if(this.value==value){inipid=this.id;return false;}});if(inipid==""){return"备货错误。"}
inipid=inipid.split("inp_sname_")[1];var maxJson={};maxJson["maxPrendqty"]=getMaxPriceEndQtyByInipid(inipid);maxJson["minPrstartqty"]=getMinPriceStartQtyByInipid(inipid);maxJson["specDescName"]=value;maxPrendqtyJson[value]=maxJson;}}else{var total=getTotalRows(saleInventorySpecAttrList);for(var i=0;i<total;i++){var inipid="";var specDescName="";for(var j=0;j<saleInventorySpecAttrList.length;j++){if(j==0){inipid="";specDescName="";}
var attr=saleInventorySpecAttrList[j].attr;var valueList=saleInventorySpecAttrList[j].checkedValueList;var rowspan=saleInventorySpecAttrList[j].rowspan
var index=((i-(i%rowspan))/rowspan)%saleInventorySpecAttrList[j].size();var attrval=valueList[index];inipid+=attr.attrId+"_"+attrval.attrValId;specDescName+=attrval.lineAttrvalNameCn;if(j<saleInventorySpecAttrList.length-1){inipid=inipid+"__";specDescName+="&";}}
var maxJson={};maxJson["maxPrendqty"]=getMaxPriceEndQtyByInipid(inipid);maxJson["minPrstartqty"]=getMinPriceStartQtyByInipid(inipid);maxJson["specDescName"]=specDescName;maxPrendqtyJson[inipid]=maxJson;}}
for(var priceDesc in maxPrendqtyJson){var tmp=maxPrendqtyJson[priceDesc];if(tmp.maxPrendqty==0){continue;}
var estInventoryQty=getInvetoryQtyByPriceSpec(priceDesc);if(estInventoryQty.max>tmp.maxPrendqty||estInventoryQty.min<tmp.minPrstartqty){return"【"+tmp.specDescName+"】备货量应该在"+tmp.minPrstartqty+"-"+tmp.maxPrendqty+"之间";}}
return"";}}
function getSaleInventorySpecAttrList(inventorySpecAttrList){if(inventorySpecAttrList==null||inventorySpecAttrList.length==0){return null}
var saleInventorySpecAttrList=[];for(var i=0;i<inventorySpecAttrList.length;i++){if(inventorySpecAttrList[i].commonSpec=="1"||g_cate_seller_attr[inventorySpecAttrList[i].attr["attrId"]]!=null){saleInventorySpecAttrList[saleInventorySpecAttrList.length]=inventorySpecAttrList[i];}}
return saleInventorySpecAttrList;}
function showTotalInvetory(){var count=getTotalInvetoryQty();$("#sumInventoryQtyDiv").show();$("#sumInventoryQtyVal").html(count);return count;}
function hideTotalInvetory(){var count=getTotalInvetoryQty();$("#sumInventoryQtyDiv").hide();$("#sumInventoryQtyVal").html("");return count;}
function getInvetoryQtyByPriceSpec(priceSpec){var maxInventoryQty=0;var minInventoryQty=g_max_integer;var result={};var inventoryQtyText$=null
if(priceSpec==""){inventoryQtyText$=$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity'][value!='']");}else{inventoryQtyText$=$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity'][value!=''][id$='_"+priceSpec+"']");if(inventoryQtyText$.length<=0){inventoryQtyText$=$("#inventoryTable").find("tr").find("input[name='proInventoryQuantity'][value!=''][id='"+priceSpec+"']");}}
inventoryQtyText$.each(function(){var qty=0;try{if(this.value!=null&&this.value!=""){qty=parseInt(this.value);}
if(maxInventoryQty<qty){maxInventoryQty=qty;}
if(minInventoryQty>qty){minInventoryQty=qty;}}catch(e){}
result.max=maxInventoryQty;result.min=minInventoryQty;});return result;}
function getMaxPriceEndQty(){var maxPrenty=0;$("#div_pprice_container").find("input[name='prendqty']").each(function(){var prenty=0;try{prenty=parseInt(this.value);}catch(e){prenty=0;}
if(maxPrenty<prenty){maxPrenty=prenty;}});return maxPrenty;}
function getMinPriceStartQty(){var minStartQty=g_max_integer;if($("#div_pprice_container").find("input[id^='inp_prsstart_'][value!='']").length>0){minStartQty=1;return minStartQty;}
$("#div_pprice_container").find("input[name='prstartqty']").each(function(){var prstartqty=g_max_integer;try{if(this.value!=""&&!isNaN(this.value)&&isInt(this.value)){prstartqty=parseInt(this.value);}}catch(e){minStartQty=g_max_integer;}
if(minStartQty>prstartqty){minStartQty=prstartqty;}});return minStartQty;}
function getMaxPriceEndQtyByInipid(inipid){if(inipid==null||inipid==""){return 0;}
var maxPrenty=0;$("#div_pprice_container").find("input[name='prendqty'][id^='inp_prend_"+inipid+"']").each(function(){var prenty=0;try{prenty=parseInt(this.value);}catch(e){prenty=0;}
if(maxPrenty<prenty){maxPrenty=prenty;}});return maxPrenty;}
function getMinPriceStartQtyByInipid(inipid){if(inipid==null||inipid==""){return 0;}
if($("#inp_prsstart_"+inipid).val()=="1"){minPstartqty=1;return minPstartqty;}
var minPstartqty=1;var isInit=false;$("#div_pprice_container").find("input[name='prstartqty'][id^='inp_prstart_"+inipid+"']").each(function(){var sqty=0;try{if(this.value!=""&&!isNaN(this.value)&&isInt(this.value)){sqty=parseInt(this.value);if(isInit==false&&sqty>0){minPstartqty=sqty;isInit=true;}else if(isInit==true&&sqty>0){if(minPstartqty>sqty){minPstartqty=sqty;}}}}catch(e){}});return minPstartqty;}
function inputLeadingtime(text1,maxValue){str=text1.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isInt(str)){var ilen=str.length;str=str.substring(0,ilen-1);}else{if(str.length>6||str*1==0||parseInt(str)>maxValue){var ilen=str.length;str=str.substring(0,ilen-1);}
break;}}
text1.value=str;}
function addLeadingtime(leadingtimeid){if(leadingtimeid==null||leadingtimeid==""){return;}
var leadingtime$=$("#"+leadingtimeid);if(leadingtime$.val()==""||isNaN(leadingtime$.val())||!isInt(leadingtime$.val())){return;}
var count=parseInt(leadingtime$.val())+1;hideErrorTip("productprice");var maxLeadingtime=getMaxLeadingtime()
if(count>maxLeadingtime){showErrorTip("productprice","产品备货期必须在1--"+maxLeadingtime+"之间");}else{leadingtime$.val(count);}}
function subLeadingtime(leadingtimeid){if(leadingtimeid==null||leadingtimeid==""){return;}
var leadingtime$=$("#"+leadingtimeid);if(leadingtime$.val()==""||isNaN(leadingtime$.val())||!isInt(leadingtime$.val())){return;}
var count=parseInt(leadingtime$.val())-1;hideErrorTip("productprice");if(count<=0){showErrorTip("productprice","备货期必须大于0");}else{leadingtime$.val(count);}}
function knowInventoryPeriodHip(){var key="inventory_time_hip"+$("#supplierid").val();$.cookie(key,"1",{expires:3650});$("#maxInventoryPeriodHip").hide();}
function isShowMaxInventoryPeriodHip(){var key="inventory_time_hip"+$("#supplierid").val();if($.cookie(key)=="1"){return false;}else{return true;}};
var g_product_spec_list={"nCount":0,specList:{}};var g_product_specold_list=null;var g_nMaxSaleQT=1000000;var g_nMaxPrice=100000;var g_nMaxSalePrice=100000000;var g_nMaxLeadingTime=60;function createPriceSpecification(arrAttrList,strSpecDes){hideErrorTip("productprice");var catePubId=$("#inp_catepubid").val();var strSpecId="";if(catePubId==null||catePubId=="")
return strSpecId;if(strSpecDes==null)
strSpecDes="";var bAttrSpec=false;var strUnitName=msg_createPriceSpecification_unit;var oContainer=$("#div_pprice_container");$("#div_price_covering").hide();if(arrAttrList==null||arrAttrList.length==0){var nSpecLength=document.getElementsByName("div_product_pricespecification").length;if(nSpecLength==0){$("#div_price_covering").hide();if(strSpecDes==""){oContainer.removeClass().addClass("syi-price syi-price2");}else{oContainer.removeClass().addClass("syi-price syi-price4");}}else{if(nSpecLength==1){var currentClassName=oContainer[0].className;if(currentClassName=="syi-price syi-price1"||currentClassName=="syi-price syi-price2"||currentClassName=="syi-price2 syi-price"||currentClassName=="syi-price1 syi-price"){oContainer.removeClass().addClass("syi-price syi-price4");$("#a_addspecification").hide();$("#btn_addspecification").show();return strSpecId;}}
else{if(nSpecLength>4){alert(msg_createPriceSpecification_alert);return strSpecId;}}}
strSpecId=getRandomUUID();var uiHtml=createSpecificationUI(strSpecId,strSpecDes,false);oContainer.append(uiHtml);g_product_spec_list.nCount=g_product_spec_list.nCount+1;g_product_spec_list.specList[strSpecId]=strSpecId;nSpecLength=document.getElementsByName("div_product_pricespecification").length;if(nSpecLength>1){$("#a_addspecification").hide();$("#btn_addspecification").show();}}
else{return;}
return strSpecId;}
function getSpecificationDesById(strSpecId){var strRet="";if(strSpecId==null||window["g_cate_seller_attr"]==null)
return strRet;var arrList=strSpecId.split("__");for(var i=0;i<arrList.length;i++){var aItem=arrList[i];var avMap=aItem.split("_");var oGategoryAttr=g_cate_seller_attr[avMap[0]];if(oGategoryAttr!=null){var valueList=oGategoryAttr.valueList;var oCVal=valueList[avMap[1]];if(oCVal!=null){var strValueName=oCVal.lineAttrvalNameCn;if(strValueName==null||strValueName==""){strValueName=oCVal.lineAttrvalName;}
if(strValueName==null||strValueName==""){return strRet;}
if(strRet!=""){strRet+=" & ";}
strRet+=strValueName;}
else{if(avMap[1]==g_nOtherValId){if(strRet!=""){strRet+=" & ";}
strRet+="other";}}}
else{return strRet;}}
return strRet;}
function createSpecificationUI(strSpecId,strSpecDes,isSellerAttr){var strUnitName=msg_createPriceSpecification_unit;var pQNum=$("#packquantity").val();if(pQNum==1){strUnitName=$("#measurename").val();}
else{strUnitName=msg_createSpecificationUI_unit;}
var strSPContainId="div_"+strSpecId;var strSPCInpId='inp_sname_'+strSpecId;var strPRBase="div_pr_"+strSpecId;var strSellerPId="inp_prseller_"+strSpecId;var strSellerPLowId="inp_prsellerlow_"+strSpecId;var strSellerPPreId="inp_prsellerpre_"+strSpecId;var strStartBaseid="inp_prstart_"+strSpecId;var strEndBaseId="inp_prend_"+strSpecId;var bFactory=$("#isfactory").val()=="1";var specUI=[];specUI[specUI.length]='<div class="syi-price-list clearfix" id="div_'+strSpecId+'" ><input type="hidden" name="div_product_pricespecification" value="'+strSpecId+'">';specUI[specUI.length]='<div class="syi-price-lt"><ul><li class="li6">';specUI[specUI.length]='<p id="p_specdes_'+strSpecId+'">'+getSpecificationDesById(strSpecId)+'</p>';specUI[specUI.length]='<p><input type="text" maxlength="100" onchange="createInventoryUI(true);" style="ime-mode:disabled;" class="syi-input11" id="inp_sname_'+strSpecId+'"';if(strSpecDes!=null){specUI[specUI.length]=' value="'+strSpecDes+'"';}
if(isSellerAttr){specUI[specUI.length]=' readonly="readonly"  style="display:none;" ';}
specUI[specUI.length]=' ></p>';if(!isSellerAttr){specUI[specUI.length]='<p><a id="a_delspec" href="javascript:void(0)" onclick="deletePriceSpecification(\''+strSpecId+'\');createInventoryUI(true);return false;">'+msg_createSpecificationUI_html1+'</a></p>';}
specUI[specUI.length]='<p><a id="a_copyingp_'+strSpecId+'" href="javascript:void(0)" onclick="showPriceCopyingWin(\''+strSpecId+'\');return false;">复制到...</a></p>';specUI[specUI.length]='</li></ul></div>';specUI[specUI.length]='<div class="syi-price-ri" id="">';for(var i=0;i<5;i++){var strTag=strSpecId+"_"+i;specUI[specUI.length]='<div class="syi-price-ri-row clearfix" id="div_pr_'+strSpecId+'_'+i+'" ';if(i>0){specUI[specUI.length]=' style="display:none;" ';}
specUI[specUI.length]='><ul>';specUI[specUI.length]='<li class="li1">';specUI[specUI.length]=msg_createSpecificationUI_html2+'<input type="text" size="16" maxlength="6"  name="prstartqty"  id="inp_prstart_'+strSpecId+'_'+i+'" class="syi-input9" ';if(i>0){specUI[specUI.length]=' readonly="readonly"  disabled ';}
else{specUI[specUI.length]=' onBlur="inputbuyleast(this);getWPriceByS(\''+strTag+'\');" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strTag+'\');"';}
specUI[specUI.length]='><span class="syi-font1">--</span>';specUI[specUI.length]='<input type="text" maxlength="6" name="prendqty" id="inp_prend_'+strSpecId+'_'+i+'" class="syi-input9" onBlur="inputbuyleast(this);changeNextBuyLeast(\''+strSpecId+'\','+i+');getWPriceByS(\''+strTag+'\');" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strTag+'\');"';specUI[specUI.length]=' ><span id="sortbyunit2" name="sortbyunit2">'+strUnitName+'</span></li>';specUI[specUI.length]='<li class="li2"><input type="text" maxlength="9" id="inp_prseller_'+strSpecId+'_'+i+'" class="syi-input10" onBlur="inputFloat(this,2);getWPriceByS(\''+strTag+'\');" onKeyUp="inputFloat(this,2);getWPriceByS(\''+strTag+'\');"></li>';specUI[specUI.length]='<li class="li3" id="inp_prbuyer_'+strSpecId+'_'+i+'" ></li>';var maxLeadingtime=getMaxLeadingtime();var leadingtimeid="inp_prltime_"+strSpecId+'_'+i;specUI[specUI.length]='<li class="li4"><span class="subtraction" onclick="subLeadingtime(\''+leadingtimeid+'\')"></span><input type="text" maxlength="2"  id="'+leadingtimeid+'" class="syi-input9" onBlur="inputLeadingtime(this,'+maxLeadingtime+');" onKeyUp="inputLeadingtime(this,'+maxLeadingtime+')"><span class="addition" onclick="addLeadingtime(\''+leadingtimeid+'\')"></span></li>';specUI[specUI.length]='<li class="li5">';if(i>0){specUI[specUI.length]='<a id="a_addpr_'+strSpecId+'_'+i+'"  href="javascript:void(0)" onclick="deletePriceRange(this, \''+strSpecId+'\', \''+i+'\');return false;">'+msg_createSpecificationUI_html3+'</a>';}
specUI[specUI.length]='</li>';specUI[specUI.length]='</ul></div>';}
if(bFactory){specUI[specUI.length]='<div id="div_prsample_'+strSpecId+'" class="syi-price-ri-row clearfix" style="display:none;"><ul><li class="li1"><img src="http://image.dhgate.com/test/index/sample1_1226.gif" style="cursor:hand" title="'+msg_createSpecificationUI_html4+'" />&nbsp;'+msg_createSpecificationUI_html2;specUI[specUI.length]='<input type="text" class="syi-input9" maxlength="8" name="prstartqty" id="inp_prsstart_'+strSpecId+'" onBlur="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);"><span class="syi-font1" >--</span>';specUI[specUI.length]='<input type="text" name="prendqty" class="syi-input9" maxlength="8" id="inp_prsend_'+strSpecId+'" onBlur="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);"><span id="sortbyunit2" name="sortbyunit2">'+strUnitName+'</span></li>';specUI[specUI.length]='<li class="li2"><input type="text" class="syi-input10" id="inp_prsseller_'+strSpecId+'" onBlur="inputFloat(this,2);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputFloat(this,2);getWPriceByS(\''+strSpecId+'\', 0, 2);"></li>';specUI[specUI.length]='<li id="inp_prsbuyer_'+strSpecId+'" class="li3"></li>';var maxLeadingtime=getMaxLeadingtime();var sleadingtimeid="inp_prsltime_"+strSpecId;specUI[specUI.length]='<li class="li4"><span class="subtraction" onclick="subLeadingtime(\''+sleadingtimeid+'\')"></span><input type="text" class="syi-input9" id="'+sleadingtimeid+'" onKeyUp="inputbuyleast(this);inputLeadingtime(this,'+maxLeadingtime+');" onBlur="inputbuyleast(this);inputLeadingtime(this,'+maxLeadingtime+');"><span class="addition" onclick="addLeadingtime(\''+sleadingtimeid+'\')"></span>';specUI[specUI.length]='</li>';specUI[specUI.length]='<li class="li5"><a onclick="addSamplePrice(\''+strSpecId+'\', false);return false;" href="javascript:void(0)" >'+msg_createSpecificationUI_html3+'</a></li></ul></div>';}
specUI[specUI.length]='<div class="row1">';specUI[specUI.length]='<span class="tourBtn"><input type="button" value="'+msg_createSpecificationUI_html5+'" onclick="addPriceRange(\''+strSpecId+'\')" ></span>';if(bFactory){specUI[specUI.length]='&nbsp;&nbsp;<span class="tourBtn" id="btn_addsample_'+strSpecId+'" onclick="addSamplePrice(\''+strSpecId+'\', true)" ><input type="button" value="'+msg_createSpecificationUI_html6+'"></span>';}
if(!isSellerAttr){var nSpecLength=document.getElementsByName("div_product_pricespecification").length;if(nSpecLength==0){specUI[specUI.length]='&nbsp;&nbsp;<a id="a_addspecification" href="javascript:void(0)" onclick="createPriceSpecification();return false;">'+msg_createSpecificationUI_html7+'</a>';}
else{specUI[specUI.length]='&nbsp;&nbsp;<a id="a_addspecification" href="javascript:void(0)" style="display:none;" onclick="createPriceSpecification();return false;">'+msg_createSpecificationUI_html7+'</a>';}}
specUI[specUI.length]='</div>';specUI[specUI.length]='</div>';specUI[specUI.length]='</div>';return specUI.join("");}
function createDHPortSpecificationUI(strSpecId,strSpecDes,isSellerAttr){var oContainer=$("#div_pprice_container");var currentClassName=oContainer[0].className;if(currentClassName!="syi-price syi-price6"){oContainer.removeClass(currentClassName);oContainer.addClass("syi-price syi-price6");}
var strUnitName=msg_createPriceSpecification_unit;var pQNum=$("#packquantity").val();if(pQNum==1){strUnitName=$("#measurename").val();}
else{strUnitName=msg_createSpecificationUI_unit;}
var strSPContainId="div_"+strSpecId;var strSPCInpId='inp_sname_'+strSpecId;var strPRBase="div_pr_"+strSpecId;var strSellerPId="inp_prseller_"+strSpecId;var strSellerPLowId="inp_prsellerlow_"+strSpecId;var strSellerPPreId="inp_prsellerpre_"+strSpecId;var strStartBaseid="inp_prstart_"+strSpecId;var strEndBaseId="inp_prend_"+strSpecId;var bFactory=($("#isfactory").val()=="1")?true:false;var specUI=[];specUI[specUI.length]='<div id="div_'+strSpecId+'"  class="ssyi-price sku syi-price6">';specUI[specUI.length]='<input type="hidden" value="'+strSpecId+'" name="div_product_pricespecification">';specUI[specUI.length]='<div class="syi-price-lt" ><ul><li class="li6">';specUI[specUI.length]='<p></p><input type="text" value="" id="inp_sname_'+strSpecId+'" class="syi-input11" style="ime-mode:disabled;" ><p></p>';specUI[specUI.length]='</li></ul></div>';specUI[specUI.length]='<div id="" class="syi-price-ri">';for(var i=0;i<5;i++){var strTag=strSpecId+"_"+i;specUI[specUI.length]='<div id="div_pr_'+strSpecId+'_'+i+'" class="syi-price-ri-row clearfix"';if(i>0){specUI[specUI.length]=' style="display:none;" ';}
specUI[specUI.length]='>';specUI[specUI.length]='<ul><li class="li1">';specUI[specUI.length]=msg_createSpecificationUI_html2+'<input type="text" onkeyup="inputbuyleast(this);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', 1 , 1);" ';specUI[specUI.length]='onblur="inputbuyleast(this);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', 1 , 1);" ';specUI[specUI.length]='class="syi-input9" id="inp_prstart_'+strSpecId+'_'+i+'" size="6">';specUI[specUI.length]='<span class="syi-font1">--</span>';specUI[specUI.length]='<input type="text" onkeyup="inputbuyleast(this);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', 1 , 1);" ';specUI[specUI.length]='onblur="inputbuyleast(this);changeNextBuyLeast(\''+strSpecId+'\','+i+');';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', 1 , 1);" ';specUI[specUI.length]='class="syi-input9" id="inp_prend_'+strSpecId+'_'+i+'" size="6">';specUI[specUI.length]='<span name="sortbyunit2" id="sortbyunit2">'+strUnitName+'</span>';specUI[specUI.length]='</li>';specUI[specUI.length]='<li class="li2">';specUI[specUI.length]='<span>'+msg_createDHPortSpecificationUI_html1+'<input id="inp_prsellerlow_'+strSpecId+'_'+i+'" type="text" onkeyup="inputFloat(this,2);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', null , null, \'inp_prsellerlow_\', \'inp_prbuyerlow_\');" ';specUI[specUI.length]=' onblur="inputFloat(this,2);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', null , null, \'inp_prsellerlow_\', \'inp_prbuyerlow_\');" class="syi-input10" ></span>';specUI[specUI.length]='<span>'+msg_createDHPortSpecificationUI_html2+'<input id="inp_prsellerpre_'+strSpecId+'_'+i+'" type="text" onkeyup="inputFloat(this,2);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', null , null, \'inp_prsellerpre_\', \'inp_prbuyerpre_\');" ';specUI[specUI.length]='onblur="inputFloat(this,2);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\', null , null, \'inp_prsellerpre_\', \'inp_prbuyerpre_\');" class="syi-input10" ></span>';specUI[specUI.length]='<span>'+msg_createDHPortSpecificationUI_html3+'<input id="inp_prseller_'+strSpecId+'_'+i+'" type="text" onkeyup="inputFloat(this,2);';specUI[specUI.length]='getWPriceByS(\''+strSpecId+'_'+i+'\');" ';specUI[specUI.length]='onblur="inputFloat(this,2);';specUI[specUI.length]=' getWPriceByS(\''+strSpecId+'_'+i+'\');" ';specUI[specUI.length]='class="syi-input10" ></span>';specUI[specUI.length]='</li>';specUI[specUI.length]='<li class="li3">';specUI[specUI.length]='<span id="inp_prbuyerlow_'+strSpecId+'_'+i+'"></span>';specUI[specUI.length]='<span id="inp_prbuyerpre_'+strSpecId+'_'+i+'"></span>';specUI[specUI.length]='<span id="inp_prbuyer_'+strSpecId+'_'+i+'"></span>';specUI[specUI.length]='</li>';specUI[specUI.length]='<li class="li4">';specUI[specUI.length]='<span><input type="text" id="dhportlowpostday" class="syi-input9" readonly="readonly" value="50"></span>';specUI[specUI.length]='<span><input type="text" id="dhportpresellpostday" class="syi-input9" readonly="readonly" value="35"></span>';specUI[specUI.length]='<span><input type="text"  class="syi-input9" readonly="readonly" value="2"></span>';specUI[specUI.length]='</li>';specUI[specUI.length]='<li class="li5"><span></span><span></span>';specUI[specUI.length]='<a onclick="deletePriceRange(this, \''+strSpecId+'\', '+i+');return false;" href="javascript:void(0)" id="a_addpr_'+strSpecId+'_'+i+'">'+msg_createSpecificationUI_html3+'</a>';specUI[specUI.length]='</li>';specUI[specUI.length]='</ul>';specUI[specUI.length]='</div>';}
specUI[specUI.length]='</div>';if(bFactory){specUI[specUI.length]='<div id="div_prsample_'+strSpecId+'" class="syi-price-ri-row clearfix" style="display:none;height:20px;">';specUI[specUI.length]='<ul style="height:20px;">';specUI[specUI.length]='<li class="li1" style="height:20px;">';specUI[specUI.length]='&nbsp;'+msg_createSpecificationUI_html2;specUI[specUI.length]='<input type="text" class="syi-input9" id="inp_prsstart_'+strSpecId+'" onBlur="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);"><span class="syi-font1" >--</span>';specUI[specUI.length]='<input type="text" class="syi-input9" id="inp_prsend_'+strSpecId+'" onBlur="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputbuyleast(this);getWPriceByS(\''+strSpecId+'\', 0, 2);"><span id="sortbyunit2" name="sortbyunit2">'+strUnitName+'</span></li>';specUI[specUI.length]='<li class="li2" style="height:20px;"><span>'+msg_createDHPortSpecificationUI_html4+'<input type="text" class="syi-input10" id="inp_prsseller_'+strSpecId+'" onBlur="inputFloat(this,2);getWPriceByS(\''+strSpecId+'\', 0, 2);" onKeyUp="inputFloat(this,2);getWPriceByS(\''+strSpecId+'\', 0, 2);"></span></li>';specUI[specUI.length]='<li id="inp_prsbuyer_'+strSpecId+'" class="li3" style="height:20px;"></li>';specUI[specUI.length]='<li class="li4" style="height:20px;"><input type="text" class="syi-input9" id="inp_prsltime_'+strSpecId+'" onKeyUp="inputbuyleast(this);" onBlur="inputbuyleast(this);"></li>';specUI[specUI.length]='<li class="li5" style="height:20px;"><a onclick="addSamplePrice(\''+strSpecId+'\', false);return false;" href="javascript:void(0)" >'+msg_createSpecificationUI_html3+'</a></li></ul>';specUI[specUI.length]='</div>';}
specUI[specUI.length]='<div class="row1">';specUI[specUI.length]='<span class="tourBtn"><input type="button" value="'+msg_createSpecificationUI_html5+'" onclick="addPriceRange(\''+strSpecId+'\')" ></span>';if(bFactory){specUI[specUI.length]='&nbsp;&nbsp;<span class="tourBtn" id="btn_addsample_'+strSpecId+'" onclick="addSamplePrice(\''+strSpecId+'\', true)" ><input type="button" value="'+msg_createSpecificationUI_html6+'"></span>';}
specUI[specUI.length]='</div>';specUI[specUI.length]='</div>';return specUI.join("");}
function addPriceRange(strSpecId){var i=0;hideErrorTip("productprice");var isFactory=$("#isfactory").val();for(;i<5;i++){var oPRange=$("#div_pr_"+strSpecId+"_"+i);if(oPRange.css("display")=="none"){if(i!=0){var nPre=i-1;var nPreStart=$("#inp_prstart_"+strSpecId+'_'+nPre).val();var nPreEnd=$("#inp_prend_"+strSpecId+'_'+nPre).val();if(nPreStart==""||nPreEnd==""||nPreStart*1>nPreEnd*1||(nPreStart*1==nPreEnd*1&&(nPreStart*1!=1||isFactory==1||(isFactory==0&&nPre>0)))){showErrorTip("productprice",msg_addPriceRange_html);return;}
$("#inp_prstart_"+strSpecId+'_'+i).val(nPreEnd*1+1);}
oPRange.css("display","block");break;}}
if(i==5){alert(msg_addPriceRange_alert);}
else{$("#a_addpr_"+strSpecId+"_"+(i-1)).html("");}}
function deletePriceSpecification(strSpecId){if(g_product_spec_list.specList[strSpecId]==null)
return false;if(strSpecId.split("_").length==1&&(window["isHasSellerAttr"]&&!isHasSellerAttr())){var nSpecLength=document.getElementsByName("div_product_pricespecification").length;if(nSpecLength==1&&!isHasSellerAttr()){var oContainer=$("#div_pprice_container");oContainer.removeClass("syi-price syi-price4");oContainer.addClass("syi-price syi-price2");$("#inp_sname_"+strSpecId).val("");$("#a_addspecification").show();$("#btn_addspecification").hide();}
else{$("#div_"+strSpecId).remove();g_product_spec_list.nCount=g_product_spec_list.nCount-1;delete g_product_spec_list.specList[strSpecId];}}
else{$("#div_"+strSpecId).remove();g_product_spec_list.nCount=g_product_spec_list.nCount-1;delete g_product_spec_list.specList[strSpecId];if(g_product_spec_list.nCount==0){$("#div_price_covering").show();}}
if(window.event)window.event.returnValue=false;return false;}
function deletePriceRange(oA,strSpecId,nIndex){if(oA!=null&&oA.innerHTML=="")return;var strBeginBase="inp_prstart_";var strEndBase="inp_prend_";var strSellerPriceBase="inp_prseller_";var strBuyerBase="inp_prbuyer_";var strLTimeBase="inp_prltime_";var strBegin=strBeginBase+strSpecId+"_"+nIndex;var strEnd=strEndBase+strSpecId+"_"+nIndex;var strSellerPrice=strSellerPriceBase+strSpecId+"_"+nIndex;var strBuyer=strBuyerBase+strSpecId+"_"+nIndex;var strLTime=strLTimeBase+strSpecId+"_"+nIndex;$("#"+strBegin).val("");$("#"+strEnd).val("");$("#"+strSellerPrice).val("");$("#"+strBuyer).html("");$("#"+strLTime).val("");$("#div_pr_"+strSpecId+"_"+nIndex).hide();if(nIndex>1){$("#a_addpr_"+strSpecId+"_"+(nIndex-1)).html(msg_createSpecificationUI_html3);}}
function addSamplePrice(strSpecId,bAdd){if(bAdd){var nStartNum=$("#inp_prstart_"+strSpecId+"_0").val();if(nStartNum>1){showSampleUI(strSpecId,true);$("#inp_prsstart_"+strSpecId).val("1");$("#inp_prsend_"+strSpecId).val(nStartNum-1);}
else{alert(msg_addSamplePrice_alert);}}else{var strBegin="inp_prsstart_"+strSpecId;var strEnd="inp_prsend_"+strSpecId;var strSellerPrice="inp_prsseller_"+strSpecId;var strBuyer="inp_prsbuyer_"+strSpecId;var strLTime="inp_prsltime_"+strSpecId;$("#"+strSellerPrice).val("");$("#"+strBuyer).html("");$("#"+strLTime).val("");showSampleUI(strSpecId,false);}}
function showSampleUI(strSpecId,bShow){if(bShow){$("#div_prsample_"+strSpecId).show();$("#btn_addsample_"+strSpecId).hide();}else{$("#div_prsample_"+strSpecId).hide();$("#btn_addsample_"+strSpecId).show();}}
function getProductPriceDataForSubmit(){DhgateConsole.info('获取产品价格数据');return[];}
function getProductPriceDataForSavedraftbox(){DhgateConsole.info('获取产品价格数据');var proSpecList=null;var isFactory=($("#isfactory").val()=="1")?true:false;var nSCount=g_product_spec_list.nCount;if(nSCount>0){var specList=g_product_spec_list.specList;for(strSpecId in specList){if(specList[strSpecId]==null)
continue;var specItem=new GoodsSpecificationVO();var oSpecdes=$("#inp_sname_"+strSpecId);var specdes=oSpecdes.val();if(specdes!=null){specdes=replaceZhToEn(specdes);specdes=specdes.Trim().replace(/<script[^>]*>[\w\W]*?<\/script>/gi,'');oSpecdes.val(specdes);if(!checkValidEnglish(oSpecdes[0])){showErrorTip("productprice",mag_checkProductDesc_chinese);return null;}
specItem.description=specdes;}
var pRangeList=null;for(var i=0;i<5;i++){var strPDivId="div_pr_"+strSpecId+"_"+i;if($("#"+strPDivId).css("display")!="none"){var priceRangeVO=new GoodsPriceRangeVO();priceRangeVO.startqty=$("#inp_prstart_"+strSpecId+"_"+i).val();priceRangeVO.endqty=$("#inp_prend_"+strSpecId+"_"+i).val();priceRangeVO.leadingtime=$("#inp_prltime_"+strSpecId+"_"+i).val();priceRangeVO.webprice=$("#inp_prseller_"+strSpecId+"_"+i).val();var pricestr=$("#inp_prbuyer_"+strSpecId+"_"+i).html();if(pricestr!=null&&pricestr.length!=0){var pricearr=pricestr.split("-");priceRangeVO.endbprice=pricearr[0];if(pricearr.length>1&&pricearr[1]!=null&&$.trim(pricearr[1])!='null'){priceRangeVO.price=pricearr[1];}else{priceRangeVO.price=pricearr[0];;}}
if($("#producttype").val()=="1"){priceRangeVO.leadingtime=2;}
priceRangeVO.issample=0;if(pRangeList==null){pRangeList=[];}
pRangeList[pRangeList.length]=priceRangeVO;}}
if(isFactory){if($("#div_prsample_"+strSpecId).css("display")!="none"){var priceRangeVO=new GoodsPriceRangeVO();priceRangeVO.startqty=$("#inp_prsstart_"+strSpecId).val();priceRangeVO.endqty=$("#inp_prsend_"+strSpecId).val();priceRangeVO.leadingtime=$("#inp_prsltime_"+strSpecId).val();priceRangeVO.webprice=$("#inp_prsseller_"+strSpecId).val();priceRangeVO.issample=1;var pricestr=$("#inp_prsbuyer_"+strSpecId+"_"+i).html();if(pricestr!=null&&pricestr.length!=0){var pricearr=pricestr.split("-");priceRangeVO.endbprice=pricearr[0];if(pricearr.length>1&&pricearr[1]!=null&&$.trim(pricearr[1])!='null'){priceRangeVO.price=pricearr[1];}else{priceRangeVO.price=pricearr[0];}}
if(pRangeList==null){pRangeList=[];}
pRangeList[pRangeList.length]=priceRangeVO;}}
if(pRangeList!=null){specItem.priceRangeVOList=pRangeList;}
var arrSpecId=strSpecId.split("_");if(arrSpecId.length>1){var priceAttrVOList=null;var arrAttrList=strSpecId.split("__");for(var j=0;j<arrAttrList.length;j++){var arrAV=arrAttrList[j].split("_");var strAttrId=arrAV[0];var strAttrValId=arrAV[1];var pavo=new GoodsPriceAttrVO();pavo.attrId=strAttrId;pavo.attrValId=strAttrValId;if(priceAttrVOList==null){priceAttrVOList=[];}
priceAttrVOList[priceAttrVOList.length]=pavo;}
specItem.specAttrVOList=priceAttrVOList;}
if(proSpecList==null){proSpecList=[];}
proSpecList[proSpecList.length]=specItem;}}
return proSpecList;}
function checkPriceRangDataForSubmit(priceRangeVO){return true;}
function resetPriceSpic(){if(g_product_spec_list.nCount<=0){if(!isHasSellerAttr()&&!g_bInitProductData){createPriceSpecification();}}else{var specList=g_product_spec_list.specList;for(var strSpecId in specList){deletePriceSpecification(strSpecId);}
$("#btn_addspecification").hide();if(!isHasSellerAttr()&&g_product_spec_list.nCount<=0&&!g_bInitProductData){createPriceSpecification();}}}
function uncheckSaleAttr(oEle){hideErrorTip("productprice");if(g_cate_seller_attr==null){showErrorTip("productprice",msg_uncheckSaleAttr_html1);}
else{if(isHasSellerAttr()){showErrorTip("productprice",msg_uncheckSaleAttr_html2);}
else{createPriceSpecification();}}}
function initProductSpecification(){if(g_product_specold_list==null){return;}
if(g_bInitProductData){window.setTimeout(function(){initProductSpecification();},50);return;}
var specList=g_product_spec_list.specList;for(var i=0;i<g_product_specold_list.length;i++){var oSpecItem=g_product_specold_list[i];if(oSpecItem.description!=null&&oSpecItem.description!=""){$("#div_pprice_container").removeClass().addClass("syi-price syi-price4");}
var specAttrVOList=oSpecItem.specAttrVOList;var strSpecId=i;if(specAttrVOList!=null){if(specAttrVOList.length==1){strSpecId=specAttrVOList[0].attrId+"_"+specAttrVOList[0].attrValId;if(specList[strSpecId]==null){strSpecId=null;}}
else
if(specAttrVOList.length==2){var strAttr1Id=specAttrVOList[0].attrId+"_"+specAttrVOList[0].attrValId;var strAttr2Id=specAttrVOList[1].attrId+"_"+specAttrVOList[1].attrValId;strSpecId=strAttr1Id+"__"+strAttr2Id;if(specList[strSpecId]==null){strSpecId=strAttr2Id+"__"+strAttr1Id;if(specList[strSpecId]==null){strSpecId=null;}}}}
else{strSpecId=i;}
if(strSpecId!=null){if($("#div_"+strSpecId).length==0){strSpecId=createPriceSpecification(null,oSpecItem.description);}
var priceRangeVOList=oSpecItem.priceRangeVOList;if(priceRangeVOList&&priceRangeVOList.length>0){var strDes=oSpecItem.description;setProductSPRangeTimeOut2(strSpecId,strDes,priceRangeVOList);}}}
createInventoryUI(false,g_inventory_list);g_inventory_list=null;g_product_specold_list=null;}
var g_sTime={};function setProductSPRangeTimeOut2(strSpecId,strDes,priceRangeVOList){if(g_sTime[strSpecId]==null){g_sTime[strSpecId]=window.setTimeout(function(){setProductSPRangeTimeOut2(strSpecId,strDes,priceRangeVOList);},100);return;}else{for(var i=0;i<priceRangeVOList.length;i++){var oPRangeItem=priceRangeVOList[i];setProductSPRanges(strSpecId,strDes,oPRangeItem,i);}}}
function setProductSPRangeTimeOut(strspId,strDes,oPRangeItem,prindex){window.setTimeout(function(){setProductSPRanges(strspId,strDes,oPRangeItem,prindex);},100);}
function setProductSPRanges(strSpecId,strDes,oPRangeItem,rIndex){if(g_product_spec_list.nCount==0||g_product_spec_list.specList[strSpecId]==null||oPRangeItem==null){return;}
var strBeginBase="inp_prstart_";var strEndBase="inp_prend_";var strSellerPriceBase="inp_prseller_";var strBuyerBase="inp_prbuyer_";var strLTimeBase="inp_prltime_";if(oPRangeItem.issample!=1){var strBegin=strBeginBase+strSpecId+"_"+rIndex;if($("#"+strBegin).length==0){setProductSPRangeTimeOut(strSpecId,strDes,oPRangeItem,rIndex);return;}
var strEnd=strEndBase+strSpecId+"_"+rIndex;var strSellerPrice=strSellerPriceBase+strSpecId+"_"+rIndex;var strBuyer=strBuyerBase+strSpecId+"_"+rIndex;var strLTime=strLTimeBase+strSpecId+"_"+rIndex;$("#"+strBegin).val(oPRangeItem.startqty);$("#"+strEnd).val(oPRangeItem.endqty);$("#"+strSellerPrice).val(oPRangeItem.webprice);if(oPRangeItem.price==oPRangeItem.endbprice){$("#"+strBuyer).html(oPRangeItem.price);}
else{$("#"+strBuyer).html(oPRangeItem.price+" - "+oPRangeItem.endbprice);}
$("#"+strLTime).val(oPRangeItem.leadingtime);if(rIndex>0){addPriceRange(strSpecId);}}
else{var strBegin="inp_prsstart_"+strSpecId;if($("#"+strBegin).length==0){setProductSPRangeTimeOut(strSpecId,strDes,oPRangeItem,rIndex);return;}
var strEnd="inp_prsend_"+strSpecId;var strSellerPrice="inp_prsseller_"+strSpecId;var strBuyer="inp_prsbuyer_"+strSpecId;var strLTime="inp_prsltime_"+strSpecId;$("#"+strBegin).val(oPRangeItem.startqty);$("#"+strEnd).val(oPRangeItem.endqty);$("#"+strSellerPrice).val(oPRangeItem.webprice);if(oPRangeItem.price==oPRangeItem.endbprice){$("#"+strBuyer).html(oPRangeItem.price);}
else{$("#"+strBuyer).html(oPRangeItem.price+" - "+oPRangeItem.endbprice);}
$("#"+strLTime).val(oPRangeItem.leadingtime);showSampleUI(strSpecId,true);}}
function showPriceCopyingWin(strSrcSpecId){if(g_product_spec_list.nCount<2){return;}
$("#inp_temp_sp").val(strSrcSpecId);$("#inp_temp_sp").attr("checked",false);var specList=g_product_spec_list.specList;var strCopyingUI=[];for(var strSpecId in specList){if(specList[strSpecId]==null)continue;var specdes="";var arrSpecId=strSpecId.split("_");if(arrSpecId.length>1){specdes=$("#p_specdes_"+strSpecId).html();}else{var oSpecdes=$("#inp_sname_"+strSpecId);specdes=oSpecdes.val();if(specdes.Trim()==""){alert("规格名称不能为空");oSpecdes.focus();return;}}
if(strSrcSpecId!=strSpecId){strCopyingUI[strCopyingUI.length]='<li><input type="checkbox" value="'+strSpecId+'" name="inp_des_sp"><a href="javascript:void(0)" onclick="return false;" >'+specdes+'</a></li>';}}
$("#ul_price_copying").html(strCopyingUI.join(""));var strAId='a_copyingp_'+strSrcSpecId;var strAIdoffset=$("#"+strAId).offset();var mainTopValue=$("#postMain").scrollTop();$("#div_price_copying").css("left",0).css("top",mainTopValue+strAIdoffset.top+15).show();}
function selectAll(oCB,strName){if(oCB!=null){var oCList=$("input[name='"+strName+"']");var bCheck=oCB.checked;for(var i=0;i<oCList.length;i++){oCList[i].checked=bCheck;}}}
function CopyingPriceSp(){var oCList=$("input[name='inp_des_sp']:checked");if(oCList.length==0){alert("请先选择要复制到的规格");return;}else{var nCount=1;var bHasSample=false;var pRangeList=null;var strSpecId=$("#inp_temp_sp").val();var specItem=getSPPriceData(strSpecId);if(specItem!=null){pRangeList=specItem.priceRangeVOList;nCount=pRangeList.length;for(var i=0;i<oCList.length;i++){strSpecId=oCList[i].value;CopyingSpPriceRangeData(strSpecId,pRangeList);}}}
priceclose();}
function priceclose(){$("#inp_temp_sp").attr("checked",false);$("#div_price_copying").hide();}
function getSPPriceData(strSpecId){var isFactory=($("#isfactory").val()=="1")?true:false;var specItem=new GoodsSpecificationVO();var oSpecdes=$("#inp_sname_"+strSpecId);var specdes=oSpecdes.val();if(specdes!=null&&specdes!=""){specdes=replaceZhToEn(specdes);oSpecdes.val(specdes.replace(/<script[^>]*>[\w\W]*?<\/script>/gi,''));if(!checkValidEnglish(oSpecdes[0])){showErrorTip("productprice",mag_checkProductDesc_chinese);}
specItem.description=specdes;}else{return null;}
var pRangeList=null;for(var i=0;i<5;i++){var strPDivId="div_pr_"+strSpecId+"_"+i;if($("#"+strPDivId).css("display")!="none"){var priceRangeVO=new GoodsPriceRangeVO();priceRangeVO.startqty=$("#inp_prstart_"+strSpecId+"_"+i).val();priceRangeVO.endqty=$("#inp_prend_"+strSpecId+"_"+i).val();priceRangeVO.leadingtime=$("#inp_prltime_"+strSpecId+"_"+i).val();priceRangeVO.webprice=$("#inp_prseller_"+strSpecId+"_"+i).val();if($("#producttype").val()=="1"){priceRangeVO.leadingtime=2;}
priceRangeVO.issample=0;if(pRangeList==null){pRangeList=[];}
pRangeList[pRangeList.length]=priceRangeVO;}}
if(isFactory){if($("#div_prsample_"+strSpecId).css("display")!="none"){var priceRangeVO=new GoodsPriceRangeVO();priceRangeVO.startqty=$("#inp_prsstart_"+strSpecId).val();priceRangeVO.endqty=$("#inp_prsend_"+strSpecId).val();priceRangeVO.leadingtime=$("#inp_prsltime_"+strSpecId).val();priceRangeVO.webprice=$("#inp_prsseller_"+strSpecId).val();priceRangeVO.issample=1;if(pRangeList==null){pRangeList=[];}
pRangeList[pRangeList.length]=priceRangeVO;}}
if(pRangeList!=null&&pRangeList.length>0){specItem.priceRangeVOList=pRangeList;}else{specItem=null;}
return specItem;}
function CopyingSpPriceRangeData(strSpecId,pRangeList){var bHasSample=false;var nOldS=$("#inp_prstart_"+strSpecId+"_0").val();var nOldE=$("#inp_prend_"+strSpecId+"_0").val();var nOldL=$("#inp_prltime_"+strSpecId+"_0").val();if(nOldS!=""||nOldE!=""||nOldL!=""){var replaceData=window.confirm("该操作会清空您要复制到的规格数据（包括数量区间与备货期），确认复制吗？");if(!replaceData){return;}}
for(var i=0;i<6;i++){var priceRangeVO=pRangeList[i];if(priceRangeVO==null){deletePriceRange(null,strSpecId,i);continue;}
var strPDivId="div_pr_"+strSpecId+"_"+i;if(priceRangeVO.issample==1){bHasSample=true;addSamplePrice(strSpecId,true);deletePriceRange(null,strSpecId,i);$("#inp_prsstart_"+strSpecId).val(priceRangeVO.startqty);$("#inp_prsend_"+strSpecId).val(priceRangeVO.endqty);$("#inp_prsltime_"+strSpecId).val(priceRangeVO.leadingtime);}else{if($("#"+strPDivId).css("display")=="none"){addPriceRange(strSpecId);}
$("#inp_prstart_"+strSpecId+"_"+i).val(priceRangeVO.startqty);$("#inp_prend_"+strSpecId+"_"+i).val(priceRangeVO.endqty);$("#inp_prltime_"+strSpecId+"_"+i).val(priceRangeVO.leadingtime);}}
if(!bHasSample){addSamplePrice(strSpecId,false);}}
function getRandomUUID(){var s=[],itoh='0123456789ABCDEF'.split("");for(var i=0;i<36;i++){s[i]=Math.floor(Math.random()*0x10);}
s[14]=4;s[19]=(s[19]&0x3)|0x8;for(var i=0;i<36;i++){s[i]=itoh[s[i]];}
s[8]=s[13]=s[18]=s[23]='0';return s.join('');}
function test1(){var str=JSON.stringify(getProductPriceDataForSubmit());alert(str);}
function checkinputbuy(buy){var str=buy.value;for(var i=(str.length-1)*1;i>=0;i--){if(!isInt(str)){var ilen=str.length;str=str.substring(0,ilen-1);}else{break;}}
buy.value=str;}
function inputbuyleast(buyleast){checkinputbuy(buyleast);var buyleastText=buyleast.value;buyleastText=buyleastText+"";var dotindex=buyleastText.indexOf(".");if(dotindex>0){var t=buyleastText.substring(0,dotindex);if(t.length>7){showErrorTip("productprice",mes_product_js_35);return false;}}
else{if(buyleastText.length>7){showErrorTip("productprice",mes_product_js_35);return false;}}
return true;}
var g_arrGetPriceTime={};function getWPriceByS(sTag,iFCL,nType,strPriceName,strNetName){if(sTag==null||sTag=="")return;if(strPriceName==null){if(nType==1){}else if(nType==2){strPriceName="inp_prsseller_";}else{strPriceName="inp_prseller_";}}
if(strNetName==null){if(nType==1){}else if(nType==2){strNetName="inp_prsbuyer_";}else{strNetName="inp_prbuyer_";}}
var strTimeSerial=sTag;if(strPriceName!=null){strTimeSerial=strPriceName+sTag;}
if(g_arrGetPriceTime[strTimeSerial]!=0){window.clearTimeout(g_arrGetPriceTime[strTimeSerial]);g_arrGetPriceTime[strTimeSerial]=0;}
var nSPrice=$("#"+strTimeSerial).val();if(nType==1){}else if(nType==2){if($('#isdhport').attr("checked")==true){$("#pricesampledhportlow").val($("#"+strTimeSerial).val());$("#pricesampledhportpresell").val($("#"+strTimeSerial).val());}
if($("#buyleastsample"+sTag).val()==""||$("#"+strTimeSerial).val()==""){$("#"+strNetName+sTag).val("");if($('#isdhport').attr("checked")==true){$("#netdhportlowsample").val("");$("#netdhportpresellsample").val("");}
return;}}else{if($("#inp_prstart_"+sTag).val()==""||nSPrice==""){$("#"+strNetName+sTag).val("");return;}}
g_arrGetPriceTime[strTimeSerial]=window.setTimeout(function(){getWPriceBySTime(sTag,iFCL,nType,strPriceName,strNetName);},1000);}
function getWPriceBySTime(sTag,iFCL,nType,strPriceName,strNetName){if(sTag==null||sTag=="")return;var strTimeSerial=sTag;if(strPriceName!=null){strTimeSerial=strPriceName+sTag;}
g_arrGetPriceTime[strTimeSerial]=0;var strLeastId="inp_prstart_";var strEndId="inp_prend_";if(nType==2){strLeastId="inp_prsstart_";strEndId="inp_prsend_";}else{if(strNetName==null){strNetName="inp_prbuyer_";}}
strLeastId+=sTag;strEndId+=sTag;var iBuyLease=$("#"+strLeastId).val();var iBuyMost=$("#"+strEndId).val();if(nType!=1&&strPriceName==null){strPriceName="inp_prseller_";}
if(strPriceName!=null){strPriceName+=sTag;}
if(strNetName!=null){strNetName+=sTag;}
if(strPriceName!=null){var nSPrice=$("#"+strPriceName).val();}
var strUrl="/mydhgate/product/commissionsupplierpriceAjax.do?isblank=true";var strData="byuymostTest="+parseInt(iBuyLease)+"&endnum="+parseInt(iBuyMost);var isquickup=$("#isquickup").val();if(isquickup==1){strData+="&isquickup=1";}
if(strPriceName!=null){if(nSPrice==""||iBuyLease==""||iBuyMost==""||isNaN(parseInt(iBuyLease))||parseInt(iBuyLease)<1||isNaN(parseInt(iBuyMost))||parseInt(iBuyMost)<1||parseInt(iBuyLease)>parseInt(iBuyMost)||isNaN(parseFloat(nSPrice))||parseFloat(nSPrice)<0.01){$("#"+strNetName).html("");return false;}
if(parseInt(iBuyLease)>parseInt(iBuyMost)){$("#"+strNetName).val("");return false;}
strData+="&supplierpriceText="+parseFloat(nSPrice);ajaxGetBuyerPrice(strUrl,strData,strNetName);}else{if(nType==1){var strPriceNameLow="inp_prsellerlow_"+sTag;var strPriceNamePre="inp_prsellerpre_"+sTag;var strPriceName="inp_prseller_"+sTag;var strNetNameLow="inp_prbuyerlow_"+sTag;var strNetNamePre="inp_prbuyerpre_"+sTag;var strNetName="inp_prbuyer_"+sTag;if(nSPrice==""||iBuyLease==""||iBuyMost==""||isNaN(parseInt(iBuyLease))||parseInt(iBuyLease)<1||isNaN(parseInt(iBuyMost))||parseInt(iBuyMost)<1||parseInt(iBuyLease)>parseInt(iBuyMost)){$("#"+strNetNameLow).html("");$("#"+strNetNamePre).html("");$("#"+strNetName).html("");return false;}
var nSPriceLow=$("#"+strPriceNameLow).val();var nSPricePre=$("#"+strPriceNamePre).val();var nSPrice=$("#"+strPriceName).val();if(isNaN(parseFloat(nSPriceLow))||parseFloat(nSPriceLow)<0.01){$("#"+strNetNameLow).html("");}else{var strDataLow=strData+"&supplierpriceText="+parseFloat(nSPriceLow);ajaxGetBuyerPrice(strUrl,strDataLow,strNetNameLow);}
if(isNaN(parseFloat(nSPricePre))||parseFloat(nSPricePre)<0.01){$("#"+strNetNamePre).html("");}else{var strDataPre=strData+"&supplierpriceText="+parseFloat(nSPricePre);ajaxGetBuyerPrice(strUrl,strDataPre,strNetNamePre);}
if(isNaN(parseFloat(nSPrice))||parseFloat(nSPrice)<0.01){$("#"+strNetName).html("");}else{strData+="&supplierpriceText="+parseFloat(nSPrice);ajaxGetBuyerPrice(strUrl,strData,strNetName);}}}
g_arrGetPriceTime[strTimeSerial]=0;}
function ajaxGetBuyerPrice(strUrl,strData,strNetName){var catePubId=$("#inp_catepubid").val();if(catePubId!=null){strData+="&catePubId="+catePubId;}
if(catePubId!=null){var micTag=$("#micTag").val();if(micTag==="1"){micTag="MIC";}
strData+="&micTag="+micTag;}
$.ajax({type:"GET",url:strUrl,data:strData,success:function(data){if(data.error=="0"){$("#"+strNetName).html(data.msg);return true;}else{$("#"+strNetName).html("");return false;}},async:true,dataType:"json",error:function(){$("#"+strNetName).html("");}});}
function changeNextBuyLeast(strSpecId,iPriceIndex){if(iPriceIndex>=4)return;var oDivMsg=$("#productpriceErrTip");var strTag=strSpecId+"_"+iPriceIndex;var strLeastId="inp_prstart_";var strEndId="inp_prend_";var isfactory=$("#isfactory").val();var iCurStart=$("#"+strLeastId+strTag).val();var iCurEnd=$("#"+strEndId+strTag).val();if(iCurEnd!=""&&!isNaN(parseInt(iCurEnd))&&iCurStart!=""&&!isNaN(parseInt(iCurStart))){if(parseInt(iCurEnd)<parseInt(iCurStart)||((isfactory==1||(isfactory==0&&iPriceIndex>0&&parseInt(iCurStart)!=1))&&parseInt(iCurEnd)==parseInt(iCurStart))){showErrorTip("productprice",msg_checkMostGreatLeast_html);return;}}
if(iCurEnd!=""&&!isNaN(parseInt(iCurEnd))){var strNextTag=strSpecId+"_"+(iPriceIndex*1+1);var nNextBegin=iCurEnd*1+1;$("#"+strLeastId+strNextTag).val(nNextBegin);var nNextEnd=$("#"+strEndId+strNextTag).val();if(nNextEnd!=""&&!isNaN(parseInt(nNextEnd))){if(nNextBegin>parseInt(nNextEnd)){if(oDivMsg[0]!=null){oDivMsg.show().html("<p>"+msg_addProductPriceRow_alert+"</p>");}else{alert(msg_addProductPriceRow_alert);}
return false;}}}
oDivMsg.hide();};
var g_categorySearchResult;var g_recentCategories=null;var g_goodsNameSearchResult=null;var g_cate_children_cache={};var g_catagory_level_result=[];var g_isWeigthRange_CatePub=[];var g_category_path_ch=[];function setSyiVersionURL(){var timer=null;var finished=false;timer=setInterval(function(){try{if(finished){clearInterval(timer);}
var headiframe=document.getElementById('headiframe');var vro=jQuery(headiframe).contents().find("#viewReturn");var csvo=jQuery(headiframe).contents().find("#changeSyiVsersion");if(csvo!=undefined&&csvo!='undefined'&&csvo!=''&&csvo.length>0){if(jQuery('#oldSyiVersionURL').val()==""){vro.hide();}else{csvo.attr("syiurl",jQuery('#oldSyiVersionURL').val());vro.show();}
finished=true;}}catch(e){}},50);}
function click_selectSubCategory(oThis){var div_ul_li=$(oThis);var var_catepubid=div_ul_li.attr("catepubid");var var_name_info=div_ul_li.attr("name_info");var var_remark=div_ul_li.attr("remark");var var_admittance=div_ul_li.attr("admittance");var message=div_ul_li.attr("message");var show_test=div_ul_li.html();var level;if(var_catepubid.length==3){level=1;$("#catagory1").html("");$("#catagory2").html("");$("#catagory3").html("");g_catagory_level_result[2]=null;g_catagory_level_result[3]=null;g_catagory_level_result[4]=null;$("#catagory0>li").removeClass("hover");div_ul_li.addClass("hover");}else if(var_catepubid.length==6){level=2;$("#catagory2").html("");$("#catagory3").html("");g_catagory_level_result[2]=null;g_catagory_level_result[3]=null;g_catagory_level_result[4]=null;$("#catagory1>li").removeClass("hover");div_ul_li.addClass("hover");}else if(var_catepubid.length==9){level=3;$("#catagory3").html("");g_catagory_level_result[3]=null;g_catagory_level_result[4]=null;$("#catagory2>li").removeClass("hover");div_ul_li.addClass("hover");}else if(var_catepubid.length==12){level=4;$("#catagory4").html("");$("#catagory3>li").removeClass("hover");div_ul_li.addClass("hover");}
var var_leaf=div_ul_li.attr("leaf");if(var_leaf=="0"){categoryVO={};categoryVO.catePubId=var_catepubid;categoryVO.leaf=var_leaf;onLeveledCategoryClick(categoryVO,level);}
$("#inp_catepubid").val(var_catepubid);show_category_path(var_leaf,var_name_info,level-1,var_remark,var_admittance,message);}
function onLeveledCategoryClick(categoryVO,level){if(categoryVO==null)categoryVO={};if(level==null){level=0;}
var children=g_cate_children_cache[categoryVO.catePubId];if(children){success(children);return;}
function success(result){g_catagory_level_result[level]=result;if(categoryVO.admittanceDto!=null&&result!=null){$(result).each(function(index){result[index].admittanceDto=categoryVO.admittanceDto;});}
fillCategory(level);if(result!=null&&result.length>0){g_cate_children_cache[categoryVO.catePubId]=result;}}
var url="/syi/categorybyid.do";jQuery.ajax({url:url,data:{isblank:true,catePubId:categoryVO.catePubId},success:success});}
function show_category_path(var_leaf,show_test,level,var_remark,var_admittance,message){var temp;g_category_path_ch[level]=show_test;if(level==0){g_category_path_ch[1]="";g_category_path_ch[2]="";g_category_path_ch[3]="";}else if(level==1){g_category_path_ch[2]="";g_category_path_ch[3]="";}else if(level==2){g_category_path_ch[3]="";}
if(g_category_path_ch[0]!=""){temp="<b>"+g_category_path_ch[0]+"</b>";}
if(g_category_path_ch[1]!=""){temp=temp+"<span>&gt;</span>"+"<b>"+g_category_path_ch[1]+"</b>";}
if(g_category_path_ch[2]!=""){temp=temp+"<span>&gt;</span>"+"<b>"+g_category_path_ch[2]+"</b>";}
if(g_category_path_ch[3]!=""){temp=temp+"<span>&gt;</span>"+"<b>"+g_category_path_ch[3]+"</b>";}
if(var_leaf=="0"){$("#show_category_path").html(temp+"<span class='color4'>（请选择下级类目）</span>");}else{$("#show_category_path").html(temp);}
if(var_remark!=null){$("#div_show_remark").show();$("#show_remark").html(var_remark);}else{$("#div_show_remark").hide();$("#show_remark").html("");}
var var_catepubid=$("#inp_catepubid").val();var punish=getPunishCatePubId(var_catepubid);if(punish!=null){$("#div_show_admittance").html("'抱歉，由于您的帐户受到“限制类目经营”处罚，此类目不能上传新产品。处罚到期后可申请解除，具体请您查看站内信通知。';");$("#div_show_admittance").show();}else if(var_admittance=="0"||var_admittance=="1"||var_admittance=="2"){$("#div_show_admittance").html(message);$("#div_show_admittance").show();}else{$("#div_show_admittance").html("");$("#div_show_admittance").hide();}
if(var_leaf=="0"){$("#button_category").addClass("submit-syi initialstate");$("#submit_button").attr("disabled",true);}else{if(var_admittance==undefined&&punish==null){$("#submit_button").attr("disabled","");$("#button_category").removeClass("initialstate");}}}
function fillCategory(level){var var_inp_catepubid=$("#inp_catepubid").val();var strUlId="catagory"+level;var ul$=$("#"+strUlId);$("#div_catagory"+level).addClass("addscroll");ul$.html("");var index=0;var index_selected=0;var currentResult=g_catagory_level_result[level];if(!currentResult||currentResult.length==0){return;}
jQuery.each(currentResult,function(i){var var_pubName=currentResult[i]["pubName"];var var_pubNameCn=currentResult[i]["pubNameCn"];var var_leaf=currentResult[i]["leaf"];var var_catePubId=currentResult[i]["catePubId"];var var_remark=currentResult[i]["remark"];var admittance;var message;var admittanceDto=currentResult[i]["admittanceDto"];if(admittanceDto){admittance=admittanceDto["operattype"];message=admittanceDto["message"];}
var var_language_type=$("#input_language").val();var temp_pubName;var name_info=var_pubName+"("+var_pubNameCn+")";var title;if(var_language_type=="0"){temp_pubName=var_pubName;name_info=var_pubName+"("+var_pubNameCn+")";title=var_pubNameCn+"("+var_catePubId+")";}else{temp_pubName=var_pubNameCn;name_info=var_pubNameCn+"("+var_pubName+")";title=var_pubName+"("+var_catePubId+")";}
if(currentResult[i]["admittanceDto"]!=null){temp_pubName="<span class='limited' ><span> "+temp_pubName+" </span></span>";}
var strLiUI='<li>'+temp_pubName+'</li>';var li$=$(strLiUI);index=index+1;if(currentResult[i]["selected"]){li$.addClass("hover");index_selected=index;$("#inp_catepubid").val(var_catePubId);show_category_path(var_leaf,name_info,level,var_remark,admittance,message);}
addTitleForDebug(li$,title,var_leaf,admittance,name_info,var_remark,var_catePubId,message);li$.appendTo(ul$);});if(index_selected!=0){var divUlScroll=$("#div_catagory"+level);divUlScroll.scrollTop((index_selected-1)*20);}}
function fillCategorylanguage(level){var var_inp_catepubid=$("#inp_catepubid").val();var strUlId="catagory"+level;var ul$=$("#"+strUlId);$("#div_catagory"+level).addClass("addscroll");ul$.html("");var currentResult=g_catagory_level_result[level];if(!currentResult||currentResult.length==0){return;}
jQuery.each(currentResult,function(i){var var_pubName=currentResult[i]["pubName"];var var_pubNameCn=currentResult[i]["pubNameCn"];var var_leaf=currentResult[i]["leaf"];var var_catePubId=currentResult[i]["catePubId"];var var_remark=currentResult[i]["remark"];var admittance;var message;var admittanceDto=currentResult[i]["admittanceDto"];if(admittanceDto){admittance=admittanceDto["operattype"];message=admittanceDto["message"];}
var var_language_type=$("#input_language").val();var temp_pubName;var name_info=var_pubName+"("+var_pubNameCn+")";var title;if(var_language_type=="0"){temp_pubName=var_pubName;name_info=var_pubName+"("+var_pubNameCn+")";title=var_pubNameCn+"("+var_catePubId+")";}else{temp_pubName=var_pubNameCn;name_info=var_pubNameCn+"("+var_pubName+")";title=var_pubName+"("+var_catePubId+")";}
if(admittanceDto!=null){temp_pubName="<span class='limited' ><span> "+temp_pubName+" </span></span>";}
var strLiUI='<li>'+temp_pubName+'</li>';var li$=$(strLiUI);if(var_catePubId==var_inp_catepubid.substr(0,3)){li$.addClass("hover");show_category_path(var_leaf,name_info,level,var_remark,admittance,message);}
if(var_catePubId==var_inp_catepubid.substr(0,6)){li$.addClass("hover");show_category_path(var_leaf,name_info,level,var_remark,admittance,message);}
if(var_catePubId==var_inp_catepubid.substr(0,9)){li$.addClass("hover");show_category_path(var_leaf,name_info,level,var_remark,admittance,message);}
if(var_catePubId==var_inp_catepubid.substr(0,12)){li$.addClass("hover");show_category_path(var_leaf,name_info,level,var_remark,admittance,message);}
addTitleForDebug(li$,title,var_leaf,admittance,name_info,var_remark,var_catePubId,message);li$.appendTo(ul$);});}
function addTitleForDebug(li$,title,leaf,admittance,name_info,remark,var_catePubId,message){li$.attr("title",title);li$.attr("leaf",leaf);if(admittance!=""&&admittance!=null){li$.attr("admittance",admittance);if(message==null){message="抱歉，由于您的帐户受到“限制类目经营”处罚，此类目不能上传新产品。处罚到期后可申请解除，具体请您查看站内信通知。!";}
if(admittance=="0"){li$.attr("message","此类目是限制级类目，您没有权限选择此类目!<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=A77201D0866CBE90E04010AC0C64763E' target='_blank'>详情</a>");}else if(admittance=="1"){li$.attr("message","此类目是限制级类目，您没有权限选择此类目!<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=A77201D0866CBE90E04010AC0C64763E' target='_blank'>详情</a>");}else if(admittance=="2"){li$.attr("message",message+"<a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0201&artid=A77201D0866CBE90E04010AC0C64763E' target='_blank'>详情</a>");}}
if(name_info!=""&&name_info!=null){li$.attr("name_info",name_info);}
if(remark!=""&&remark!=null){li$.attr("remark",remark);}
li$.attr("catepubid",var_catePubId);}
function click_div_history(){var var_class=$("#div_history");if(!var_class.hasClass("drop-down-activation")){$("#div_history").addClass("drop-down-activation");$("#div_history .chouse-down-box").css({"display":"block"});}else{$("#div_history").removeClass("drop-down-activation");$("#div_history .chouse-down-box").css({"display":"none"});}}
function getRecentCategories(){if(g_recentCategories==null){jQuery.ajax({url:"/syi/recentCategory.do",data:{isblank:true},success:function(result){setRecentresult(result);},error:function(){g_recentCategories=[];}});}}
function setRecentresult(result){if(g_recentCategories==null){g_recentCategories=result;}
if(result=="no"){$("#recentCategoryDropdown").hide();return;}
var var_language_type=$("#input_language").val();var recentCategoryUL=$("#recentCategoryUL");recentCategoryUL.html("");var categoryDropdowns=[];var categoryDropdownsMap={};if(g_recentCategories!=null&&g_recentCategories.length>0){categoryDropdowns=categoryDropdowns.concat(g_recentCategories);}
for(var i=0;i<categoryDropdowns.length;i++){var oCateItem=categoryDropdowns[i];if(categoryDropdownsMap[oCateItem.catePubId]==null){categoryDropdownsMap[oCateItem.catePubId]=1;var strPathChinese=oCateItem["categoryPathChinese"];var var_catePubId=oCateItem["catePubId"];var strLeaf=oCateItem["leaf"];var var_remark=oCateItem["remark"];var var_categoryPath=oCateItem["categoryPath"];var li$;if(var_language_type=="1"){if(strPathChinese!=undefined&&strPathChinese.length>56){strPathChinese=strPathChinese.substr(0,56)+"...";}
if(strPathChinese!=undefined){li$=$("<li>"+strPathChinese+"</li>");}
addTitleForDebug(li$,var_categoryPath,strLeaf,admittance,'','',var_catePubId,message);}else{if(var_categoryPath!=""&&var_categoryPath.length>200){var_categoryPath=var_categoryPath.substr(0,200)+"...";}
li$=$("<li>"+var_categoryPath+"</li>");addTitleForDebug(li$,strPathChinese,strLeaf,admittance,'','',var_catePubId,message);}
var admittance;var message;var admittanceDto=oCateItem["admittanceDto"];if(admittanceDto){admittance=admittanceDto["operattype"];message=admittanceDto["message"];}
recentCategoryUL.find("li").live('mousemove',function(){$(this).addClass("sac_over");}).live('mouseout',function(){$(this).removeClass("sac_over");});li$.appendTo(recentCategoryUL);}}}
function click_recentCategoryUL(oThis){var div_ul_li=$(oThis);var var_catepubid=div_ul_li.attr("catepubid");var div_ul_li_html=div_ul_li.html();$("#show_history").html(div_ul_li_html);getSelectedCategories(var_catepubid);var search_resultUL=$("#search_result");search_resultUL.find("li").removeClass("hover");}
function getSelectedCategories(catePubId){var url="/syi/selectedCategories.do";jQuery.ajax({url:url,data:{"isblank":true,"catePubId":catePubId},success:function(result){$("#catagory0").html("");$("#catagory1").html("");$("#catagory2").html("");$("#catagory3").html("");g_catagory_level_result[1]=null;g_catagory_level_result[2]=null;g_catagory_level_result[3]=null;g_catagory_level_result[4]=null;for(var i=0;i<result.length;i++){g_catagory_level_result[i]=result[i];fillCategory(i);}}});}
function isWeigthRange_CatePub(catePubId){if(typeof(catePubId)=="undefined"||catePubId.length==0){return;}
if($("#isonlyweight").attr("checked")==true){if($("#baseqt").val().length>0||$("#stepqt").val().length>0||$("#stepweight").val().length>0){return;}}
if(g_isWeigthRange_CatePub[catePubId]!=null){catePubShowWeightRange(g_isWeigthRange_CatePub[catePubId]);return;}
jQuery.ajax({url:"/syi/isWeigthRangeCatePub.do",data:{"isblank":true,"catePubId":catePubId},success:function(result){g_isWeigthRange_CatePub[catePubId]=$(result)[0].result;catePubShowWeightRange(g_isWeigthRange_CatePub[catePubId]);}});}
function click_div_language(event){var var_class=$("#div_language");if(!var_class.hasClass("drop-down-activation")){$("#div_language").addClass("drop-down-activation");$("#div_language > .chouse-down-box").css({"display":"block"});}else{$("#div_language").removeClass("drop-down-activation");$("#div_language > .chouse-down-box").css({"display":"none"});}
$("#select_language").find("span").live('mousemove',function(){$(this).addClass("sac_over");}).live('mouseout',function(){$(this).removeClass("sac_over");});}
function click_select_language(oThis){var div_span=$(oThis);var var_language_type=div_span.attr("language_type");var var_language_test=div_span.html();$("#show_languag_text").html(var_language_test);$("#input_language").val(var_language_type);for(var i=0;i<4;i++){if(g_catagory_level_result[0]!=null){fillCategorylanguage(i);}}
setRecentresult(null);setSearchResult(null);}
function click_search_button(){var search_input=$("#search_input").val();var input_language=$("#input_language").val();$("#search_result").html("");$("#div_search_source").hide();$("#div_search_auth").hide();$("#div_search_none").hide();$("#div_search_tiperror").hide();var bool=false;if(""==search_input){$("#search_input").val("请您输入描述产品的英文关键字，例如long sleeve wedding dress");$("#search_input").css({color:"#999",fontSize:"12px"});return;}
if(search_input=="请您输入描述产品的英文关键字，例如long sleeve wedding dress"){return;}
var oInp=$("#search_input");bool=checkName("search_input");if(!bool){$("#div_search_none").html("<div class='div_search_error'><span>只能输入英文内容！</span></div>");$("#div_search_none").show();return;}
$("#show_search_input").html(search_input);var url="/syi/searchPubName.do";jQuery.ajax({url:url,timeout:5000,data:{"isblank":true,"search_input":search_input},success:function(result){if(result!=null){bool=setSearchResult(result);}else{bool=false;}
if(bool){$("#div_search_source").show();$("#div_search_none").hide();}else{$("#div_search_none").html("没有找到与<b>"+search_input+"</b>相关的类目!");$("#div_search_source").hide();$("#div_search_none").show();}},error:function(XMLResponse,textStatus,errorThrown){if(textStatus=='timeout'){$("#div_search_tiperror").show();}else{alert(XMLResponse.responseText);}}});}
function setSearchResult(result){var bool=false;var search_resultUL=$("#search_result");search_resultUL.html("");var var_language_type=$("#input_language").val();var categoryDropdowns=[];var categoryDropdownsMap={};if(result!=null){g_goodsNameSearchResult=result;}
if(g_goodsNameSearchResult!=null&&g_goodsNameSearchResult.length>0){categoryDropdowns=categoryDropdowns.concat(g_goodsNameSearchResult);}
for(var i=0;i<categoryDropdowns.length;i++){var oCateItem=categoryDropdowns[i];if(categoryDropdownsMap[oCateItem.catePubId]==null){categoryDropdownsMap[oCateItem.catePubId]=1;var strPathChinese=oCateItem["categoryPathChinese"];var var_catePubId=oCateItem["catePubId"];var strLeaf=oCateItem["leaf"];var var_categoryPath=oCateItem["categoryPath"];var var_remark=oCateItem["remark"];var li$;if(var_language_type=="1"){if(strPathChinese!=""&&strPathChinese.length>56){strPathChinese=strPathChinese.substr(0,56)+"...";}
li$=$("<li>"+strPathChinese+"</li>");addTitleForDebug(li$,var_categoryPath,strLeaf,admittance,'','',var_catePubId,message);}else{if(var_categoryPath!=""&&var_categoryPath.length>200){var_categoryPath=var_categoryPath.substr(0,200)+"...";}
li$=$("<li>"+var_categoryPath+"</li>");addTitleForDebug(li$,strPathChinese,strLeaf,admittance,'','',var_catePubId,message);}
var admittance;var message;var admittanceDto=oCateItem["admittanceDto"];if(admittanceDto){admittance=admittanceDto["operattype"];message=admittanceDto["message"];}
search_resultUL.find("li").live('mousemove',function(){$(this).addClass("sac_over");}).live('mouseout',function(){$(this).removeClass("sac_over");});li$.appendTo(search_resultUL);bool=true;}}
return bool;}
var searchInputOld;function onChange_search_button(){var search_input=$("#search_input").val();if(searchInputOld==search_input){return;}
searchInputOld=search_input;var div_ui=$("#ui_result_auth");div_ui.html("");if(search_input!=""){var url="/syi/searchAutomatic.do";jQuery.ajax({url:url,async:true,type:"post",dataType:"json",data:{"isblank":true,"search_input":search_input},success:function(result){var lis=result.split("|");for(var i=0;i<lis.length;i++){if(lis[i]!=null&&lis[i]!=""){var li$=$("<li>"+lis[i]+"</li>");li$.appendTo(div_ui);li$.live('mouseenter',function(){$(this).addClass("sac_over");}).live('mouseleave',function(){$(this).removeClass("sac_over");});}}},error:function(){}});$("#div_search_auth").show();}else{$("#div_search_auth").hide();}}
function click_search_auth_show(oThis){onmousedown="event.cancelBubble=true;";var div_ul_li=$(oThis);var div_ul_li_html=div_ul_li.text();$("#search_input").val(div_ul_li_html);click_search_button();$("#div_search_auth").hide();}
function click_search_resultUL(oThis){var div_ul_li=$(oThis);var search_result_li=$("#search_result").find("li");search_result_li.removeClass("hover");div_ul_li.addClass("hover");var var_catepubid=div_ul_li.attr("catepubid");var var_leaf=div_ul_li.attr("leaf");var div_ul_li_html=div_ul_li.html();getSelectedCategories(var_catepubid);$("#show_history").text("--请选择曾用产品类目-- ");}
function submitButton(){var inp_catepubid=$("#inp_catepubid").val();var inp_requestid=$("#requestid").val();if(inp_catepubid!=null){var url="/syi/edit.do?inp_catepubid="+inp_catepubid+"&requestid="+inp_requestid;if(inp_requestid==null||inp_requestid==""){url="/syi/edit.do?inp_catepubid="+inp_catepubid;}
if($.trim($("#rid").val())!=""){url=url+"&rid="+$.trim($("#rid").val());}
window.location.href=url;}}
function idPopSave(){var url="/syi/popsave.do";jQuery.ajax({url:url,success:function(result){$("#idPop_e").hide();}});}
function getPunishCatePubId(catePubId){var punishCatePubId=null;if(isValidCatePubId(catePubId)&&g_user_cate_punish_array!=null&&g_user_cate_punish_array.length>0){for(var i=0;i<g_user_cate_punish_array.length;i++){if(jQuery.trim(g_user_cate_punish_array[i])!=""){if(catePubId.indexOf(g_user_cate_punish_array[i])==0){punishCatePubId=catePubId;break;}}}}
return punishCatePubId;}
function isValidCatePubId(catePubId){var isempty=(catePubId==null||$.trim(catePubId)=='');var undifined=(catePubId==undefined||catePubId=='undefined');return(!isempty&&!undifined);};
var g_catagory_attribute_list={};var g_cate_normal_attr={};var g_cate_buyer_attr={};var g_cate_seller_attr={};var G_EVENT=$({});var g_seller_catagory_data=null;function initArr(){g_seller_catagory_data={};var val_all_list=$("#div_attrlistid").html();if(val_all_list!=null&&val_all_list!=""){try{g_seller_catagory_data=JSON.parse(val_all_list);}catch(err){DhgateConsole.info("产品属性解析JSON错误");g_seller_catagory_data={};}}
if(g_seller_catagory_data==null){g_seller_catagory_data={};}
selectCategory();}
function CategoryPublishAttributeValueVO(){this["class"]="com.dhgate.syi.model.CategoryPublishAttributeValueVO";this.catePubAttrvalId=0;this.sortval=0;this.catePubAttrId=0;this.attrValId=0;this.picUrl="";this.lineAttrvalName="";this.lineAttrvalNameCn="";}
function ProductAttributeVO(){this["class"]="com.dhgate.syi.model.ProductAttributeVO";this.attrId=0;this.attrName="";this.isbrand="0";this.valueList=[];}
function ProductAttributeValueVO(){this["class"]="com.dhgate.syi.model.ProductAttributeValueVO";this.picUrl="";this.attrValId=0;this.lineAttrvalName="";this.lineAttrvalNameCn="";}
function selectCategory(){var strCatePubId=$("#inp_catepubid").val();jQuery.ajax({url:"/syi/cateAttrL.do",data:{isblank:true,catePubId:strCatePubId},success:function(result){result=result.data;if(result!=null){parseAttr(result.attributeList);$("#minprice").val(result.minPrice);$("#ekeywords").val(result.excludeKeywords);$("#ikeywords").val(result.inlucdeKeywords);clearAttrUI();refreshUIByAttributes();if(window._dh_invalidSpecs){clearAttributeGroup();}
var strPName=$("#productname").val();if(strPName!=null&&strPName!=""){checkProductName(null,$("#productname")[0]);checkProductDesc(null,$("#productdesc")[0]);}
G_EVENT.trigger("attributeLoadSuccess",[result.attributeList]);}}});isWeigthRange_CatePub(strCatePubId);}
function refreshUIByAttributes(attrList){var producttype=$("#producttype").val();producttype=0;if(producttype==0){createNormalAttrUI(g_cate_normal_attr);createBuyAttrUI(g_cate_buyer_attr);createSellerAttrUI(g_cate_seller_attr);}else if(producttype=="4"){createSellerAttrUI(g_cate_seller_attr);}
if(g_seller_catagory_data!==null){setProductAttributesData(g_seller_catagory_data);g_seller_catagory_data=null;}}
function catePubShowWeightRange(catePubIsShow){var hasShow=$("#isonlyweight").attr("checked");if(hasShow==true){if(catePubIsShow||g_is_seller_checked){return;}else if($("#baseqt").val().length==0&&$("#stepqt").val().length==0&&$("#stepweight").val().length==0){$("#isonlyweight").attr("checked",false);showOnlyWeight(false,false);}}else if(hasShow==false){if(catePubIsShow){if($("#productid").val()==""){$("#isonlyweight").attr("checked",true);showOnlyWeight(true,false);}}}};
var VALID_LENGTH=40;var g_selfadd_attrid=11;var g_attr_type_multi="1";var g_attr_type_single="2";var g_attr_type_str="4";var g_attr_type_numeric="5";var g_image_server_url="http://image.dhgate.com/";var g_attr_style_text="1";var g_attr_style_pic="2";var g_attr_style_pictext="3";var g_nOtherValId=0;function getAttrValIdForOther(attrId){return g_nOtherValId;}
function isAbleEditAttr(){var bEnabled=true;var strSkuId=$("#skuid").val();var strProductType=$("#producttype").val();if(strSkuId!=null&&strSkuId!=""){if("0"==strProductType){bEnabled=false;}else if("2"==strProductType){var strStatus=$("#skustatus").val();if("10"!=strStatus){bEnabled=false;}}}
return bEnabled;}
function isSingleSelected(){var bRet=false;var strProductType=$("#producttype").val();if(strProductType=="1"){bRet=true;}
return bRet;}
function getCateAttrNameCn(catePubAttrVO){if(catePubAttrVO==null){return"";}
var attrName="";if(catePubAttrVO.lineAttrNameCn!=null&&$.trim(catePubAttrVO.lineAttrNameCn).length>0){attrName=catePubAttrVO.lineAttrNameCn;}else{attrName=catePubAttrVO.lineAttrName;}
return attrName;}
function getCateAttrValNameCn(catePubAttrValVO){if(catePubAttrValVO==null){return"";}
var attrValName="";if(catePubAttrValVO.lineAttrvalNameCn!=null&&$.trim(catePubAttrValVO.lineAttrvalNameCn).length>0){attrValName=catePubAttrValVO.lineAttrvalNameCn;}else{attrValName=catePubAttrValVO.lineAttrvalName;}
return attrValName;}
function getCateAttrValPicUrl(catePubAttrValVO){if(catePubAttrValVO==null||catePubAttrValVO["picUrl"]==null||catePubAttrValVO["picUrl"]==""){return"";}
return g_image_server_url+catePubAttrValVO["picUrl"];}
function isHavePic(attr){if(attr==null)return false;var bRet=false;if(attr["style"]==g_attr_style_pic||attr["style"]==g_attr_style_pictext){return true;}
return bRet;}
function isHaveText(attr){if(attr==null)return false;var bRet=false;if(attr["style"]==g_attr_style_text||attr["style"]==g_attr_style_pictext){return true;}
return bRet;}
function getCateAttrVOByAttrId(attrId){var strCatePubId=$("#inp_catepubid").val();if(strCatePubId==null){return null;}
var attrList=g_catagory_attribute_list[strCatePubId];if(attrList==null){return null;}
var attrvo=attrList[attrId];return attrvo;}
function isEmptyJson(jsonObj){if(jsonObj!=null){for(var item in jsonObj){return false;}}
return true;}
function isContainHtmlTag(content){var reg=/<[^>].*?>/;return reg.test(content);}
function isContainBrandKey(content){if(content==null){return false;}
return content.toLowerCase().indexOf("brand")!=-1;}
function clearAttrUI(){clearBrandUI();$("#div_pnormal_attr").html("");$("#div_pnormal_attr_container").hide();$("#div_pbuy_attr").html("");$("#div_pbuy_attr_container").hide();$("#div_pbuy_attr").html("");$("#div_pbuy_attr_container").hide();}
function createSellerAttrUI(cateAttrList){if(cateAttrList==null){$("#div_psale_attr").html("");$("#div_psale_attr_container").hide();return;}
var html_str=getAttrUI(cateAttrList);var attrUI="<table class='table-property'>";attrUI=attrUI+html_str;attrUI=attrUI+"</table>";if(html_str!=null&&html_str!=""){$("#div_psale_attr").html(attrUI);$("#div_psale_attr_container").show();}else{$("#div_psale_attr").html("");$("#div_psale_attr_container").hide();}}
function createBuyAttrUI(cateAttrList){if(cateAttrList==null){$("#div_pbuy_attr").html("");$("#div_pbuy_attr_container").hide();return;}
var html_str=getAttrUI(cateAttrList);var attrUI="<table class='table-property'>";attrUI=attrUI+html_str;attrUI=attrUI+"</table>";if(html_str!=null&&html_str!=""){$("#div_pbuy_attr").html(attrUI);$("#product_cattr_container").show();$("#div_pbuy_attr_container").show();}else{$("#div_pbuy_attr").html("");$("#div_pbuy_attr_container").hide();}}
function createNormalAttrUI(cateAttrList){g_selfadd_attr_list.reset();if(cateAttrList==null){clearBrandUI();$("#div_pnormal_attr").html("");$("#div_pnormal_attr_container").hide();return;}
var html_str=getAttrUI(cateAttrList);var attrUI="<table class='table-property'>";attrUI=attrUI+html_str;if(!isEmptyJson(cateAttrList)){var selfAddAttrUI=getInitSelfAddAttrUI();attrUI=attrUI==null?selfAddAttrUI:attrUI+selfAddAttrUI;}
attrUI=attrUI+"</table>";if(html_str!=null&&html_str!=""){$("#div_pnormal_attr").html(attrUI);$("#product_cattr_container").show();$("#div_pnormal_attr_container").show();}else{clearBrandUI();$("#div_pnormal_attr").html("");$("#div_pnormal_attr_container").hide();}}
var g_selfadd_attr_maxcount=10;var g_selfadd_attr_list={aCount:0,selfAddAttrList:{},reset:function(){this.aCount=0;this.selfAddAttrList={};},add:function(strId){this.selfAddAttrList[strId]=strId;this.aCount++;},remove:function(strId){if(this.selfAddAttrList[strId]!=null){this.selfAddAttrList[strId]=null;}
this.aCount--;},counter:0,getCounter:function(){return++this.counter;}};function getInitSelfAddAttrUI(){var attrUI=[];attrUI[attrUI.length]="<tr ><td class='bktit' >"+msg_getInitSelfAddAttrUI_html+"</td>";attrUI[attrUI.length]="    <td class='bkcon' id='selfaddattrdiv\' >";var selfaddId=g_selfadd_attr_list.getCounter();attrUI[attrUI.length]=getSelfAddAttrUI(selfaddId,false,true);g_selfadd_attr_list.add(selfaddId);attrUI[attrUI.length]="</td></tr>";return attrUI.join("");}
function getSelfAddAttrUI(selfaddid,bDelete,bAppendMore){var attrUI=[];var selfaddattrdivId="selfaddattrdiv_"+selfaddid;var selfaddattrnameId="selfaddattrname_"+selfaddid;var selfaddattrvalId="selfaddattrval_"+selfaddid;attrUI[attrUI.length]="   <p id=\""+selfaddattrdivId+"\" class='marginbottom5 clearfix'><input name=\"selfaddattrname\" id=\""+selfaddattrnameId+"\" type=\"text\"  class=\"attr-text-input custom1\"  onblur=\"checkSelfAddAttrName(\'"+selfaddid+"\')\"";if(!isAbleEditAttr()){attrUI[attrUI.length]=" readonly =\"readonly\"";}
attrUI[attrUI.length]=" />";attrUI[attrUI.length]="  <input name=\"selfaddattrval\"  id=\""+selfaddattrvalId+"\" type=\"text\"  class=\"attr-text-input custom1\"   onblur=\"checkSelfAddAttrVal(\'"+selfaddid+"\')\"";if(!isAbleEditAttr()){attrUI[attrUI.length]=" readonly =\"readonly\" ";}
attrUI[attrUI.length]=" />";if(isAbleEditAttr()){if(bAppendMore){attrUI[attrUI.length]="    <a href=\"javascript:void(0)\" class=\"custom1\"  onclick=\"appendMore();return false;\">"+msg_getSelfAddAttrUI_html1+"</a>";}
if(bDelete){attrUI[attrUI.length]="     <a href=\"javascript:void(0)\" class=\"custom1\" onclick=\"delSelfAddAttr(\'"+selfaddid+"\');return false;\">"+msg_getSelfAddAttrUI_html2+"</a>";}}
attrUI[attrUI.length]=getMsgUI(selfaddid);attrUI[attrUI.length]="    </p>";return attrUI.join("");}
function delSelfAddAttr(selfaddid){$("#selfaddattrdiv_"+selfaddid).remove();g_selfadd_attr_list.remove(selfaddid);}
function appendSelfAddAttr(selfaddid){var uiId=g_selfadd_attr_list.getCounter();if(selfaddid){uiId=selfaddid;}
var uiContent="";if(g_selfadd_attr_list.aCount<=0){uiContent=getSelfAddAttrUI(uiId,false,true);}else{uiContent=getSelfAddAttrUI(uiId,true,false);}
$("#selfaddattrdiv").append(uiContent);g_selfadd_attr_list.add(uiId);}
function appendMore(selfaddid){if(g_selfadd_attr_list.aCount>=g_selfadd_attr_maxcount){alert(msg_appendSelfAddAttr_alert1+g_selfadd_attr_maxcount+msg_appendSelfAddAttr_alert2);return false;}
appendSelfAddAttr(selfaddid);}
function checkSelfAddAttrName(strId){if(!validSelfAddAttrName(strId)){$("#msgdiv_"+strId).show();}else{$("#msg_"+strId).html("");$("#msgdiv_"+strId).hide();}}
function checkSelfAddAttrVal(strId){if(!validSelfAddAttrVal(strId)){$("#msgdiv_"+strId).show();}else{$("#msg_"+strId).html("");$("#msgdiv_"+strId).hide();}}
function validSelfAddAttrName(strId){var selfaddid=strId;var selfaddattrdivId="selfaddattrdiv_"+selfaddid;var selfaddattrnameId="selfaddattrname_"+selfaddid;var selfaddattrvalId="selfaddattrval_"+selfaddid;var attrName=$.trim($("#"+selfaddattrnameId).val());var attrVal=$.trim($("#"+selfaddattrvalId).val());var $msgDiv=$("#msg_"+strId);if(attrVal!=""){if(attrName==""){$msgDiv.html(msg_validSelfAddAttr_html2);return false;}}
if(attrName.length>VALID_LENGTH){$msgDiv.html(msg_validSelfAddAttr_html3+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);return false;}
if(attrName.length>0){if(!checkEnglish(attrName)){$msgDiv.html(msg_validSelfAddAttr_html5);return false;}
if(isContainHtmlTag(attrName)){$msgDiv.html(msg_validSelfAddAttr_html7);return false;}
if(isContainBrandKey(attrName)){$msgDiv.html(msg_validSelfAddAttr_html10);return false;}}
return true;}
function validSelfAddAttrVal(strId){var selfaddid=strId;var selfaddattrdivId="selfaddattrdiv_"+selfaddid;var selfaddattrnameId="selfaddattrname_"+selfaddid;var selfaddattrvalId="selfaddattrval_"+selfaddid;var attrName=$.trim($("#"+selfaddattrnameId).val());var attrVal=$.trim($("#"+selfaddattrvalId).val());var $msgDiv=$("#msg_"+strId);if(attrName!=""){if(attrVal==""){$msgDiv.html(msg_validSelfAddAttr_html1);return false;}}
if(attrVal.length>VALID_LENGTH){$msgDiv.html(msg_validSelfAddAttr_html4+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);return false;}
if(attrVal.length>0){if(!checkEnglish(attrVal)){$msgDiv.html(msg_validSelfAddAttr_html6);return false;}
if(isContainHtmlTag(attrVal)){$msgDiv.html(msg_validSelfAddAttr_html8);return false;}}
return true;}
function validSelfAddAttr(strId){if(!validSelfAddAttrName(strId)){return false;}
if(!validSelfAddAttrVal(strId)){return false;}
return true;}
function getAttrUI(cateAttrList){if(cateAttrList==null){return"";}
var attrUI=[];for(var cateAttr in cateAttrList){var attr=cateAttrList[cateAttr];if(attr["isbrand"]=='1'){attrUI[attrUI.length]=getBrandUIByAttributes(attr);}else{if(attr["type"]==g_attr_type_single){attrUI[attrUI.length]=getSingleChooseUIByAttributes(attr);}else if(attr["type"]==g_attr_type_multi){attrUI[attrUI.length]=getMultiChooseUIByAttributes(attr);}else if(attr["type"]==g_attr_type_str||attr["type"]==g_attr_type_numeric){attrUI[attrUI.length]=getTextUIByAttributes(attr);}}}
return attrUI.join("");}
function ckAll(quanxuanObj,checkboxname){if(quanxuanObj!=null){var arrayObj=new Array();$(":checkbox[name="+checkboxname+"]").each(function(i){if(this.checked!=quanxuanObj.checked){this.checked=quanxuanObj.checked;arrayObj[i]=this;}});for(var i=0;i<arrayObj.length;i++){if(arrayObj[i]!=null){attrVal_onClick(arrayObj[i]);}}
createInventoryUI(true);}}
function getBrandUIByAttributes(attr){if(attr==null){return"";}
var brandUI=[];var var_span="";var required="title='"+getCateAttrNameCn(attr)+"'";brandUI[brandUI.length]="<tr><td class=\"bktit\">"+var_span+getCateAttrNameCn(attr)+"：</td>";brandUI[brandUI.length]=" <td class=\"bkcon\">";brandUI[brandUI.length]=$("#div_brand_id").html();brandUI[brandUI.length]=getMsgUI(attr["attrId"]);brandUI[brandUI.length]="</td>";brandUI[brandUI.length]="</tr>";return brandUI.join("");}
function getTextUIByAttributes(attr){if(attr==null){return"";}
var innerHtml=[];var textname="c_"+attr["attrId"]+"_vname";var textid="c_"+attr["attrId"]+"_vname";var required="title='"+getCateAttrNameCn(attr)+"'";var span_var="";if(attr["required"]=="1"){span_var=span_var+"<span class='required'>*</span>";}
innerHtml[innerHtml.length]="<tr><td class='bktit' "+required+">"+span_var+getCateAttrNameCn(attr)+"：</td>";innerHtml[innerHtml.length]="<td class='bkcon'>";innerHtml[innerHtml.length]="<input name=\""+textname+"\" type=\"text\" onblur=\"validProductAttrById(\'"+attr["attrId"]+"\') \" class=\"attr-text-input\" id=\""+textid+"\"";if(!isAbleEditAttr()){innerHtml[innerHtml.length]=" readonly=\"readonly\" ";}
innerHtml[innerHtml.length]=" />";innerHtml[innerHtml.length]=getMsgUI(attr["attrId"]);innerHtml[innerHtml.length]="</td>";return innerHtml.join("");}
function getSingleChooseUIByAttributes(attr){if(attr==null){return"";}
if(attr["located"]=="1"){return getLocatedAttrUI(attr);}
var innerHtml=[];var span_var="";if(attr["required"]=="1"){span_var="<span class='required'>*</span>";}
innerHtml[innerHtml.length]="<tr><td class='bktit' title='"+getCateAttrNameCn(attr)+"'>"+span_var+getCateAttrNameCn(attr)+"：</td>";var selectname="c_"+attr["attrId"]+"_vname";var selectid="c_"+attr["attrId"]+"_vname";innerHtml[innerHtml.length]="<td class='bkcon'> ";innerHtml[innerHtml.length]="<select class='attr-select' id=\""+selectid+"\" name=\""+selectname+"\" class=\"syi-select1\" onchange=\"singleAttr_onChange(this,\'"+attr["attrId"]+"\')\"";if(!isAbleEditAttr()){innerHtml[innerHtml.length]=" disabled=\"disabled\"";}
innerHtml[innerHtml.length]=">";innerHtml[innerHtml.length]="<option value=\"\">"+msg_getSingleChooseUIByAttributes_select+"</option>";var valueList=attr["valueList"];if(valueList!==null){for(var val in valueList){var attrval=valueList[val];var optionvalue=attrval["attrValId"];innerHtml[innerHtml.length]="<option value=\""+optionvalue+"\">"+getCateAttrValNameCn(attrval)+"</option>";}}
if(attr["isother"]=="1"){innerHtml[innerHtml.length]="<option value=\""+getAttrValIdForOther(attr["attrId"])+"\">"+otherAttributeName+"</option>";}
innerHtml[innerHtml.length]="</select>";var otherTextUI=getOtherTextUI(attr);if(otherTextUI!=null&&$.trim(otherTextUI).length>0){innerHtml[innerHtml.length]=otherTextUI;}
innerHtml[innerHtml.length]=getAttrDefineUIByAttr(attr);innerHtml[innerHtml.length]=getMsgUI(attr["attrId"]);innerHtml[innerHtml.length]="</td>";return innerHtml.join("");}
function getOtherTextUI(attr){if(attr==null||!isHaveText(attr)){return"";}
var otherTextUI=[];if(attr["isother"]=="1"){var textotherid="t_"+attr["attrId"]+"_"+getAttrValIdForOther(attr["attrId"]);otherTextUI[otherTextUI.length]="&nbsp;<input id=\""+textotherid+"\" name=\"\" type=\"text\" class=\"syi-input14\" style=\"display:none\" onblur=\"otherTextChange(\'"+attr["attrId"]+"\', this) \"";if(!isAbleEditAttr()){otherTextUI[otherTextUI.length]=" readonly=\"readonly\" ";}
otherTextUI[otherTextUI.length]=" />";}
return otherTextUI.join("");}
function getMsgUI(msgId){var msgUI=[];msgUI[msgUI.length]="<div id=\"msgdiv_"+msgId+"\" class=\"tip-error\" style=\"display:none\">";msgUI[msgUI.length]="   <span id=\"msg_"+msgId+"\"></span>";msgUI[msgUI.length]="</div>";return msgUI.join("");}
function getAttrDefineUIByAttr(attr){if(attr==null){return"";}
var attrDefUI=[];attrDefUI[attrDefUI.length]="<div style=\"display:none\" id=\""+"selfdefinetitle_"+attr["attrId"]+"\">";if(isHavePic(attr)){attrDefUI[attrDefUI.length]="<table class=\"edit-properties\" id=\""+"selfdefine_"+attr["attrId"]+"\"><tr><th>颜色分类</th><th>自定义颜色图片（图片格式JPG,大小200k以内,可不添加）</th></tr></table>";}else{attrDefUI[attrDefUI.length]="<table class=\"edit-properties\" id=\""+"selfdefine_"+attr["attrId"]+"\"><tr><th>默认参数</th><th>自定义内容</th></tr></table>";}
attrDefUI[attrDefUI.length]="</div>";return attrDefUI.join("");}
function getLocatedAttrUI(attr){if(attr==null||attr["located"]!="1"){return"";}
var innerHtml=[];var span_var="";if(attr["required"]=="1"){span_var="<span class='required'>*</span>";}
innerHtml[innerHtml.length]="<tr><td class='bktit' title='"+getCateAttrNameCn(attr)+"'>"+span_var+getCateAttrNameCn(attr)+"：</td>";innerHtml[innerHtml.length]="<td class='bkcon'> <p class='marginbottom5'> ";var valueList=attr["valueList"];if(valueList!==null){for(var val in valueList){var attrval=valueList[val];var checkboxid="c_"+attr["attrId"]+"_"+attrval["attrValId"];var checkboxvalue=attr["attrId"]+"_"+attrval["attrValId"];innerHtml[innerHtml.length]="<label class='cheack-box-pb'>";innerHtml[innerHtml.length]=getCateAttrValNameCn(attrval);if(attrval["picUrl"]!=null&&attrval["picUrl"]!=""){innerHtml[innerHtml.length]="<img height=\"11\" width=\"11\" src=\""+g_image_server_url+attrval["picUrl"]+"\">";}
innerHtml[innerHtml.length]="</label>";}}
innerHtml[innerHtml.length]="</p></td>";innerHtml[innerHtml.length]="</tr>";return innerHtml.join("");}
function buildOneValue(attrval,attr,innerHtml,checkboxname){var checkboxid="c_"+attr["attrId"]+"_"+attrval["attrValId"];var checkboxvalue=attr["attrId"]+"_"+attrval["attrValId"];if(attrval.iscustomsized==='1'){innerHtml[innerHtml.length]='<label class="cheack-box-pb">';}else{innerHtml[innerHtml.length]='<label class="cheack-box-pb">';}
innerHtml[innerHtml.length]="<input onclick=\"attrVal_onClick(this);createInventoryUI(true);\" class=\"cheack-box-input\" name=\""+checkboxname+"\" type=\"checkbox\" value=\""+checkboxvalue+"\" id=\""+checkboxid+"\"";if(!isAbleEditAttr()){innerHtml[innerHtml.length]=" disabled=\"disabled\" ";}
innerHtml[innerHtml.length]="/>";if(isHavePic(attr)){if(attrval["picUrl"]!=null&&attrval["picUrl"]!=""){innerHtml[innerHtml.length]="<span class='colorbox' for=\""+checkboxid+"\"><img height=\"11\" width=\"11\" src=\""+g_image_server_url+attrval["picUrl"]+"\"></span>";}}
innerHtml[innerHtml.length]="<span class='marginright10' for=\""+checkboxid+"\">";if(isHaveText(attr)){innerHtml[innerHtml.length]=getCateAttrValNameCn(attrval);}
innerHtml[innerHtml.length]="</span>";innerHtml[innerHtml.length]="</label>";}
function getMultiChooseUIByAttributes(attr){if(attr==null){return"";}
if(attr["located"]=="1"){return getLocatedAttrUI(attr);}
var innerHtml=[];var span_var="";if(attr["required"]=="1"){span_var="<span class='required'>*</span>";}
innerHtml[innerHtml.length]="<tr><td class='bktit' title='"+getCateAttrNameCn(attr)+"'>"+span_var+getCateAttrNameCn(attr)+"：</td>";innerHtml[innerHtml.length]="<td data-aid='"+attr['attrId']+"' class='bkcon j-attrList'> ";var valueList=attr["valueList"];if(valueList!==null){var checkboxname="c_"+attr["attrId"]+"_vname";if(isAbleEditAttr()){var checkboxquanxuanid="c_"+attr["attrId"]+"_quanxuan";var checkboxquanxuanname="c_"+attr["attrId"]+"_quanxuan";if(attr['buyAttr']!='1'&&attr['saleAttr']!='1'){innerHtml[innerHtml.length]="<p  class='marginbottom5 j-attrList'><input class='cheack-box-input' name=\""+checkboxquanxuanname+"\" type=\"checkbox\" onclick=\"ckAll(this,\'"+checkboxname+"\')\" value=\"\" id=\""+checkboxquanxuanid+"\" /><span class='marginright10' for=\""+checkboxquanxuanid+"\">"+msg_getMultiChooseUIByAttributes_html+"</span></p>";}}
for(var val in valueList){var attrval=valueList[val];if(attrval.iscustomsized==='0'){buildOneValue(attrval,attr,innerHtml,checkboxname);}}}
if(attr["isother"]=="1"){var otherValId=getAttrValIdForOther(attr["attrId"]);var checkboxotherid="c_"+attr["attrId"]+"_"+otherValId;var checkboxothervalue=attr["attrId"]+"_"+otherValId;var textotherid="t_"+attr["attrId"]+"_"+otherValId;innerHtml[innerHtml.length]="<p class='marginbottom5'><label class='cheack-box-pb'>";innerHtml[innerHtml.length]="<input onclick=\"attrVal_onClick(this);createInventoryUI(true);\" class='cheack-box-input' name=\""+checkboxname+"\" type=\"checkbox\" value=\""+checkboxothervalue+"\" id=\""+checkboxotherid+"\"";if(!isAbleEditAttr()){innerHtml[innerHtml.length]=" disabled=\"disabled\" ";}
innerHtml[innerHtml.length]=" />";innerHtml[innerHtml.length]="<label class='cheack-box-pb' for=\""+checkboxotherid+"\">"+otherAttributeName+"</label>";var otherTextUI=getOtherTextUI(attr);if(otherTextUI!=null&&$.trim(otherTextUI).length>0){innerHtml[innerHtml.length]=otherTextUI;}
innerHtml[innerHtml.length]="</label>";}
if(valueList!==null){var checkboxname="c_"+attr["attrId"]+"_vname";for(var val in valueList){var attrval=valueList[val];if(attrval.iscustomsized==='1'){buildOneValue(attrval,attr,innerHtml,checkboxname);}}}
innerHtml[innerHtml.length]="</p>";innerHtml[innerHtml.length]=getAttrDefineUIByAttr(attr);innerHtml[innerHtml.length]=getMsgUI(attr["attrId"]);innerHtml[innerHtml.length]="</td>";return innerHtml.join("");}
function newOtherAttrValVO(attrId){var attrvalvo=new CategoryPublishAttributeValueVO();attrvalvo.attrValId=getAttrValIdForOther(attrId);attrvalvo.lineAttrvalNameCn=otherAttributeName;attrvalvo.lineAttrvalName=otherAttributeName;return attrvalvo;}
function attrVal_onClick(c_attrVal){if(c_attrVal==null){return;}
var arr=c_attrVal.value.split("_");var attrId=arr[0];var attrValId=arr[1];var catePubId=$("#inp_catepubid").val();var attrList=g_catagory_attribute_list[catePubId];var attrvo=attrList[attrId];var attrvalvo=null;if(getAttrValIdForOther(attrId)+""==attrValId){attrvalvo=newOtherAttrValVO(attrId);}else{attrvalvo=attrvo["valueList"][attrValId];}
var otherValId=getAttrValIdForOther(attrvo["attrId"]);if(attrvo["defined"]=="1"||(attrvo["isother"]=="1"&&otherValId==attrValId)){var selfDefineDivId="selfdefinediv_"+attrId+"_"+attrValId;if(c_attrVal.checked){$("#selfdefine_"+attrId).append(getNewSelfDefineUIByAttrVal(attrvalvo,attrvo,attrId,attrValId,selfDefineDivId,otherValId));}else{$("#"+selfDefineDivId).remove();}
var attrvalcheckboxname="c_"+attrId+"_vname";if($(":checked[name="+attrvalcheckboxname+"]").length==0){$("#selfdefinetitle_"+attrId).hide();}else{$("#selfdefinetitle_"+attrId).show();}
if(attrvo["defined"]=="0"&&attrvo["isother"]=="1"&&otherValId==attrValId){var checkboxotherid="c_"+attrId+"_"+otherValId;if($("#"+checkboxotherid)[0].checked==false){$("#selfdefinetitle_"+attrId).hide();}else{$("#selfdefinetitle_"+attrId).show();}}}
if(validProductAttrChooseRequired(attrvo)){$("#msg_"+attrvo["attrId"]).html("");$("#msgdiv_"+attrvo["attrId"]).hide();}else{$("#msgdiv_"+attrvo["attrId"]).show();}
if(g_cate_seller_attr!=null){if(g_cate_seller_attr[attrId]!=null){if(g_nsetProductSaleSpecTime!=0){window.clearTimeout(g_nsetProductSaleSpecTime);g_nsetProductSaleSpecTime=0;}
if(!g_bInitProductData){g_nsetProductSaleSpecTime=window.setTimeout(function(){setProductSaleSpecByAttr();},500);}}}}
var g_nsetProductSaleSpecTime=0;function setProductSaleSpecByAttr(){g_nsetProductSaleSpecTime=0;var attrlist=new Array();var isSaleAttr=false;var isSaleAttrAll=false;var cou=0;$.each(g_cate_seller_attr,function(key,content){var attrValList=new Array();var attrChed=$("[name='"+"c_"+content.attrId+"_vname"+"']:checked");if(cou==0){if(attrChed.length>0){isSaleAttrAll=true;}}else{if(attrChed.length==0){isSaleAttrAll=false;}}
for(var i=0;i<attrChed.length;i++){attrValList.push(attrChed[i].value.split("_")[1]);}
var attrObj=[];attrObj.push(content.attrId);attrObj.push(attrValList);attrlist.push(attrObj);cou++;});if(isSaleAttrAll){createPriceSpecification(attrlist);}else{resetPriceSpic();}
g_bInitProductData=false;}
function uploadAttrValImg(attrId,attrValId){showUploadValImgWin(attrId,attrValId);}
function showUploadValImgWin(attrId,attrValId){jQuery('#popupid').modal({close:false});var callBackObj={"callType":"attr","attrId":attrId,"attrValId":attrValId};initsingleUploadifyImg(['jpg'],callBackObj);}
function validateOnSelect(event,ID,fileObj){if(fileObj.size>200*1024){jQuery("#operate_message").html(msg_validateOnSelect_html1).show();return false;}
if((fileObj.type).toLowerCase()!=".jpg"){jQuery("#operate_message").html(msg_validateOnSelect_html2).show();return false;}
return true;}
function saveBrandAppeal(imgmd5,imgurl,imgsize,localfilename,callBackObj){if(callBackObj.callType=="brand"){uploadBrandCallBack(imgmd5,imgurl,imgsize,localfilename);}else if(callBackObj.callType=="attr"){var attrId=callBackObj.attrId;var attrValId=callBackObj.attrValId;jQuery("#operate_message").html(msg_saveBrandAppeal_html).show();$("#defimg_"+attrId+"_"+attrValId).attr("src","http://image.dhgate.com/"+imgurl);var defAttrValImgUrlTextId="text_defineattrval_url_"+attrId+"_"+attrValId;$("#"+defAttrValImgUrlTextId).val(imgurl);$("#div_defineattrval_img_"+attrId+"_"+attrValId).show();}}
function singleAttr_onChange(attrSelect,attrId){if(!attrSelect){return;}
var strCatePubId=$("#inp_catepubid").val();var attrvo=g_catagory_attribute_list[strCatePubId][attrId];var attrvalvo=null;var otherAttrValId=getAttrValIdForOther(attrId);if(otherAttrValId+""==attrSelect.value){attrvalvo=newOtherAttrValVO(attrId);}else if(attrvo["valueList"]!=null&&attrvo["valueList"][attrSelect.value]!=null){attrvalvo=attrvo["valueList"][attrSelect.value];}else{$("#selfdefinetitle_"+attrId).hide();return;}
var attrValId=attrvalvo["attrValId"];var otherValId=getAttrValIdForOther(attrvo["attrId"]);if(attrvo["defined"]=="1"||(attrvo["isother"]=="1"&&otherValId==attrValId)){if(attrSelect.value!=""){var selfDefineDivId="selfdefinediv_"+attrId+"_"+attrValId;$("#selfdefine_"+attrId).html('');$("#selfdefine_"+attrId).append(getNewSelfDefineUIByAttrVal(attrvalvo,attrvo,attrId,attrValId,selfDefineDivId,otherValId));$("#selfdefinetitle_"+attrId).show();}}else{$("#selfdefinetitle_"+attrId).hide();}
if(validProductAttrChooseRequired(attrvo)){$("#msg_"+attrvo["attrId"]).html("");$("#msgdiv_"+attrvo["attrId"]).hide();}else{$("#msgdiv_"+attrvo["attrId"]).show();}}
function delSelfDefineUpload(attrId,attrValId){var defAttrValNameTextId="text_defineattrval_name_"+attrId+"_"+attrValId;var defAttrValImgUrlTextId="text_defineattrval_url_"+attrId+"_"+attrValId;var defAttrvalImgDivId="div_defineattrval_img_"+attrId+"_"+attrValId;var defAttrvalImgId="defimg_"+attrId+"_"+attrValId;$("#"+defAttrValNameTextId).val("");$("#"+defAttrValImgUrlTextId).val("");$("#"+defAttrvalImgId).removeAttr("src");$("#"+defAttrvalImgDivId).hide();}
var g_bInitProductData=true;function setProductAttributesData(attributelist){var bContinue=true;try{var strCatePubId=$("#inp_catepubid").val();var cateAttList=g_catagory_attribute_list[strCatePubId];if(cateAttList==null){setProductSaleSpecByAttr();return;}
if(attributelist!=null&&attributelist.length>0){var selfAddList=[];for(var attrItem in attributelist){var productAttributeVO=attributelist[attrItem];var attr=cateAttList[productAttributeVO["attrId"]];if(attr!=null&&attr["located"]=="1"){continue;}
var valueList=productAttributeVO["valueList"];if(attr==null){if(valueList==null||valueList.length>0){selfAddList[selfAddList.length]=valueList;}}else if(productAttributeVO["attrId"]==g_selfadd_attrid){selfAddList[selfAddList.length]=valueList;}else if(attr["isbrand"]=="1"){if(valueList!=null&&valueList.length>0){var productAttrValVO=valueList[0];var brandsVO=productAttrValVO["brandsVO"];init_Brand(brandsVO);}else{init_Brand(null);}}else if(attr["type"]==g_attr_type_single||(attr["type"]==g_attr_type_multi&&isSingleSelected())){if(valueList!=null&&valueList.length>0){var productAttrValVO=valueList[0];var selectid="c_"+attr["attrId"]+"_vname";$("#"+selectid+" option[value=\""+productAttrValVO["attrValId"]+"\"]").attr("selected","selected");singleAttr_onChange($("#"+selectid).get(0),productAttributeVO["attrId"]);setProSelfDefAttrForChoose(productAttrValVO,attr);showAttrIllegal(attr["attrId"],productAttrValVO);}}else if(attr["type"]==g_attr_type_multi&&!isSingleSelected()){if(valueList!==null){for(var attrValItem in valueList){var productAttrValVO=valueList[attrValItem];var checkboxid="c_"+attr["attrId"]+"_"+productAttrValVO["attrValId"];var attrvalCheckbox=document.getElementById(checkboxid);if(attrvalCheckbox&&!attrvalCheckbox.checked){attrvalCheckbox.checked=true;attrVal_onClick(attrvalCheckbox);}
setProSelfDefAttrForChoose(productAttrValVO,attr);showAttrIllegal(attr["attrId"],productAttrValVO);}}}else if(attr["type"]==g_attr_type_str||attr["type"]==g_attr_type_numeric){if(valueList!=null&&valueList.length>0){var textid="c_"+attr["attrId"]+"_vname";var productAttrValVO=valueList[0];$("#"+textid).val(productAttrValVO["lineAttrvalName"]);showAttrIllegal(attr["attrId"],productAttrValVO);}}}
var bClearSelfAdd=false;var selfAddValList=[];for(var i=0;i<selfAddList.length;i++){if(bClearSelfAdd==false&&selfAddList[i]!=null&&selfAddList[i].length>0){$("#selfaddattrdiv").html("");g_selfadd_attr_list.reset();bClearSelfAdd=true;}
for(var j=0;j<selfAddList[i].length;j++){selfAddValList[selfAddValList.length]=selfAddList[i][j];}}
initSelfAddAttrProDataInit(selfAddValList);}}catch(e){bContinue=false;setProductSaleSpecByAttr();}
if(bContinue){setProductSaleSpecByAttr();}}
function initSelfAddAttrProDataInit(valueList){if(valueList!=null&&valueList.length>0){g_selfadd_attr_list.reset();for(var i=0;i<valueList.length;i++){var proAttrVal=valueList[i];if(proAttrVal.iscustomsized==="1")continue;var id=g_selfadd_attr_list.getCounter();appendSelfAddAttr(id);var selfaddattrnameId="selfaddattrname_"+id;var selfaddattrvalId="selfaddattrval_"+id;$("#"+selfaddattrnameId).val(proAttrVal["attrName"]);$("#"+selfaddattrvalId).val(proAttrVal["lineAttrvalName"]);showAttrIllegal(id,proAttrVal);}}}
function showAttrIllegal(msgId,proAttrValVO){if(proAttrValVO==null){return;}
if(proAttrValVO.isverified=="2"||proAttrValVO.isverified=="3"){$("#msg_"+msgId).html(msg_attribute_illegal);$("#msgdiv_"+msgId).show();}}
function setProSelfDefAttrForChoose(productAttrValVO,attr){if(attr==null||productAttrValVO==null){return;}
var otherAttrValId=getAttrValIdForOther(attr["attrId"]);var attrValId=productAttrValVO["attrValId"];var lineAttrvalName=productAttrValVO["lineAttrvalName"];var attrId=attr["attrId"];if(isHaveText(attr)){if(attr["isother"]=="1"){if(otherAttrValId==attrValId){var textotherid="t_"+attrId+"_"+otherAttrValId;$("#"+textotherid).val(lineAttrvalName);}}}
if(attr["defined"]=="1"||(attr["isother"]=="1"&&otherAttrValId==attrValId)){var defAttrValNameTextId="text_defineattrval_name_"+attrId+"_"+attrValId;var defAttrValImgUrlTextId="text_defineattrval_url_"+attrId+"_"+attrValId;var defAttrvalImgDivId="div_defineattrval_img_"+attrId+"_"+attrValId;if(isHaveText(attr)){$("#"+defAttrValNameTextId).val(lineAttrvalName);}
if(isHavePic(attr)){if(productAttrValVO["picUrl"]!=null&&productAttrValVO["picUrl"].length>0){$("#defimg_"+attrId+"_"+attrValId).attr("src",g_image_server_url+productAttrValVO["picUrl"]);var defAttrValImgUrlTextId="text_defineattrval_url_"+attrId+"_"+attrValId;$("#"+defAttrValImgUrlTextId).val(productAttrValVO["picUrl"]);$("#"+defAttrvalImgDivId).show();}}}}
function isHasSellerAttr(){var bRet=false;if(g_cate_seller_attr!=null){for(var attId in g_cate_seller_attr){bRet=true;break;}}else{bRet=true;}
return bRet;}
function parseAttr(attrList){var bClearPrice=false;if(isHasSellerAttr()){bClearPrice=true;}
if(attrList==null||attrList.length<=0){g_cate_normal_attr={};g_cate_buyer_attr={};g_cate_seller_attr={};if(bClearPrice){resetPriceSpic();}
return;}
g_cate_normal_attr={};g_cate_buyer_attr={};g_cate_seller_attr={};var currCatePubAttrList={};for(var i=0;i<attrList.length;i++){var attrTemp=attrList[i];var attr={};for(var prop in attrTemp){if("valueList"==prop){attr["valueList"]={};var valueList=attrTemp["valueList"];if(valueList!=null){for(var j=0;j<valueList.length;j++){attr["valueList"][valueList[j]["attrValId"]]=valueList[j];}}}else{attr[prop]=attrTemp[prop];}}
if(attrTemp["isbrand"]=="1"||attrTemp["located"]=="1"){if(g_cate_normal_attr==null){g_cate_normal_attr={};}
g_cate_normal_attr[attrTemp["attrId"]]=attr;}else if(attrTemp["buyAttr"]=="1"){if(attrTemp["saleAttr"]=="1"){g_cate_seller_attr[attrTemp["attrId"]]=attr;bClearPrice=true;}else{if(g_cate_buyer_attr==null){g_cate_buyer_attr={};}
g_cate_buyer_attr[attrTemp["attrId"]]=attr;}}else if(attrTemp["saleAttr"]=="1"){bClearPrice=true;g_cate_seller_attr[attrTemp["attrId"]]=attr;}else{if(g_cate_normal_attr==null){g_cate_normal_attr={};}
g_cate_normal_attr[attrTemp["attrId"]]=attr;}
currCatePubAttrList[attrTemp["attrId"]]=attr;}
if(bClearPrice){}
if(g_catagory_attribute_list==null){g_catagory_attribute_list={};}
var strCatePubId=$("#inp_catepubid").val();if(g_catagory_attribute_list[strCatePubId]==null){g_catagory_attribute_list[strCatePubId]=currCatePubAttrList;}}
function getProductAttrListForSubmit(){DhgateConsole.info('获取产品属性列表');var strCatePubId=$("#inp_catepubid").val();if(strCatePubId==null){return null;}
var attrList=g_catagory_attribute_list[strCatePubId];if(attrList=={}){return[];}
var productAttrList=[];DhgateConsole.info('检查产品属性');var isValidPass=true;for(var i in attrList){var attr=attrList[i];if(attrList[i]["located"]=="1"){continue;}
if(!validProductAttr(attr)){$("#msgdiv_"+attr["attrId"]).show();isValidPass=false;productAttrList=null;showErrorTip("productattr","产品属性错误");}
if(!isValidPass){continue;}
var productAttrVO=null;if(attr["isbrand"]=="1"){var brandid=$("#brandid").val();var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}else{if(attr["type"]==g_attr_type_single){productAttrVO=getProAttrDataForSingle(attr);}else if(attr["type"]==g_attr_type_multi){if(isSingleSelected()){productAttrVO=getProAttrDataForSingle(attr);}else{var checkboxname="c_"+attr["attrId"]+"_vname";$(":checked[name="+checkboxname+"]").each(function(){if(productAttrVO==null){productAttrVO=newProAttrByCateAttr(attr);}
var attrValId=parseInt(this.value.split("_")[1]);var productAttrValVO=getProdAttrValVOByAttrValId(attr,attrValId);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;});}}else if(attr["type"]==g_attr_type_str){var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}else if(attr["type"]==g_attr_type_numeric){var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}}
if(productAttrVO!=null){productAttrList[productAttrList.length]=productAttrVO;}}
var selfAddAttrList=g_selfadd_attr_list.selfAddAttrList;var proSelfAddAttrVO=null;if(g_selfadd_attr_list.aCount>g_selfadd_attr_maxcount){showErrorTip("productattr",msg_appendSelfAddAttr_alert1+g_selfadd_attr_maxcount+msg_appendSelfAddAttr_alert2);return null;}
for(var strId in selfAddAttrList){if(selfAddAttrList[strId]!=null){if(!validSelfAddAttr(strId)){$("#msgdiv_"+strId).show();productAttrList=null;proSelfAddAttrVO=null;isValidPass=false;showErrorTip("productattr","产品属性错误");}
if(!isValidPass){continue;}
var selfaddid=selfAddAttrList[strId];var selfaddattrnameId="selfaddattrname_"+selfaddid;var selfaddattrvalId="selfaddattrval_"+selfaddid;var selfAddAttrName=$.trim($("#"+selfaddattrnameId).val());var selfAddAttrVal=$.trim($("#"+selfaddattrvalId).val());if(selfAddAttrName.length>0&&selfAddAttrVal.length>0){if(proSelfAddAttrVO==null){proSelfAddAttrVO=new ProductAttributeVO();proSelfAddAttrVO.attrId=g_selfadd_attrid;proSelfAddAttrVO.attrName="";proSelfAddAttrVO.isbrand="0";proSelfAddAttrVO.valueList=[];}
var proSelfAddAttrValVO=new ProductAttributeValueVO();proSelfAddAttrValVO.attrValId=null;proSelfAddAttrValVO["lineAttrvalName"]=selfAddAttrVal;proSelfAddAttrValVO["attrName"]=selfAddAttrName;proSelfAddAttrValVO["attrId"]=g_selfadd_attrid;proSelfAddAttrVO.valueList[proSelfAddAttrVO.valueList.length]=proSelfAddAttrValVO;}}}
if(productAttrList!=null&&proSelfAddAttrVO!=null){productAttrList[productAttrList.length]=proSelfAddAttrVO;}
if(productAttrList==null||productAttrList.length<1){showErrorTip("productattr","产品属性错误");return null;}
return productAttrList;}
function getProAttrDataForSingle(attr){if(attr==null){return null;}
var productAttrVO=null;var attrselectid="c_"+attr["attrId"]+"_vname";if($("#"+attrselectid).val()!=""){productAttrVO=newProAttrByCateAttr(attr);var attrValId=$("#"+attrselectid).val();var productAttrValVO=getProdAttrValVOByAttrValId(attr,attrValId);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}
return productAttrVO;}
function newProAttrByCateAttr(cateAttr){if(cateAttr==null){return null;}
var productAttrVO=new ProductAttributeVO();productAttrVO.attrId=cateAttr["attrId"];productAttrVO.attrName=cateAttr["lineAttrName"];productAttrVO.isbrand=cateAttr["isbrand"];productAttrVO.valueList=[];return productAttrVO;}
function getProdAttrValVOByAttrValId(attr,attrValId){var productAttrValVO=null;if(attr["isbrand"]=="1"){productAttrValVO=new ProductAttributeValueVO();productAttrValVO.attrValId=parseInt($("#brandid").val());productAttrValVO["lineAttrvalName"]="";}else{if(attr["type"]==g_attr_type_single||attr["type"]==g_attr_type_multi){productAttrValVO=new ProductAttributeValueVO();productAttrValVO.attrValId=attrValId;var oneAttributeValue=attr["valueList"][attrValId];if(attr["defined"]=="0"){var otherAttrValId=getAttrValIdForOther(attr["attrId"]);if(attrValId==otherAttrValId){productAttrValVO.lineAttrvalName=$("#t_"+attr["attrId"]+"_"+otherAttrValId).val();}else{productAttrValVO.lineAttrvalName=oneAttributeValue["lineAttrvalName"];}}else if(attr["defined"]=="1"){if(attrValId==otherAttrValId){productAttrValVO.lineAttrvalName=$("#t_"+attr["attrId"]+"_"+otherAttrValId).val();}else{productAttrValVO.lineAttrvalName=$("#text_defineattrval_name_"+attr["attrId"]+"_"+attrValId).val();}
productAttrValVO.picUrl=$("#text_defineattrval_url_"+attr["attrId"]+"_"+attrValId).val();}
if(oneAttributeValue){productAttrValVO.iscustomsized=oneAttributeValue["iscustomsized"];}else{productAttrValVO.iscustomsized='0';}}else{var textid="c_"+attr["attrId"]+"_vname";if($.trim($("#"+textid).val()).length>0){productAttrValVO=new ProductAttributeValueVO();productAttrValVO.attrValId=null;productAttrValVO.lineAttrvalName=$("#"+textid).val();}}}
return productAttrValVO;}
function validProductAttrById(attrId){var catePubId=$("#inp_catepubid").val();if(catePubId==null){alert(msg_getProductAttrListForSubmit_alert);}
var attrList=g_catagory_attribute_list[catePubId];var attr=attrList[attrId];if(!validProductAttr(attr)){$("#msgdiv_"+attr["attrId"]).show();return false;}else{$("#msg_"+attr["attrId"]).html("");$("#msgdiv_"+attr["attrId"]).hide();return true;}}
function validProductAttr(attr){if(attr["isbrand"]=="1"){if(!validProductAttrForBrand(attr)){return false;}}else{if(attr["type"]==g_attr_type_single){if(!validProductAttrSingleChoose(attr)){return false;}}else if(attr["type"]==g_attr_type_multi){if(isSingleSelected()){if(!validProductAttrSingleChoose(attr)){return false;}}else{if(!validProductAttrMultiChoose(attr)){return false;}}}else if(attr["type"]==g_attr_type_str){if(!validProductAttrForString(attr)){return false;}}else if(attr["type"]==g_attr_type_numeric){if(!validProductAttrForNumber(attr)){return false;}}}
return true;}
function validProductAttrChooseRequired(attr){if(attr==null||(attr["type"]!=g_attr_type_multi&&attr["type"]!=g_attr_type_single)){return false;}
if(attr["type"]==g_attr_type_multi&&!isSingleSelected()){var checkboxname="c_"+attr["attrId"]+"_vname";if(attr["required"]=="1"){if($(":checked[name="+checkboxname+"]").length<=0){$("#msg_"+attr["attrId"]).html(msg_vaildProductAttrMultiChoose_html1+getCateAttrNameCn(attr)+msg_vaildProductAttrMultiChoose_html2);showErrorTip("productattr","产品属性错误");return false;}}}else{var attrselectid="c_"+attr["attrId"]+"_vname";if(attr["required"]=="1"){if($("#"+attrselectid).val()==""){$("#msg_"+attr["attrId"]).html(msg_getSingleChooseUIByAttributes_select+getCateAttrNameCn(attr)+msg_createattrui_html);showErrorTip("productattr","产品属性错误");return false;}}}
return true;}
function validProductAttrMultiChoose(attr){if(attr==null||attr["type"]!=g_attr_type_multi){return false;}
var checkboxname="c_"+attr["attrId"]+"_vname";if(!validProductAttrChooseRequired(attr)){return false;}
if(isHaveText(attr)){if(attr["isother"]=="1"){var otherAttrValId=getAttrValIdForOther(attr["attrId"]);var otherid="c_"+attr["attrId"]+"_"+otherAttrValId;if($("#"+otherid).get(0).checked){if(!validOtherText(attr["attrId"])){return false;}}}}
if(attr["defined"]=="1"){var b=true;$.each($(":checked[name="+checkboxname+"]"),function(i,selfAttrValName){var attrvalid=this.value.split("_")[1];if(!validAttrSelfDefine(attr["attrId"],attrvalid)){b=false;return false;}});if(b==false){return false;}}
$("#msg_"+attr["attrId"]).val("");return true;}
function validSelfDefineAttrvalName(attrId,attrValId){if(g_nOtherValId==attrValId){this.otherTextChange(attrId);}
if(!validAttrSelfDefine(attrId,attrValId)){$("#msgdiv_"+attrId).show();showErrorTip("productattr","产品属性错误");return false;}else{$("#msg_"+attrId).html("");$("#msgdiv_"+attrId).hide();return true;}}
function otherTextChange(attrId){var cateAttrVO=getCateAttrVOByAttrId(attrId);if(cateAttrVO==null){return;}
var selfValTextId="text_defineattrval_name_"+attrId+"_"+getAttrValIdForOther(attrId);var tem_val=$("#"+selfValTextId).val();var otherValTextId="t_"+attrId+"_"+getAttrValIdForOther(attrId);$("#"+otherValTextId).val(tem_val);validProductAttrById(attrId);return false;}
function validAttrSelfDefine(attrId,attrValId){var defAttrvalNameId="text_defineattrval_name"+"_"+attrId+"_"+attrValId;var defAttrvalName=$.trim($("#"+defAttrvalNameId).val());if(defAttrvalName.length>VALID_LENGTH){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html8+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);showErrorTip("productattr",msg_vaildProductAttrMultiChoose_html8+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);return false;}
if(defAttrvalName.length>0&&!checkEnglish(defAttrvalName)){$("#msg_"+attrId).html(msg_validSelfAddAttr_html5);showErrorTip("productattr","产品属性错误");return false;}
if(defAttrvalName.length>0&&isContainHtmlTag(defAttrvalName)){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html10);showErrorTip("productattr","产品属性错误");return false;}
var otherValId=getAttrValIdForOther(attrId);if(otherValId==attrValId){var attr=getCateAttrVOByAttrId(attrId);if(g_attr_style_pic==attr["style"]){var otherPicUrlId="text_defineattrval_url_"+attrId+"_"+attrValId;var otherPicUrl=$.trim($("#"+otherPicUrlId).val());if(otherPicUrl.length<=0){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html11);showErrorTip("productattr","产品属性错误");return false;}}}
return true;}
function validOtherText(attrId){var otherAttrValId=getAttrValIdForOther(attrId);var textotherid="t_"+attrId+"_"+otherAttrValId;var val=$.trim($("#"+textotherid).val());if(val==""){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html3+otherAttributeName+msg_createattrui_html);showErrorTip("productattr","产品属性错误");return false;}
if(val.length>VALID_LENGTH){$("#msg_"+attrId).html(otherAttributeName+msg_vaildProductAttrMultiChoose_html4+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);showErrorTip("productattr","产品属性错误");return false;}
if(val.length>0){if(!checkEnglish(val)){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html6);showErrorTip("productattr","产品属性错误");return false;}
if(isContainHtmlTag(val)){$("#msg_"+attrId).html(msg_vaildProductAttrMultiChoose_html9);showErrorTip("productattr","产品属性错误");return false;}}
return true;}
function validProductAttrSingleChoose(attr){if(attr==null){showErrorTip("productattr","产品属性错误");return false;}
var attrselectid="c_"+attr["attrId"]+"_vname";if(!validProductAttrChooseRequired(attr)){showErrorTip("productattr","产品属性错误");return false;}
if(isHaveText(attr)){if(attr["isother"]=="1"){var otherAttrValId=getAttrValIdForOther(attr["attrId"]);if($("#"+attrselectid).val()==otherAttrValId+""){if(!validOtherText(attr["attrId"])){showErrorTip("productattr","产品属性错误");return false;}}}
if(attr["defined"]=="1"){if($("#"+attrselectid).val()!=""){if(!validAttrSelfDefine(attr["attrId"],$("#"+attrselectid).val())){showErrorTip("productattr","产品属性错误");return false;}}}}
$("#msg_"+attr["attrId"]).val("");return true;}
function validProductAttrForString(attr){var objId="c_"+attr["attrId"]+"_vname";var val=$.trim($("#"+objId).val());if(attr["required"]=="1"){if(val.length<=0){$("#msg_"+attr["attrId"]).html(msg_vaildProductAttrMultiChoose_html3+getCateAttrNameCn(attr)+msg_createattrui_html);showErrorTip("productattr","产品属性错误");return false;}}
if(val.length>VALID_LENGTH){$("#msg_"+attr["attrId"]).html(getCateAttrNameCn(attr)+msg_vaildProductAttrMultiChoose_html4+VALID_LENGTH+msg_vaildProductAttrMultiChoose_html5);showErrorTip("productattr","产品属性错误");return false;}
if(val.length>0&&!checkEnglish(val)){$("#msg_"+attr["attrId"]).html(getCateAttrNameCn(attr)+msg_vaildProductAttrForString_html);showErrorTip("productattr","产品属性错误");return false;}
if(val.length>0&&isContainHtmlTag(val)){$("#msg_"+attr["attrId"]).html(getCateAttrNameCn(attr)+msg_notusehtml_html);showErrorTip("productattr","产品属性错误");return false;}
return true;}
function validProductAttrForNumber(attr){var objId="c_"+attr["attrId"]+"_vname";if(attr["required"]=="1"){if($("#"+objId).val().length<=0){$("#msg_"+attr["attrId"]).html(msg_vaildProductAttrMultiChoose_html3+getCateAttrNameCn(attr)+msg_createattrui_html);showErrorTip("productattr","产品属性错误");return false;}}
if($("#"+objId).val().length>0&&isNaN(parseFloat($("#"+objId).val()))){$("#msg_"+attr["attrId"]).html(getCateAttrNameCn(attr)+msg_vaildProductAttrForNumber_html);showErrorTip("productattr","产品属性错误");return false;}
return true;}
function validProductAttrForBrand(attr){return true;}
function getProductAttrListForSubmitNoTip(){var strCatePubId=$("#inp_catepubid").val();if(strCatePubId==null){return null;}
var attrList=g_catagory_attribute_list[strCatePubId];if(attrList=={}){return[];}
var productAttrList=[];var isValidPass=true;for(var i in attrList){var attr=attrList[i];if(attrList[i]["located"]=="1"){continue;}
if(!validProductAttr(attr)){isValidPass=false;productAttrList=null;}
if(!isValidPass){continue;}
var productAttrVO=null;if(attr["isbrand"]=="1"){var brandid=$("#brandid").val();var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}else{if(attr["type"]==g_attr_type_single){productAttrVO=getProAttrDataForSingle(attr);}else if(attr["type"]==g_attr_type_multi){if(isSingleSelected()){productAttrVO=getProAttrDataForSingle(attr);}else{var checkboxname="c_"+attr["attrId"]+"_vname";$(":checked[name="+checkboxname+"]").each(function(){if(productAttrVO==null){productAttrVO=newProAttrByCateAttr(attr);}
var attrValId=parseInt(this.value.split("_")[1]);var productAttrValVO=getProdAttrValVOByAttrValId(attr,attrValId);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;});}}else if(attr["type"]==g_attr_type_str){var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}else if(attr["type"]==g_attr_type_numeric){var productAttrValVO=getProdAttrValVOByAttrValId(attr,null);if(productAttrValVO!=null){productAttrVO=newProAttrByCateAttr(attr);productAttrVO.valueList[productAttrVO.valueList.length]=productAttrValVO;}}}
if(productAttrVO!=null){productAttrList[productAttrList.length]=productAttrVO;}}
var selfAddAttrList=g_selfadd_attr_list.selfAddAttrList;var proSelfAddAttrVO=null;if(g_selfadd_attr_list.aCount>g_selfadd_attr_maxcount){return null;}
for(var strId in selfAddAttrList){if(selfAddAttrList[strId]!=null){if(!validSelfAddAttr(strId)){$("#msgdiv_"+strId).show();productAttrList=null;proSelfAddAttrVO=null;isValidPass=false;}
if(!isValidPass){continue;}
var selfaddid=selfAddAttrList[strId];var selfaddattrnameId="selfaddattrname_"+selfaddid;var selfaddattrvalId="selfaddattrval_"+selfaddid;var selfAddAttrName=$.trim($("#"+selfaddattrnameId).val());var selfAddAttrVal=$.trim($("#"+selfaddattrvalId).val());if(selfAddAttrName.length>0&&selfAddAttrVal.length>0){if(proSelfAddAttrVO==null){proSelfAddAttrVO=new ProductAttributeVO();proSelfAddAttrVO.attrId=g_selfadd_attrid;proSelfAddAttrVO.attrName="";proSelfAddAttrVO.isbrand="0";proSelfAddAttrVO.valueList=[];}
var proSelfAddAttrValVO=new ProductAttributeValueVO();proSelfAddAttrValVO.attrValId=null;proSelfAddAttrValVO["lineAttrvalName"]=selfAddAttrVal;proSelfAddAttrValVO["attrName"]=selfAddAttrName;proSelfAddAttrValVO["attrId"]=g_selfadd_attrid;proSelfAddAttrVO.valueList[proSelfAddAttrVO.valueList.length]=proSelfAddAttrValVO;}}}
if(productAttrList!=null&&proSelfAddAttrVO!=null){productAttrList[productAttrList.length]=proSelfAddAttrVO;}
if(productAttrList==null||productAttrList.length<1){return null;}
return productAttrList;}
function checkAll(id,obj){var box=document.getElementById(id);if(box!=undefined){box=box.getElementsByTagName('INPUT');var checked=obj.checked;for(var i=0,j=box.length;i<j;i++){if(box[i]!=null&&box[i].getAttribute("type")=="checkbox"&&box[i].getAttribute("disabled")!=true){if(box[i].checked!=checked){box[i].click();}}}}}
function getNewSelfDefineUIByAttrVal(attrvalvo,attrvo,attrId,attrValId,selfDefineDivId,otherValId){if(attrvo==null||attrvalvo==null){return"";}
var selfDefValName="";if(otherValId==attrValId){selfDefValName="";}else{selfDefValName=attrvalvo["lineAttrvalName"];}
var selfDefineHtml=[];selfDefineHtml[selfDefineHtml.length]="<tr id=\""+selfDefineDivId+"\">";if(isHavePic(attrvo)){selfDefineHtml[selfDefineHtml.length]="<td class=\"pro-edit-rt\">";if(isHavePic(attrvo)){if(attrvalvo["picUrl"]!=null&&attrvalvo["picUrl"]!=""){selfDefineHtml[selfDefineHtml.length]=" <span class=\"colorbox\">";selfDefineHtml[selfDefineHtml.length]=" <img height=\"11\" width=\"11\" src=\""+g_image_server_url+attrvalvo["picUrl"]+"\">";selfDefineHtml[selfDefineHtml.length]=" </span>";}}
selfDefineHtml[selfDefineHtml.length]="<span class=\"marginright5\">"+getCateAttrValNameCn(attrvalvo)+"</span>";if(isHaveText(attrvo)){selfDefineHtml[selfDefineHtml.length]=" <input class=\"attr-text-input colornamebox\" name=\"\" id=\""+"text_defineattrval_name_"+attrId+"_"+attrValId+"\" type=\"text\" value=\""+selfDefValName+"\"  onblur=\"validSelfDefineAttrvalName(\'"+attrId+"\', \'"+attrValId+"\') \"";selfDefineHtml[selfDefineHtml.length]=" />";}
selfDefineHtml[selfDefineHtml.length]="</td>";selfDefineHtml[selfDefineHtml.length]="<td class=\"pro-edit-rt\">";if(isHavePic(attrvo)){var unionid=attrId+"_"+attrValId;if(isAbleEditAttr()){selfDefineHtml[selfDefineHtml.length]=" <span class=\"tourobjBtn\">";selfDefineHtml[selfDefineHtml.length]=" <input type=\"button\" value=\"选择图片\"  id=\"attrValFileupload_"+unionid+"\" name=\"attrValFileupload_"+unionid+"\" style=\"visibility: hidden; display: none; \" />";selfDefineHtml[selfDefineHtml.length]=" </span>";}
selfDefineHtml[selfDefineHtml.length]=" <span class=\"text-pro-upload\" id=\"div_defineattrval_img_"+unionid+"\" style=\"display:none\">";selfDefineHtml[selfDefineHtml.length]=" <img  src=\"http://www.dhresource.com/dhs/mos/image/syi/new/syi-img8.png\" width=\"20\" height=\"20\"  id=\"defimg_"+unionid+"\" name=\"defimg_"+unionid+"\" />";selfDefineHtml[selfDefineHtml.length]=" <span id=\"text_defineattrval_url_imgname_"+unionid+"\" title=\"\" style=\"display:inline-block;width:90px;\" ></span> ";selfDefineHtml[selfDefineHtml.length]=" <input type=\"hidden\" id=\"text_defineattrval_url_"+unionid+"\" name=\"text_defineattrval_url_"+unionid+"\"  value=\"\" />  ";selfDefineHtml[selfDefineHtml.length]="   <a href=\"javascript:void(0)\" class=\"marginleft10\" onclick=\"javascript:delSelfDefineUpload_new("+attrId+","+attrValId+");return false;\" >删除</a> ";selfDefineHtml[selfDefineHtml.length]="   </span>";selfDefineHtml[selfDefineHtml.length]=" <span id=\"attrPicQueue_"+unionid+"\"></span> ";}
selfDefineHtml[selfDefineHtml.length]="</td>";}else{if(isHaveText(attrvo)){selfDefineHtml[selfDefineHtml.length]="<td class=\"pro-edit-rt\">"+getCateAttrValNameCn(attrvalvo)+"</td>";}
if(isHaveText(attrvo)){selfDefineHtml[selfDefineHtml.length]=" <td class=\"pro-edit-rt\"> <input class=\"attr-text-input textnamebox\" name=\"\" id=\""+"text_defineattrval_name_"+attrId+"_"+attrValId+"\" type=\"text\" value=\""+selfDefValName+"\"  onblur=\"validSelfDefineAttrvalName(\'"+attrId+"\', \'"+attrValId+"\') \"";selfDefineHtml[selfDefineHtml.length]=" /></td>";}}
selfDefineHtml[selfDefineHtml.length]="</tr>";if(isHavePic(attrvo)){var callBackObj={"callType":"attr","attrId":attrId,"attrValId":attrValId};var uploadify_id=attrId+'_'+attrValId;setTimeout(function(){initsingleUploadifyImg_syinew(['jpg'],callBackObj,uploadify_id);},1);}
return selfDefineHtml.join("");};
(function($,window){var Events,LANG={},Module,CONFIG,CommonController,Dialog,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}
return-1;},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))
child[key]=parent[key];}
function ctor(){this.constructor=child;}
ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};Events={bind:function(ev,callback){var calls,evs,name,_i,_len;evs=ev.split(' ');calls=this.hasOwnProperty('_callbacks')&&this._callbacks||(this._callbacks={});for(_i=0,_len=evs.length;_i<_len;_i++){name=evs[_i];calls[name]||(calls[name]=[]);calls[name].push(callback);}
return this;},one:function(ev,callback){return this.bind(ev,function(){this.unbind(ev,arguments.callee);return callback.apply(this,arguments);});},trigger:function(){var args,callback,ev,list,_i,_len,_ref;args=1<=arguments.length?__slice.call(arguments,0):[];ev=args.shift();list=this.hasOwnProperty('_callbacks')&&((_ref=this._callbacks)!=null?_ref[ev]:void 0);if(!list){return;}
for(_i=0,_len=list.length;_i<_len;_i++){callback=list[_i];if(callback.apply(this,args)===false){break;}}
return true;},unbind:function(ev,callback){var cb,i,list,_i,_len,_ref;if(!ev){this._callbacks={};return this;}
list=(_ref=this._callbacks)!=null?_ref[ev]:void 0;if(!list){return this;}
if(!callback){delete this._callbacks[ev];return this;}
for(i=_i=0,_len=list.length;_i<_len;i=++_i){cb=list[i];if(!(cb===callback)){continue;}
list=list.slice();list.splice(i,1);this._callbacks[ev]=list;break;}
return this;}};function tpl(str,data){var reg=/(\$\{\w+\})/g,i,len,tkey,key,value,matchs=str.match(reg);if(matchs!=null){for(i=0,len=matchs.length;i<len;i++){tkey=matchs[i];key=tkey.replace(/(\$\{|\})/g,'');value=data[key]!==undefined?data[key]:'';str=str.replace(tkey,value);}}
return str;}
moduleKeywords=['included','extended'];Module=(function(){Module.include=function(obj){var key,value,_ref;if(!obj){throw new Error('include(obj) requires obj');}
for(key in obj){value=obj[key];if(__indexOf.call(moduleKeywords,key)<0){this.prototype[key]=value;}}
if((_ref=obj.included)!=null){_ref.apply(this);}
return this;};Module.extend=function(obj){var key,value,_ref;if(!obj){throw new Error('extend(obj) requires obj');}
for(key in obj){value=obj[key];if(__indexOf.call(moduleKeywords,key)<0){this[key]=value;}}
if((_ref=obj.extended)!=null){_ref.apply(this);}
return this;};Module.proxy=function(){var _this=this,_slice=[].slice,func=arguments[0],args=_slice.call(arguments,1);return function(){return func.apply(_this,args.concat(_slice.call(arguments)));};};Module.prototype.proxy=function(){var _this=this,_slice=[].slice,func=arguments[0],args=_slice.call(arguments,1);return function(){return func.apply(_this,args.concat(_slice.call(arguments)));};};function Module(){if(typeof this.init==="function"){this.init.apply(this,arguments);}}
return Module;})();CommonController=(function(_super){__extends(CommonController,_super);function CommonController(opt){opt=opt||{};this.el=$(opt.el||document.body);this.delegateEvents(this.events);this.refreshElements();CommonController.__super__.constructor.apply(this,arguments);}
$.extend(CommonController.prototype,Events);$.extend(CommonController.prototype,{proxy:function(){var _this=this,_slice=[].slice,func=arguments[0],args=_slice.call(arguments,1);return function(){return func.apply(_this,args.concat(_slice.call(arguments)));};},refreshElements:function(){var key,value,_ref,_results;_ref=this.elements;_results=[];for(key in _ref){value=_ref[key];_results.push(this[value]=this.el.find(key));}
return _results;},eventSplitter:/^(\S+)\s*(.*)$/,delegateEvents:function(events){var eventName,key,match,method,selector,_results,_this=this;_results=[];for(key in events){method=events[key];if(typeof method==='function'){method=(function(method){return function(){method.apply(_this,arguments);return true;};})(method);}
else{if(!this[method]){throw new Error(""+method+" doesn't exist");}
method=(function(method){return function(){_this[method].apply(_this,arguments);return true;};})(method);}
match=key.match(this.eventSplitter);eventName=match[1];selector=match[2];if(selector===''){_results.push(this.el.bind(eventName,method));}
else{_results.push(this.el.delegate(selector,eventName,method));}}
return _results;},validate:function(type,el){var func='_check'+type,arg=[].slice.call(arguments,1);if(this[func]&&$.isFunction(this[func])){return this[func].apply(this,arg);}else{return true;}},addRules:function(rules){if(rules){for(var o in rules){this['_check'+o]=rules[o];}}}});return CommonController;})(Module)
CommonController.sub=function(instances,statics){var result;result=(function(_super){__extends(result,_super);function result(){return result.__super__.constructor.apply(this,arguments);}
return result;})(this)
if(instances){result.include(instances);}
if(statics){result.extend(statics);}
if(typeof result.unbind==="function"){result.unbind();}
return result;};LANG.dialog={ok:'确定',cancel:'取消',close:'关闭'};Dialog=CommonController.sub({template:{box:['<div class="j-dialog-box ${className}" style="position:absolute;left:${left}px;top:${top}px;z-index:${zIndex}"><table class="noshade-pop-table" >','<tbody><tr><td class="t-lt"></td><td class="t-mid"></td><td class="t-ri"></td></tr>','<tr><td class="m-lt"></td><td class="m-mid">','<div class="mid-warp">','<div class="noshade-pop-content">','<div class="noshade-pop-title j-dialog-head"><span>${title}</span></div>','<div class="noshade-pop-inner j-dialog-content" style="width:${width}px;height:${height}px;">${content}</div>','<div class="deitbtnbox clearfix j-dialog-btnbox" style="text-align:center;margin:10px auto;" >${btns}</div>','<div class="noshade-pop-bot"></div>','</div>','<a class="noshade-pop-close j-dialog-button" data-type="close" data-event="${closeType}" href="#"></a></div>','</td><td class="m-ri"></td></tr><tr><td class="b-lt"></td><td class="b-mid"></td><td class="b-ri"></td></tr></tbody></table></div>'].join(''),btn:'<span class="j-dialog-button ${className}"  data-event="${event}"><input type="button" value="${name}"></span>',masker:'<div class="j-masker" style="position: absolute; z-index: ${zIndex}; top: 0px; left: 0px; height:${width}; width: ${height}; opacity: ${opacity}; filter:alpha(opacity=${alpha}); background:#D8D8D8;"><iframe frameborder="none" width="100%" height="${wheight}"></iframe></div>'},init:function(options){this.opt={events:[],title:'',content:'',buttons:'',width:400,height:'auto',zIndex:9999,pos:false,isMask:true,closeType:'close',masker:{zIndex:1000,opacity:0.4,width:'100%',height:'100%'}};$.extend(this.opt,options);this.createBox();this.initEvents();this.setPos();},initEvents:function(){var i,len,opt=this.opt.events,_this=this;if(opt.length>0){for(i=0,len=opt.length;i<len;i++){info=opt[i];this.el.delegate(info[0],info[1],this.proxy(this.customEvent,[info[2]]));}}
$(window).resize(this.proxy(function(){this.setPos()}));},customEvent:function(ename,evt){this.trigger(ename,evt);},events:{'click .j-dialog-button':'fnButtonClick'},elements:{'div.j-masker':'elMasker','div.j-dialog-box':'elBody','div.j-dialog-head':'elHead','div.j-dialog-content':'elContent','div.j-dialog-btnbox':'elBtnBox'},fnButtonClick:function(evt){var el=$(evt.currentTarget),event=el.attr('data-event'),type=el.attr('data-type');if(event=='hide'){this.hide();}
if(event=='close'){this.close();}
if(event){this.trigger(event,this);}},getMaskerHtml:function(option){var opt=option||this.opt.masker;this.opt.masker.alpha=this.opt.masker.opacity*100;if($.browser.msie&&$.browser.version=='6.0'){this.opt.masker.wheight=$(window).height()+$(document).scrollTop();}
return tpl(this.template.masker,opt);},createBox:function(){var data=this.opt,html='';data.btns=this.getButtonsHtml(this.opt.buttons);html=tpl(this.template.box,data);if(this.isMask||($.browser.msie&&$.browser.version=='6.0')){html+=this.getMaskerHtml();}
this.el.html(tpl(this.template.box,data)+this.getMaskerHtml());this.refreshElements();},getButtonsHtml:function(buttons){var i,len,btnStr=[],data,type=1,lt;if(typeof buttons!='string'){if(buttons.name){buttons=[buttons]};len=buttons.length;for(i=0;i<len;i++){lt=buttons[i];if(!lt.type){lt.type=1}
lt.className=lt.type==2?"yellowBtn":"tourBtn";btnStr.push(tpl(this.template.btn,lt));}
btnStr=btnStr.join('');}else{btnStr=buttons;}
return btnStr;},setTitle:function(title){this.elHead.html(title);return this;},setContent:function(content){this.elContent.html(content);this.setPos();return this;},setButtons:function(buttons){this.elBtnBox.html(this.getButtonsHtml(buttons));return this;},setPos:function(pos){var height=this.elBody.height(),width=this.elBody.width(),position=(pos&&pos.left)?pos:{left:($(window).width()-width)/2,top:($(window).height()-height)/2+$(document).scrollTop()};this.elBody.css(position);if(!this.opt.isMask&&$.browser.msie&&$.browser.version=='6.0'){this.elMasker.css(position);this.elMasker.css('height',height+'px').css('width',width+'px');this.elMasker.html('<iframe width="'+width+'" height="'+height+'"frameborder="0" src="_blank"></iframe>');}
return this;},close:function(){this.el.remove();return this;},show:function(){this.el.show();return this;},hide:function(){this.el.hide();}});Dialog.create=function(opt){var box=document.createElement('div');$(opt.parent||document.body).append(box);opt.el=box;return new Dialog(opt);};Dialog.alert=function(msg,option){var opt=$.extend({title:'提示',width:400,height:50},option),alt;opt.content='<p style="padding:20px;">'+msg+'</p>';opt.buttons=[{name:LANG.dialog.ok,event:'close',type:2}];alt=Dialog.create(opt);setTimeout(function(){alt.close()},3000);return alt;};Validate={msgBox:$('#errorMsgDiv'),errorList:$('#errorUL'),setError:function(el,msg,name){el.attr('data-error',msg);el.attr('data-name',name);},showError:function(el){var box=el.closest('div.j-list-item');el.addClass('error-text');this.focusErrorItem(box);},checkTip:function(el){var box=el.closest('div.j-list-item'),tip=box.find('div.tip-error'),list=box.find('error-text');if(list.length<1){tip.hide();}},showTip:function(el){var _this=this,list=el.find('div.tip-error:visible');setTimeout(function(){if(list.length>0){list.each(function(){var lt=$(this),tipName=lt.attr('data-name'),id=lt.attr('data-id'),author=lt.attr('data-anchor'),tel=$('#j-'+id),errorMsg=lt.text();_this.msgBox.show();if(tel.length<1&&!!author&&!!tipName){_this.errorList.append('<li id="j-'+id+'" ><a href="#'+author+'">'+tipName+'</a>：<span class="color1">'+errorMsg+'</span></li>');}});}else if(_this.errorList.find('li').length<1){_this.msgBox.hide();}},0)},isOk:function(el){return el.find('div.tip-error:visible').length<1;},focusErrorItem:function(box){var first=box.find('.error-text').first(),msg=first.attr('data-error'),tipError=box.find('div.tip-error'),name=first.attr('data-name');if(tipError.length>0)tipError.attr('data-name',name).html('<p>'+msg+'</p>').show();},removeError:function(el){var box=el.closest('div.j-list-item'),errorList;if(box.length<1){box=el};el.removeClass('error-text');el.attr('data-error','');errorList=box.find('.error-text');if(errorList.length<1){var tip=box.find('div.tip-error'),tipid=tip.attr('data-id');tip.hide();if(tipid){$('#j-'+tipid).remove();if(this.msgBox.find('li').length<1){this.msgBox.hide();}}}else{}},clearError:function(el){var box=el.closest('div.j-list-item'),errorList=box.find('.error-text');errorList.removeClass('error-text');box.find('div.tip-error').hide();}};CONFIG={selfAddAttrId:11,attrTypeMulti:"1",attrTypeSingle:"2",attrTypeString:"4",attrTypeNum:"5",imageUrl:"http://image.dhgate.com/",attrStyleText:"1",attrStylePic:"2",attrStylePicText:"3",otherValueId:0,customStandard:9999};function CtoH(str){var reg,len,i,lt,list=["！__!","◎__@","＃__#","￥__$","％__%","……__^","—__&","×__*","（__(","）__)","－__-","＋__+","÷__/","§__|","。__.","，__,","《__<","》__>","？__?","～__~","“__\"","；__;","：__:","‘__'","【__]","】__]","『__{","』__}","·__`","！__!","＠__@","＃__#","￥__$","％__%","＾__^","＆__&","（__(","）__)","＿___","－__-","＋__+","＝__=","＼__\\","｜__|","ａ__a","ｂ__b","ｃ__c","ｄ__d","ｅ__e","ｆ__f","ｇ__g","ｈ__h","ｉ__i","ｊ__j","ｋ__k","ｌ__l","ｍ__m","ｎ__n","ｏ__o","ｐ__p","ｑ__q","ｒ__r","ｓ__s","ｔ__t","ｕ__u","ｖ__v","ｗ__w","ｘ__x","ｙ__y","ｚ__z","Ａ__A","Ｂ__B","Ｃ__C","Ｄ__D","Ｅ__E","Ｆ__F","Ｇ__G","Ｈ__H","Ｉ__I","Ｊ__J","Ｋ__K","Ｌ__L","Ｍ__M","Ｎ__N","Ｏ__O","Ｐ__P","Ｑ__Q","Ｒ__R","Ｓ__S","Ｔ__T","Ｕ__U","Ｖ__V","Ｗ__W","Ｘ__X","Ｙ__Y","Ｚ__Z","［__]","］__]","｛__{","｝__}","：__:","；__;","＂__\"","＇__'","？__?","／__/","、__,","．__.","，__,","＞__>","＜__<","｀__`","～__~","１__1","２__2","３__3","４__4","５__5","６__6","７__7","８__8","９__9","０__0","　__ "];if(str.length<1){return;}
for(i=0,len=list.length;i<len;i++){lt=list[i].split('__');reg=new RegExp(lt[0],'g');str=str.replace(reg,lt[1]);}
return str;}
function $L(source,params){params=params||{};return DH.I18N[source]===undefined?"":DH.I18N[source].replace(/\#\{(\w+)\}/ig,function($0,$1){return params[$1]!==undefined?params[$1]:'';});};window.Validate=Validate;window.CONFIG=CONFIG;window.Module=Module;window.CommonController=CommonController;window.Dialog=Dialog;window.tpl=tpl;window.CtoH=CtoH;window.DH={I18N:{}};window.CustomEvent=$({});window.$L=$L;})($,window);
(function($,window){var HELPMESG={saleUnit:{title:'销售计量单位',content:"您所销售产品最小的计量单位，也就是单个产品的量词。例如，您销售的是袜子，则选择双（pair）；您销售的是手机，则选择件（piece）。"},saleType:{title:'销售方式',content:'您可以根据实际所卖产品的重量、体积、货值来选择打包方式。比如，手机、平板电脑这种货值比较大，或者家具这种体积和重量都比较大的产品，较适合单件卖；袜子这种重量、体积和货值都较小的产品，较适合打包出售。'},skuPrice:{title:'实际收入',content:'您填写的实际收入，不含佣金。平台将会按照阶梯佣金规则换算成对应的买家价格（含佣金），即买家端销售价格（不含运费）。<p> 实际收入 = 买家价格 - 平台佣金 ， 平台佣金 = 买家价格 * 佣金率 </p>填写时请注意以上规则，确保您的实际收入。  '},skuCode:{title:'商品编码',content:'您可以为产品设置商品编码，从而来区分您产品来自不同的厂家，不同的类目，不同的规格。'},stockNum:{title:'备货数量',content:'如果您的产品有库存，则请填写产品的备货数量。'},maxSaleQty:{title:'最大购买数',content:'如果您选择产品是没有库存的，则请填写‘客户一次最大购买数量上限’，避免客户在前台一次拍下您的大量商品，造成您没有相应的库存，被客户投诉而造成平台对您‘成交不卖’的处罚。'},skuSection:{title:'设置批发价',content:'您可以设置最多三个批发区间，并设置每个批发区间的起批量'},proLeading:{title:'备货期',content:'<p>如果您选择了备货的方式，则您的备货期需要≤2天；</p><p>如果您选择了没有备货的方式，则您的备货期可以≤60天。</p>'},stockHelp:{title:'产品备货帮助',content:'有备货：<br />有备货指的产品有现货，可立即发货。如果选择了该状态，需要填写备货的所在地，针对该产品的属性、规格组合分别设置对应的产品数量，并且该产品的备货期被限制在指定的天数内，需在该天数内发货此产品。买家会看到该产品的数量与备货期，有针对性的进行下单。该状态的产品具有竞争优势。<br />待备货：<br />待备货指的是产品暂时没有现货，需要根据买家的下单进行采购后再进行发货。如果选择了该状态，备货期填写需小于等于60天，不需要设置产品的数量。<br />备货期:<br />备货期为卖家的发货期限，指的是在一定的时间内需发货。备货状态为“有备货”的产品的备货期根据类目的不同被控制在一定的时间内，即卖家填写的备货期需小于等于该时间控制；备货状态为“待备货”的产品的备货期无时间控制，卖家可根据自己的实际发货情况进行填写相应的备货期。'},productGroupHelp:{title:'产品组',content:'<p>1）完善新建产品组功能，增加英文字段的输入<br />2）在一级产品组中添加产品组二级分组，最多可以创建5个二级分组<br />3）在单个产品组中添加或移除产品<br />4）通过拖拽的方式进行一级产品组排序<br />5）通过拖拽方式进行组内产品排序</p><p>现在就去<a href="http://seller.dhgate.com/prodmanage/group/prodGroupCreate.do" target="_blank">添加产品组</a>。</p>'},waterMark:{title:'产品图片',content:["<strong>产品图片</strong>","为提高产品的成单率，建议您使用自己拍摄的图片，并为产品拍摄4-8张细节图，全方位展示产品的特点。<br /><a href='http://edu.dhgate.com/s7f144ff2753b7a32e0400a0a2b0a6390.html' target='_blank'>点击这里了解如何拍摄图片</a>","为了能更突出的展现产品，拍照时背景请尽量简单，以浅色背景为宜，这样才能更突出产品特征。图片尽可能清晰，请尽量避免大面积的文字遮盖产品细节。<br /><a href='http://help.dhgate.com/dhgate/sellerhelpcn.php?catid=0320&artid=952838533610B144E0400A0AD40A585C' target='_blank'>手把手教您如何选用优质图片</a>","<br/><br/><strong>勾选</strong>【为“本地上传”的图片添加水印】，为本地上传的图片添加水印，默认位置为右下角；您还可以调整水印位置（点击【设置水印位置并预览】）。<br/><br/>","<strong>不勾选</strong>【为“本地上传”的图片添加水印】，本地上传的图片不添加水印。","<br/><strong>上传优质图片获取更多的站内站外流量</strong><br/>优质产品图片定义：<br/>无任何促销信息（例如：hot,%off,New,free shipping）<br/>无产品属性的文字(64GB,red,）<br/>无产品名称（for iphone 5c,memory card）<br/>无任何人为修改痕迹（如产品大小标尺，PS修改涂抹)<br/>无水印，无修饰、边框<br/><a target='_blank' href='http://seller.dhgate.com/help/seller-help/c0201/a70201.html'>怎样的图片可以站内外推广？</a>"].join('')},expressions:{title:'阶梯佣金计算公式',content:['<p>当订单金额 >= US $300时:<br/>平台佣金=订单金额*佣金率（4.5%）<br/>当订单金额 < US $300时:<br/>平台佣金=订单金额*佣金率（按类目不同为8%或12%）</p>','<p>根据阶梯佣金计算公式，买家价格计算方法为：</p>','<p>当实际收入*数量 >= US $286.5时:<br/>买家价格=实际收入/(1-佣金率),佣金率=4.5%。<br/> 当实际收入*数量&nbsp;<&nbsp;US $286.5时:<br/>买家价格=实际收入/(1-佣金率),佣金率按类目不同为8%或12%</p>'].join('')},googleshopping:{title:'站内外推广图片',content:['<p>这里是googleshopping的帮助内容</p>'].join('')}};var syiHelp={currentHelpId:null,helpTpl:'<h2>帮助信息</h2><span><strong>${title}</strong></span>${content}',init:function(){this.initElement();this.initEvent();},initElement:function(){this.elPostHelp=$("#postHelp");this.elPostMain=$("#postMain");this.elHelpBox=$("#layouttip");this.elTransBox=$('#translateBox');},initEvent:function(){var _this=this;$(document.body).delegate('a.postclosed','click',function(){_this.hide();})
$(document.body).delegate('.j-help','click',function(evt){var lt=$(evt.currentTarget),helpid=lt.attr('data-helpid');if(helpid){_this.show();_this.setContent(helpid);}});$(document.body).delegate('.helpicon','click',function(evt){var lt=$(evt.currentTarget),isIcon=lt.hasClass('helpicon'),helpid=lt.attr('data-helpid');evt.stopPropagation();if(isIcon&&helpid){if(helpid==_this.currentHelpId&&_this.isShow()){_this.hide();}else{_this.show();_this.setContent(helpid);}}})},isShow:function(){var el=$("#postHelp");return el.attr('data-status')==='1';},show:function(){var resizeMainWidth=$(window).width()-this.elPostHelp.width();this.elPostHelp.attr('data-status',1);this.elPostHelp.css("display","block");this.elPostMain.css({"margin-right":"235px"});$("html").css({"overflow-y":"hidden"});if($.browser.msie&&$.browser.version=="6.0"){this.elPostMain.width(resizeMainWidth);}
this.elTransBox.css('right','261px');},hide:function(){this.elPostHelp.attr('data-status',0);this.elPostHelp.css("display","none");this.elPostMain.css({"margin-right":"0"});this.elTransBox.css('right','26px');},setContent:function(id){if(HELPMESG[id]){this.elHelpBox.html(tpl(this.helpTpl,HELPMESG[id]));}
this.currentHelpId=id;}}
window.syiHelp=syiHelp;})($,window);
$(document).ready(function(){StandardsController.init({el:'#j-attribute-list'});syiHelp.init();if(window.syiWaterMark){syiWaterMark.init();}
if(window.ProductGroupController){ProductGroupController.init();}
if(window.ShippingController){ShippingController.init();}
if(window.ContentController){ContentController.init();}
if(window.RelatedProduct){RelatedProduct.init();}});
(function(window,$){var template={tplItem:'<li data-id="${shippingmodelid}" data-name="${modelname}">${modelname}</li>',loading:'<div style="height:40px;" class="syiloadding"></div>',arrowup:'<b class="uparrow"></b>',arrowdown:'<b class="downarrow"></b>'};var LANG={"syi_msg_getShippingFail":"运费模版获取失败！","syi_msg_getTplFail":"运费模版内容请求失败!","syi_msg_computePriceFail":"价格计算失败！","syi_msg_setShippingPrice":"运费设置","syi_valid_chooseTpl":"请选择运费模版"};$.extend(DH.I18N,LANG);$L=window.$L||function(name){return LANG[name];};ShippingController=CommonController.sub({init:function(){this.initEvent();this.loadDefault();this.addRules(rules||{});},elements:{'#selectTemplateDiv':'elTplSelect','#shippingmodelname':'elTplText','#shippingmodelid':'elTplValue','#templateTableDiv':'elTplBox','#templatesDiv':'elTplList','#productweight':'elWeight','#sizelen':'elSizeLen','#sizewidth':'elSizeWidth','#sizeheight':'elSizeHeight','#caculateCountry':'elCountry','div.j-shipping-bar':'elShippingBar','div.j-shipping-box':'elShippingBox','div.j-country-warp':'elWarp','div.j-wrap-content':'elWarpInner','div.j-package-tips':'elPackageTip'},events:{'change #caculateCountry':'fnCountryChange','click #templatesUL li':'fnTplChange','click #selectTemplateDiv':'fnTplSelectShow','mouseover #templatesUL li':'fnTplItemOver','mouseout #templatesUL li':'fnTplItemOut','mouseleave  .syi-lfselect':'fnTplSelectHide','click div.j-shipping-countrys':'fnCountrysClick','click div.j-shipping-bar':'fnShippingToggle','mouseleave div.j-country-warp':'hideCountryWarp'},initEvent:function(){var _this=this;$('#btn_submitproduct').click(function(){return _this.validate('Tpl',_this.elTplText);});$('.j-textchange').blur(this.proxy(function(){this.fnPackInfoChange();}))},loadDefault:function(){var data=this.getShippingInfo(1);if(data.shippingModelId){this.showShippingTableInfo(data);}},fnPackInfoChange:function(){var data=this.getShippingInfo(),list=this.elTplBox.find('div.j-ship-item:visible');if(data.country&&data.status&&list.length>0){this.computeShippingPrice(data);}
data=list=null;},fnCountryChange:function(evt){var el=$(evt.currentTarget),cid=el.val();this.countryChange(cid);},fnTplSelectShow:function(){var _this=this,str,ulbox=this.elTplList.find('ul'),nobox=this.elTplList.find('div.catemore');ulbox.html(template.loading);this.elTplList.show();$.get('/syi/getSuppTemplates.do',function(result){if(result&&result.code=='1000'){nobox.hide();str=_this.getTplListHtml(result.data);if(result.data.length>10){ulbox.attr('style','height:200px;overflow-y:scroll;overflow-x:hidden;');}else{ulbox.attr('style','');}
ulbox.html(str);}else{nobox.show();Dialog.alert($L('syi_msg_getShippingFail'));}
ulbox=nobox=null;},'json');},fnTplSelectHide:function(){this.elTplList.hide().delay(300);},fnTplChange:function(evt){var el=$(evt.currentTarget),id=el.attr('data-id'),name=el.attr('data-name');this.elTplValue.val(id);this.elTplText.val(name);this.fnTplSelectHide();this.validate('Tpl',this.elTplText);this.elCountry.val('');this.showShippingTableInfo(this.getShippingInfo(1));},fnTplItemOver:function(evt){var lt=$(evt.currentTarget);lt.addClass('hover');},fnTplItemOut:function(evt){var lt=$(evt.currentTarget);lt.removeClass('hover');},fnShippingToggle:function(evt){var el=$(evt.currentTarget),upEl=el.find('.uparrow'),doEl=el.find('.downarrow');if(upEl.length>0){el.html(template.arrowdown);this.elTplBox.find('.j-ship-more').hide();}
if(doEl.length>0){el.html(template.arrowup);this.elTplBox.find('.j-ship-more').show();}},fnCountrysClick:function(evt){var el=$(evt.currentTarget),content=el.attr('data-names'),parent=el.closest('ul.j-shipping-clum'),pos=parent.position();if(el.hasClass('inner-icon')){this.showCountryWarp(pos,content);}},setPackSuggest:function(state){if(!state){this.elPackageTip.show('slow');}else{this.elPackageTip.hide();}},countryChange:function(cid,state){var list=this.elTplBox.find('ul.j-shipping-clum'),length=list.length,lt,idList,parent,count=0;this.elTplBox.find('span.j-shipping-price').html('');if(!cid){this.setTplInfoBox();if(!state){}}else{this.elTplBox.find('div.j-ship-item').show();list.show();this.elShippingBar.hide();list.each(function(){lt=$(this);parent=lt.closest('div.j-ship-item');idList=lt.attr('data-countrys').split(',');if($.inArray(cid,idList)>-1){lt.show();}else{lt.hide();if(parent.find('ul.j-shipping-clum:visible').length<1){parent.hide();}
count++;}});if(count<length){this.fnPackInfoChange();}}},computeLoadding:function(){this.elTplBox.find('span.j-shipping-price:visible').html(template.loading);},hideCountryWarp:function(evt){$(evt.currentTarget).hide();},showCountryWarp:function(pos,content){this.elWarpInner.html(content);this.elWarp.css({left:pos.left+'px',top:pos.top+'px'}).show();},showShippingTableInfo:function(data){var _this=this;this.elTplBox.show();this.elShippingBox.html(template.loading).show();$.post('/syi/getTempTable.do?isblank=true',data,function(result){if(result){_this.elShippingBox.html(result).show();_this.elTplBox.find('ul.j-shipping-clum:odd').addClass('darklist');_this.countryChange(_this.elCountry.val(),true);}else{Dialog.alert($L('syi_msg_getTplFail'));}},'text');},setTplInfoBox:function(){var list=this.elTplBox.find('ul.j-shipping-clum'),len=list.length,bar=this.elShippingBar,lt,parent;this.elTplBox.find('div.j-ship-item').show();list.show();if(len>15){for(var i=15;i<len;i++){lt=list.eq(i);parent=lt.closest('div.j-ship-item');lt.addClass('j-ship-more').hide();if(parent.find('ul.j-shipping-clum:visible').length<1){parent.addClass('j-ship-more').hide();}}
bar.html(template.arrowdown).show();}else{bar.hide();}
lt=parent=list=bar=null;},computeShippingPrice:function(data){var _this=this;this.computeLoadding();$.post('/syi/getTempFee.do',data,function(result){if(result&&result.code){_this.setPriceToTable(result.data);}else{Dialog.alert($L('syi_msg_computePriceFail'));}});},setPriceToTable:function(data){this.elTplBox.find('span.j-shipping-price').html('');$.each(data,function(i,n){$('.j-'+n.shippingTypeId+'-price').html(n.price);});},getShippingInfo:function(state){var data={width:this.formatNum(this.elSizeWidth.val()),height:this.formatNum(this.elSizeHeight.val()),length:this.formatNum(this.elSizeLen.val()),grossweight:this.formatNum(this.elWeight.val()),quantity:$('#caculateQuantity').val(),country:state?'':$('#caculateCountry').val()},packageStatus=0,weiScope=$('#isonlyweight').attr('checked'),baseqt=$('#baseqt').val(),stepqt=$('#stepqt').val(),stepweight=$('#stepweight').val();data.shippingModelId=this.elTplValue.val();if(data.width&&data.height&&data.length&&data.grossweight){packageStatus=1}
data.packageStatus=packageStatus;this.setPackSuggest(packageStatus);if(packageStatus&&data.quantity&&data.country){data.status=1}else{data.status=0}
if(weiScope){data.baseqt=baseqt;data.stepqt=stepqt;data.stepweight=stepweight;}
return data;},getTplListHtml:function(data){var i,len=data.length,str=[];for(i=0;i<len;i++){str.push(tpl(template.tplItem,data[i]))}
return len>0?str.join(''):'';},formatNum:function(value){return value-0||0;}});var rules={Tpl:function(el){var value=el.val(),result=true;if(!value){result=false;Validate.setError(el,$L('syi_valid_chooseTpl'),$L('syi_msg_setShippingPrice'));Validate.showError(el);}else{Validate.removeError(el);}
return result;}};ShippingController.init=function(opt){return new ShippingController(opt);}
function showShippingCalculatorWin(strProductId){var strUrl='/syi/getStandardTempl.do?';if(strProductId!=null&&strProductId!=""){strUrl+='sid='+strProductId;}else{var isquickup=$("#isquickup").val();strUrl+='isquickup='+isquickup;}
var catePubId=$("#catepubid").val();strUrl+='&shippingSellerDto.catePubId='+catePubId;openFreightWin(strUrl);return false;}
function openFreightWin(theURL){var oLenInp=document.getElementById("sizelen");var paramlen=oLenInp.value;var oWidthInp=document.getElementById("sizewidth");var paramwidth=oWidthInp.value;var oHeightInp=document.getElementById("sizeheight");var paramheight=oHeightInp.value;var oWeightInp=document.getElementById("productweight");var paramgrossweight=oWeightInp.value;if(paramgrossweight==""||isNaN(parseInt(paramgrossweight)))
{showErrorTip("productweight","产品包装重量输入错误");oWeightInp.focus();return;}else{hideErrorTip("productweight");}
if(paramlen==""||isNaN(parseInt(paramlen)))
{$("#sizelenTip").show();oLenInp.focus();return;}else{$("#sizelenTip").hide();}
if(paramwidth==""||isNaN(parseInt(paramwidth)))
{$("#sizewidthTip").show();oWidthInp.focus();return;}else{$("#sizewidthTip").hide();}
if(paramlen==""||isNaN(parseInt(paramheight)))
{$("#sizeheightTip").show();oHeightInp.focus();return;}else{$("#sizeheightTip").hide();}
theURL+="&length="+paramlen+"&width="+paramwidth+"&height="+paramheight+"&grossWeight="+paramgrossweight;var strFrame="<iframe width='800' height='538' frameborder='0' scrolling='no' allowtransparency='true' src='"+theURL+"'></iframe>";$(strFrame).modal({close:false});}
window.showShippingCalculatorWin=showShippingCalculatorWin;window.ShippingController=ShippingController;})(window,$);
(function($,window){var LANG={},StandardsView,StandardsController,ValidateModel;LANG.standard={choseImage:'选择图片',inputTextError:'请输入英文字符和符号',deleteStr:'删除',customStandard:'自定义规格',custom:'自定义'};StandardsView={CustomAttributeItem:['<tr><td><input type="text" id="j-standards-${attrId}_${attrValId}" data-id="${attrId}_${attrValId}" name="c_${attrId}_vname" class="attr-text-input valnamebox j-cattr-item" value="${attrvalName}"><span class="txterror" style="display:none">',LANG.standard.inputTextError,'</span></td>','<td><span class="tourobjBtn"><input type="button" value="',LANG.standard.choseImage,'"  id="attrValFileupload_${attrId}_${attrValId}" name="attrValFileupload_${attrId}_${attrValId}" style="visibility: hidden; display: none; " /></span>','<span class="text-pro-upload" id="div_defineattrval_img_${attrId}_${attrValId}" style="display:${picDisplay}">','<img  src="${picUrl}" width="20" height="20"  id="defimg_${attrId}_${attrValId}"  name="defimg_${attrId}_${attrValId}" />','<span id="text_defineattrval_url_imgname_${attrId}_${attrValId}" title="" style="display:inline-block;width:90px;" ></span>','<input type="hidden" id="text_defineattrval_url_${attrId}_${attrValId}" name="text_defineattrval_url_${attrId}_${attrValId}"  value="" />','<a href="#" class="marginleft10" onclick="delSelfDefineUpload_new(${attrId},${attrValId});" >',LANG.standard.deleteStr,'</a></span>','<span id="attrPicQueue_${attrId}_${attrValId}"></span></td><td><a data-id="${attrId}_${attrValId}" href="#" class="j-cattr-del">',LANG.standard.deleteStr,'</a></td></tr>'].join('')};StandardsController=CommonController.sub({init:function(opt){this.skuSplitDot='A';this.pageTitle=document.title;this.opt=$.extend({catePubId:$('#inp_catepubid').val()},opt);this.attrList={9999:{attrId:9999,lineAttrNameCn:LANG.standard.customStandard,isbrand:"0"}};$('#btn_submitproduct').click(this.proxy(this.setCustomAttribute));$('#btn_previewproduct').click(this.proxy(this.setCustomAttribute));this.load();this.fixFlashBug();if(window.G_EVENT){G_EVENT.bind('draftbox-save',this.proxy(this.setCustomAttribute,1))}},fixFlashBug:function(){var _this=this;if($.browser.msie){setInterval(function(){if(document.title!=_this.pageTitle){document.title=_this.pageTitle;}},1000);}},elements:{'tbody.j-customAttr-box':'attributeBox','a.j-addCustomAttr':'attributeAddBtn','table.j-cattr-box':'cattrBox','#customAttrList':'customAttrInput'},events:{'change input.j-cattr-item':'fnCustomStandardChange','click a.j-addCustomAttr':'fnCustomStandardAdd','change input:checkbox':'fnChange','click a.j-cattr-del':'fnCustomStandardDel'},load:function(){var _this=this;if(window.G_EVENT){G_EVENT.bind('attributeLoadSuccess',function(evt,list){_this.formatStandInfo(list);_this.loadOther();});}else{$.post('http://seller.dhgate.com/syi/cateAttrL.do',{catePubId:this.opt.catePubId,isblank:true},function(list){_this.formatStandInfo(list.data.attributeList);_this.loadOther();})}},loadOther:function(){this.loadCustomStandards();CustomEvent.trigger('Standards.ready');this.loadSkuList();},loadCustomStandards:function(){var str=$('#div_customattrlist').text(),i,len,lt;if(str!==''){data=JSON.parse(str);this.cattrBox.show();for(i=0,len=data.length;i<len;i++){lt=data[i];lt['lineAttrvalName']=lt['attrvalName'];if(lt['attrValId']){this.attrList[CONFIG.customStandard][lt['attrValId']]=lt;this.createAttributeItem(data[i]);}}}},loadSkuList:function(){CustomEvent.trigger("Standards.loadDefault",[this.formatInputSkuData()]);},formatStandInfo:function(info){var o,item,vlist;for(var o in info){var item=info[o];var vlist=item['valueList'];item['valueList']=null;for(var m in vlist){item[vlist[m]['attrValId']]=vlist[m];}
this.attrList[item['attrId']]=item;}},formatInputSkuData:function(){var data,value=$('#div_proSkuInfo').text(),item,ilen,code,leadingtime,i,len,lt,j,jlen,jt,list={},newList=[],head=[],sampling;if(value){value=JSON.parse(value);for(item=0,ilen=value.length;item<ilen;item++){code=value[item].inventoryLocation;leadingtime=value[item].leadingTime;data=value[item].skuInfoList;list={};if(data){for(i=0,len=data.length;i<len;i++){var temp=[],tempdata={};lt=data[i];lt.leadingtime=leadingtime;if(lt.attrList&&lt.attrList.length>0){for(j=0,jlen=lt.attrList.length;j<jlen;j++){jt=lt.attrList[j];var m=this.getAttrValueById(jt['attrId'],jt['attrVid']);if(m){jt['lineAttrvalName']=m['lineAttrvalNameCn']||m['lineAttrvalName']||m['attrvalName'];temp.push(jt['attrId']+'_'+jt['attrVid']);tempdata[jt['attrId']+'_'+jt['attrVid']]=jt;}else{temp=[];tempdata={};break;}}
if(temp.length>0){lt.attrList=[];temp.sort();for(var k=0,klen=temp.length;k<klen;k++){lt.attrList.push(tempdata[temp[k]]);}
list[temp.join(this.skuSplitDot)]=lt;}}else{list['noSku']=lt;}}}
if(!$.isEmptyObject(list)){newList.push({code:code,list:list});}}
if(lt){sampling=lt['attrList']||[];for(i=0;i<sampling.length;i++){lt=sampling[i];head.push(this.getAttrById(lt['attrId']));}}
if(newList.length===0&&value.length>0){$('#div_proSkuInfo').text('[]');CustomEvent.trigger('sku.fixedErrorSkuData');}
return{skuList:newList,skuHead:head};}
return false;},getInUseCustomStandardLength:function(){list=this.attributeBox.find('input.j-cattr-item'),values=[];list.each(function(){var lt=$(this),value=lt.val();if(value){values.push(value);}});return values.length;},fnCustomStandardAdd:function(evt){var doc=window.document;this.cattrBox.show();this.createAttributeItem();},fnCustomStandardDel:function(evt){var el=$(evt.currentTarget),list,values=[],doc=window.document,id=el.attr('data-id');el.closest('tr').remove();this.attributeAddBtn.show();doc.title=this.pageTitle;list=this.attributeBox.find('input.j-cattr-item');list.each(function(){var lt=$(this),value=lt.val();if($.trim(value)){values.push(value);}});if(list.length<1){this.cattrBox.hide();this.validate('Ok',this.attributeAddBtn);}
if(values.length<1){this.triggerRefresh();}else{CustomEvent.trigger("Standards.attrItemDel",[id]);}},getCustomStandardId:function(){if(!this.csid){this.csid=1000;}else{this.csid=this.csid+1;}
return this.csid;},createAttributeItem:function(data){if(this.attributeBox.length>0){var data=data||0,_this=this,len,attrId=9999,attrValId,list=this.attributeBox.find('tr'),len=list.length;if(len+1>9){this.attributeAddBtn.hide();}else{this.attributeAddBtn.show();}
if(!data){attrValId=this.getCustomStandardId();data={"attrId":attrId,"attrValId":attrValId};}else{this.csid=data.attrValId;}
if(data.picUrl){data.picUrl=CONFIG.imageUrl+data.picUrl;data.picDisplay='';}else{data.picDisplay='none';}
if(/"/.test(data.attrvalName)){var tempValue=data.attrvalName+'';data.attrvalName="";}
this.attributeBox.append(tpl(StandardsView.CustomAttributeItem,data));data.callType='attr';if(tempValue){$("#j-standards-"+data.attrId+"_"+data.attrValId).val(tempValue);}
setTimeout(function(){initsingleUploadifyImg_syinew(['jpg'],data,data.attrId+'_'+data.attrValId);},100);}},setCustomAttribute:function(){var data=this.getCustomStandardsData(),value=JSON.stringify(data);$('#customAttrList').val(value);this.validate('MessageTip');},fnCustomStandardChange:function(evt){var el=$(evt.currentTarget),tmp,value=el.val(),id=el.attr('data-id'),_ids=id.split('_');if(this.validate('StandName',el)){if(this.getInUseCustomStandardLength()==1){this.triggerRefresh();}else{tmp=this.getSelectedListData(_ids);CustomEvent.trigger("Standards.attrItemAdd",[tmp]);}}},getCustomStandardsData:function(noCheck){var list=$('tbody.j-customAttr-box tr'),data=[],_this=this,validate=noCheck?function(){return true;}:this.validate;list.each(function(){var el=$(this),lt,img='',src,input=el.find('input.j-cattr-item'),imgEl=el.find('img'),name=input.val(),id=input.attr('data-id');if(imgEl.length>0){src=imgEl.attr('src');img=src?src.replace(/(.*)(avim.*)/,'$2'):'';}
if(validate.call(_this,'StandName',input)){lt={attrvalName:name,attrId:CONFIG.customStandard,attrValId:id.split('_')[1],picUrl:img};data.push(lt);}});return data;},fnChange:function(evt){var element=evt.currentTarget,el=$(element),tmp,type=el.attr('data-type'),checked=el.attr('checked'),value=el.val(),parent=el.closest('td.j-attrList'),checkedList=parent.find('input:checked'),aid=parent.attr('data-aid'),ids=value.split('_');if(checked){if(checkedList.length==1){this.triggerRefresh();}else{tmp=this.getSelectedListData(ids);CustomEvent.trigger("Standards.attrItemAdd",[tmp]);}}else{if(checkedList.length==0){this.triggerRefresh();}else{CustomEvent.trigger("Standards.attrItemDel",value);}}},triggerRefresh:function(){var data=this.getAllSelectDescrteListAttribute();if($.isEmptyObject(data.skuList)){data=null;}
CustomEvent.trigger("Standards.refresh",[data]);},getAllSelectDescrteListAttribute:function(){var skuData=this.getAllSelectListData(),sampling=skuData[0]||'';return{skuList:this.formatDescartesToAttribute(skuData),skuHead:this.getAllSelectAttrInfo(sampling)};},getAllSelectAttrInfo:function(str){var i,ids,data=[],skus=str.split(this.skuSplitDot);for(i=0;i<skus.length;i++){ids=skus[i].split('_');data.push(this.getAttrById(ids[0]));}
return data;},getAllSelectListData:function(){var list=this.el.find('input:checked'),data={},customList,_this=this;list.each(function(){var el=$(this),val=el.val(),ids=val.split('_'),attrId=ids[0];if(val){if(!data[attrId]){data[attrId]=[];}
data[attrId].push(val);}});customList=this.el.find('input.j-cattr-item');customList.each(function(){var el=$(this),ids=el.attr('data-id');if(_this.validate('StandName',el)){if(!data[CONFIG.customStandard]){data[CONFIG.customStandard]=[];}
data[CONFIG.customStandard].push(ids);}});return this.descartes(data);},getSelectedListData:function(ids){var list=this.el.find('input:checked'),listc,_this=this,data={};data[ids[0]]=[ids.join('_')];list.each(function(){var el=$(this),val=el.val(),_ids=val.split('_'),attrId=_ids[0],attrItemId=_ids[1];if(attrId!==ids[0]){if(!data[attrId]){data[attrId]=[];}
data[attrId].push(val);}});if(ids[0]!=CONFIG.customStandard){listc=this.el.find('input.j-cattr-item');listc.each(function(){var el=$(this),id=el.attr('data-id'),attrId=id.split('_')[0];if(_this.validate('StandName',el)){if(!data[attrId]){data[attrId]=[];}
data[attrId].push(id);}})}
return this.formatDescartesToAttribute(this.descartes(data));},formatDescarteToAttribute:function(item){var j,jlen,attrs,temp={attrList:[]};attrs=item.split(this.skuSplitDot);for(j=0,jlen=attrs.length;j<jlen;j++){var lt=this.getAttrValueById.apply(this,attrs[j].split('_'));if(lt){temp.attrList.push(lt);}}
return temp;},formatDescartesToAttribute:function(list){var i,len,result={};for(i=0,len=list.length;i<len;i++){result[list[i]]=this.formatDescarteToAttribute(list[i]);}
if(len==0){return false;}
return result;},descartes:function(list){var point={};var result=[];var pIndex=null;var tempCount=0;var temp=[];for(var index in list){if(typeof list[index]=='object'){point[index]={'parent':pIndex,'count':0}
pIndex=index;}}
if(pIndex==null){return list;}
while(true){for(var index in list){tempCount=point[index]['count'];temp.push(list[index][tempCount]);}
temp.sort();result.push(temp.join(this.skuSplitDot));temp=[];while(true){if(point[index]['count']+1>=list[index].length){point[index]['count']=0;pIndex=point[index]['parent'];if(pIndex==null){return result;}
index=pIndex;}
else{point[index]['count']++;break;}}}},getCustomValue:function(aid,vid){var ids=aid+'_'+vid,el=$('#j-standards-'+ids),name=el.val(),picUrl=$('#defimg_'+ids).attr('src'),id=aid+'_'+vid;if(el.length>0){return{lineAttrvalName:name,attrValId:vid,picUrl:picUrl.replace(/(.*)(avim.*)/,'$2')}}else{return this.attrList[aid][vid];}},getOtherAttrValue:function(aid,vid){var el=$('#text_defineattrval_name_'+aid+'_'+vid);return{lineAttrvalName:el.val()||LANG.standard.custom,attrValId:vid}},getAttrById:function(id){return this.attrList[id];},getAttrValueById:function(aid,vid){if(aid==CONFIG.customStandard){return this.getCustomValue(aid,vid);}else{if(vid==0){return this.getOtherAttrValue(aid,vid);}else{return this.attrList[aid]?this.attrList[aid][vid]:false;}}},ctoH:function(value){var str=value,result="";for(var i=0;i<str.length;i++){if(str.charCodeAt(i)==12288){result+=String.fromCharCode(str.charCodeAt(i)-12256);continue;}
if(str.charCodeAt(i)>65280&&str.charCodeAt(i)<65375)
result+=String.fromCharCode(str.charCodeAt(i)-65248);else result+=String.fromCharCode(str.charCodeAt(i));}
return result;},validate:function(type,el){var func='check'+type,arg=[].slice.call(arguments,1);if(this[func]&&$.isFunction(this[func])){return this[func].apply(this,arg);}else{return true;}}});$.extend(StandardsController.prototype,{checkMessageTip:function(){Validate.showTip(this.el);},checkOk:function(el){Validate.clearError(el);},checkStandName:function(el){el.val(CtoH(el.val()));var value=el.val(),result=true,reg=/[\u4e00-\u9fa5]+/g;if(value.length>40||value.length<1||reg.test(value)){result=false;Validate.setError(el,'自定义规格不能有中文及特殊字符,长度不超过40字符','自定义规格');Validate.showError(el);}else{Validate.removeError(el);}
return result;}});StandardsController.init=function(opt){return new StandardsController(opt);}
window.StandardsController=StandardsController;})($,window);
(function($,window){var LANG={choseWaterMarkPos:'选择水印显示位置',leftTop:'左上',rightTop:'右上',center:'居中',leftBottom:'左下',rightBottom:'右下',realWaterMarkPreview:'真实产品图片水印预览效果'};var template={posDialog:['<div class="bs-pro-title-box j-pos-list">',LANG.choseWaterMarkPos,'：<span class="j-pos-1" data-pos="1" >',LANG.leftTop,'</span><span class="j-pos-2" data-pos="2">',LANG.rightTop,'</span><span class="j-pos-3" data-pos="3">',LANG.center,'</span><span class="j-pos-4" data-pos="4">',LANG.leftBottom,'</span><span class="j-pos-5" data-pos="5">',LANG.rightBottom,'</span>','</div>','<div class="bs-pro-img-box">','<div class="bimg">','<div class="bimg-inner">','<span class="j-big-img"><img width="308"  src="${bigImg}"></span>','</div>','<div class="watermark bgposition01"></div>','</div>','<div class="simg-warp">','<div class="simg-list">','<ul style="margin-left: 0px;" class="j-img-list">${imgList}</ul>','</div>','<div  class="simg-lg-arrow j-arrow-left"></div>','<div id="simgRight" class="simg-rg-arrow j-arrow-right"></div>','</div>','</div>'].join(''),oldimgItem:'<li data-url="${url}" id="j-img-${md5}" data-src="http://image.dhgate.com/${url}/temp1.0x0.jpg" data-pos="5" ><span><img width="36" height="33"  src="http://image.dhgate.com/${url}/1.thumb.jpg"></span></li>',imgItem:'<li data-url="${url}" id="j-img-${md5}" data-src="http://image.dhgate.com/0x0p/${url}" data-pos="5" ><span><img width="36" height="33"  src="http://image.dhgate.com/100x100/${url}"></span></li>'};var syiWaterMark=CommonController.sub({init:function(){this.imgCache={};this.imgCount=0;this.defaultPos="5";this.initElement();this.initEvent();},initElement:function(){var box=document.createElement('div');document.body.appendChild(box);this.el=$(box);},initEvent:function(){if(window.G_EVENT){G_EVENT.bind('upload-img-success',this.proxy(this.imgUploadSuccess));G_EVENT.bind('upload-img-delete',this.proxy(this.imgUploadDelete));}
$('#j-waterMarkBtn').click(this.proxy(this.show));$('#j-waterMarkSelect').click(this.proxy(this.selectCheckBox));},elements:{'ul.j-img-list':'elImgList','div.j-pos-list':'elPosList','span.j-big-img img':'elBigImg','div.watermark':'elMarker'},events:{'click div.j-pos-list span':'fnSelectMarkPos','click ul.j-img-list li':'fnSelectImgItem','click div.j-arrow-left':'fnLeftArrowClick','click div.j-arrow-right':'fnRightArrowClick'},imgUploadSuccess:function(evt,data){console.log(['img upload']);this.imgCache[data.md5]=data;this.imgCount++;this.trigger('upload-success');this.setWaterMarkStatus();this.addImgItem(data);this.saveDefault();},imgUploadDelete:function(evt,data){console.log(['img del']);if(this.imgCache[data.md5]){delete this.imgCache[data.md5];this.trigger('img-delete');this.imgCount--;this.delImgItem(data.md5)}
this.setWaterMarkStatus();},show:function(){if(!this.dialog){var dialog,_this=this,data,buttons=[{name:'确定',event:'dialog.saveMark',type:2},{name:'取消',event:'hide'}];data=this.getImageList();html=tpl(template.posDialog,data);this.dialog=Dialog.create({title:LANG.realWaterMarkPreview,content:html,width:390,buttons:buttons,parent:this.el,closeType:'hide'});this.dialog.bind('dialog.saveMark',this.proxy(this.fnOkBtnClick));this.setArrowState('left');this.refreshElements();this.focusImgItemByIndex(0);}else{this.dialog.show();}},addImgItem:function(data){var url=data.url;if(url.indexOf("f2/albu")==0){this.elImgList.append(tpl(template.imgItem,data));}else if(url.indexOf("albu_")==0){this.elImgList.append(tpl(template.oldimgItem,data));}else{this.elImgList.append(tpl(template.imgItem,data));}},delImgItem:function(md5){$('#j-img-'+md5).remove();},getImageList:function(){var temp=[];for(var o in this.imgCache){var lt=this.imgCache[o];var url=lt.url;if(url.indexOf("f2/albu")==0){temp.push(tpl(template.imgItem,lt));}else if(url.indexOf("albu_")==0){temp.push(tpl(template.oldimgItem,lt));}else{temp.push(tpl(template.imgItem,lt));}}
return{imgList:temp.join('')};},setWaterMarkStatus:function(){if(this.imgCount<1){$('#j-waterMark-box').hide();}else{$('#j-waterMark-box').show();}},selectCheckBox:function(evt){var el=$(evt.currentTarget),btn=$('#j-waterMarkBtn'),value=el.attr('checked');if(value){btn.show();if(!this.dialog){this.saveDefault();}else{this.saveInfo();}}else{this.destoryDialog();btn.hide();this.clearInfo();}},destoryDialog:function(){if(this.dialog){this.dialog.close();this.dialog=null;}},fnOkBtnClick:function(){this.saveInfo();this.dialog.hide();},fnSelectMarkPos:function(evt){var el=$(evt.currentTarget),pos=el.attr('data-pos');this.focusPosItem(pos);},focusPosItem:function(pos){var el,style;this.elPosList.find('span.current').removeClass('current');if(pos){el=this.elPosList.find('span.j-pos-'+pos);el.addClass('current');this.saveCurrentImgPos(pos);this.setMarkPosition(pos-0);}else{this.elMarker.hide();}},fnSelectImgItem:function(evt){var el=$(evt.currentTarget);this.focusImgItem(el);},setMarkPosition:function(pos){var pclass='watermark bgposition';switch(pos){case 1:pclass+='01';break;case 2:pclass+='02';break;case 3:pclass+='03';break;case 4:pclass+='04';break;case 5:pclass+='05';break;default:break;}
this.elMarker.attr('className',pclass).show();var height=this.el.find('span.j-big-img img').height();var top=0;if(height>308){height=308;}else{top=(308-height)/2;}
this.elMarker.height(height).css('top',top+'px');},focusImgItemByIndex:function(i){var el=this.elImgList.find('li').eq(i);this.focusImgItem(el);},focusImgItem:function(el){var parent=el.parent(),pos=el.attr('data-pos')||0,height=0,top=0,bigUrl=el.attr('data-src');parent.find('li.current').removeClass('current');el.addClass('current');this.currentImg=el;this.elBigImg.attr('src',bigUrl);this.focusPosItem(pos);},saveCurrentImgPos:function(pos){if(this.currentImg&&this.currentImg.length>0){this.currentImg.attr('data-pos',pos)}},fnLeftArrowClick:function(evt){if(this.setArrowState('left')){this.elImgList.animate({marginLeft:"0px"},1000);}},fnRightArrowClick:function(evt){if(this.setArrowState('right')){this.elImgList.animate({marginLeft:"-230px"},500);}},setArrowState:function(aim){if(this.imgCount<=6){return false;}
var arrowleft=this.el.find('div.j-arrow-left'),arrowright=this.el.find('div.j-arrow-right');if(aim=='left'){arrowleft.removeClass('simg-lh-arrow');arrowright.addClass('simg-rh-arrow');}
if(aim=='right'){arrowright.removeClass('simg-rh-arrow');arrowleft.addClass('simg-lh-arrow');}
return true;},clearInfo:function(){$('#waterMark').val('');},saveDefault:function(){var data=[];for(var o in this.imgCache){var lt=this.imgCache[o];data.push({'url':lt.url,'pos':this.defaultPos,'class':'com.dhgate.syi.model.PrintPostVO'})}
$('#waterMark').val(JSON.stringify(data));},saveInfo:function(){var list=this.elImgList.find('li'),data=[];list.each(function(){var lt=$(this),url=lt.attr('data-url'),pos=lt.attr('data-pos');if(pos){data.push({'url':url,'pos':pos,'class':'com.dhgate.syi.model.PrintPostVO'});}});$('#waterMark').val(JSON.stringify(data));}});syiWaterMark.init=function(){return new syiWaterMark();}
window.syiWaterMark=syiWaterMark;})($,window);
(function($){var ProductGroupController=CommonController.sub({elements:{'#productgroupid':'pgname'},events:{'change .j-select-root':'changeRoot','change .j-select-sub':'changeSub'},init:function(){this.root=this.el.find('.j-select-root');this.sub=this.el.find('.j-select-sub');this.list=null;this.initData();},initData:function(){this.getData();this.initSelected();},initSelected:function(){var rootid,subList,subid,selected;if((selected=GROUP_LIST_SELECTED)){$(this.list).each(function(m,n){if(selected==n.groupId){rootid=n.groupId;n.childGroupList&&(subList=n.childGroupList);return false;}else if(n.childGroupList){$(n.childGroupList).each(function(x,y){if(selected==y.groupId){rootid=n.groupId;subList=n.childGroupList;subid=y.groupId;return false;}});}});if(rootid){this.root.val(rootid);if(subList&&subList.length>0){this.renderSub(subList);if(subid){this.sub.val(subid);}}}}},getData:function(){this.showData(GROUP_LIST);},showData:function(result){if(result.code===1){var list=this.list=result.data.result||[];this.root.empty();list.unshift({"groupId":"","groupEnName":"请选择产品分组"});for(var i=0,len=list.length;i<len;i++){var option=$("<option>"),item=list[i];option.val(item.groupId).text(item.groupName||item.groupEnName);this.root.append(option);}}else{alert('获取产品组数据失败！');}},changeRoot:function(){var list=this.getSub(this.root.val());if(list&&list.length>0){this.renderSub(list);this.setValue('');}else{this.sub.is(':visible')&&this.sub.hide();this.setValue(this.root.val());}},changeSub:function(){this.setValue(this.sub.val());},getSub:function(gid){var list=this.list,children;$(list).each(function(m,item){if(item.groupId==gid){children=item.childGroupList;return false;}});return children;},renderSub:function(list){this.sub.empty();this.sub.show();list.unshift({"groupId":"","groupEnName":"请选择产品子分组"});for(var i=0,len=list.length;i<len;i++){var option=$("<option>"),item=list[i];option.val(item.groupId).text(item.groupName||item.groupEnName);this.sub.append(option);}
list.shift();},setValue:function(value){this.pgname.val(value);}});ProductGroupController.init=function(){new ProductGroupController({el:'.j-productgroup'});}
window.ProductGroupController=ProductGroupController;})(window.jQuery);
(function(window,$){var LANG={"syi_valid_videoUrl":"产品视频链接","syi_msg_youtubeUrlError":"请输入有效的youtube视频地址。"};function $L(name){return LANG[name];};ContentController=CommonController.sub({init:function(){this.addRules(rules||{});},elements:{'#videourl':'videourl'},events:{'blur #videourl':'fnVideoUrlChange'},fnVideoUrlChange:function(evt){var el=$(evt.currentTarget);this.validate('VideoUrl',el);}});var rules={VideoUrl:function(el){var value=el.val(),result=true,reg=/^(http(s)?:\/\/)?(www\.youtube.com|youtu.be)\/.+/;if(value&&!reg.test(value)){result=false;Validate.setError(el,$L('syi_msg_youtubeUrlError'),$L('syi_valid_videoUrl'));Validate.showError(el);}else{Validate.removeError(el);}
return result;}};ContentController.init=function(opt){return new ContentController(opt);}
window.ContentController=ContentController;})(window,$);
(function($){var root=window.DH_SYI=window.DH_SYI||{DOMAIN:'dhgate.com',Widget:{}};var _hasprop=Object.hasOwnProperty;var Base={tmpl:(function(){var cache={};function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")
+"');}return p.join('');");return data?fn(data):fn;};return tmpl;})(),bind:function(ev,callback){this.ev[ev]=callback;return this;},unbind:function(ev){this.ev[ev]&&(delete this.ev[ev]);return this;},trigger:function(ev){var rtn=true;if(this.ev[ev]){rtn=this.ev[ev].apply(this,[].slice.call(arguments,1));}
return rtn;},_supper:function(options){this.options=options=options||{};this.el=options.el?(typeof(options.el)==='string'?$(options.el):options.el):$(document);this.ev={};var _spliter=/^(\S+)\s*(.*)$/;this.elements&&~function(self){for(var item in self.elements){_hasprop.call(self.elements,item)&&(self[self.elements[item]]=self.el.find(item));}
self.elements=null;}(this);this.events&&~function(self){for(var item in self.events){_hasprop.call(self.events,item)&&~function(){var _ev=_spliter.exec(item)[1],_se=_spliter.exec(item)[2],_fn=self.events[item];_ev&&_se&&_fn&&self[_fn]&&self.el.delegate(_se,_ev,$.proxy(self[_fn],self));}();}
self.events=null;}(this);},_create:function(){function f(){};f.prototype=this;return new f;},create:function(extend){var Result;Result=(function(){return function(){Base._supper.apply(this,arguments);this.init&&typeof(this.init==='function')&&this.init.apply(this,arguments);}})();Result.prototype=this._create();extend&&typeof(extend)==='object'&&$.extend(Result.prototype,extend);return Result;}};root.Base=Base;})(window.jQuery);(function($){var Dialog=DH_SYI.Base.create({type:null,minWidth:400,zIndex:100000,opacity:0.5,template:{common:['<table class="noshade-pop-table j-dialog-container">','<tbody><tr>','<td class="t-lt"></td>','<td class="t-mid"></td>','<td class="t-ri"></td>','</tr>','<tr>','<td class="m-lt"></td>','<td class="m-mid">','<div class="mid-warp">','<div class="noshade-pop-content">','<div class="noshade-pop-title j-dialog-title-container">','<span class="j-dialog-title">操作提示</span>','</div>','<div class="noshade-pop-inner j-dialog-inner-container">','</div>','<div class="noshade-pop-bot j-dialog-bot-container"></div>','</div>','<a href="javascript:;" class="noshade-pop-close j-dialog-closer"></a>','</div>','</td>','<td class="m-ri"></td>','</tr>','<tr>','<td class="b-lt"></td>','<td class="b-mid"></td>','<td class="b-ri"></td>','</tr>','</tbody></table>'].join(''),btn:'<span class="<%=className%>"><input type="button" value="<%=text%>"></span>',ac:['<div class="box1 align-center clearfix">','<p class="j-dialog-msg"></p>','<div class="align-center pop-button clearfix j-dialog-btns">','</div>','</div>'].join(''),loading:['<div class="box1 align-center clearfix">','<p>','<span class="noshade-pop-loading"></span>','<span class="j-dialog-msg"></span>','</p>','</div>'].join('')},init:function(){this.initEl();this.initEv();return this;},initEl:function(){var self=this,rnd=new Date-0;this.pev={};this.el=$('<div>');this.code=rnd;this.el.addClass('dh-dialog-'+rnd).html(this.template.common).hide();this.csDialogC='.j-dialog-container';this.csTitleC='.j-dialog-title-container';this.csTitle='.j-dialog-title';this.csInnerC='.j-dialog-inner-container';this.csCloser='.j-dialog-closer';this.csBotC='.j-dialog-bot-container';this.csMsg='.j-dialog-msg';this.csBtns='.j-dialog-btns';Dialog.records=Dialog.records||{};Dialog.records[this.code]=this;Dialog.showRecords=Dialog.showRecords||[];$(function(){if(self.options.isClass!==true){$(document.body).append(self.el);}});},initEv:function(){var self=this;this.el.delegate('.j-dialog-closer','click',$.proxy(this.hide,this));$(window).bind('resize',$.proxy(this._setPos,this));if(!Dialog.isBindEsc){$(document).bind('keyup',function(e){if(27===e.keyCode){if(Dialog.showRecords.length===0)return;Dialog.showRecords[Dialog.showRecords.length-1].hide();}});Dialog.isBindEsc=true;}},_reset:function(){var self=this,options=this._options;this.el.find(this.csCloser).is(':hidden')&&this.el.find(this.csCloser).show();this.el.find(this.csTitleC).is(':hidden')&&this.el.find(this.csTitleC).show();this.el.find(this.csBtns).is(':hidden')&&this.el.find(this.csBtns).show();this.el.find(this.csBotC).is(':hidden')&&this.el.find(this.csBotC).show();this.el.find(this.csTitle).text(options.title||'操作提示');if(this.el.find(this.csBtns).length){if(options.btns&&options.btns.length){$(options.btns).each(function(m,n){var _btn=$(self.tmpl(self.template.btn,{text:n.text,className:n.className}));n.fn&&_btn.bind('click',$.proxy(n.fn,self));self.el.find(self.csBtns).append(_btn);});}else if(this.type==='alert'){var _btn=$(self.tmpl(self.template.btn,{text:'确定',className:'yellowBtn valmiddle'}));_btn.bind('click',$.proxy(this.hide,this));this.el.find(this.csBtns).append(_btn);}else{this.el.find(this.csBtns).hide();}}
if(this.ev['show']&&!this.ev['defaultShow']){this.ev['defaultShow']=this.ev['show'];}
if(this.ev['hide']&&!this.ev['defaultHide']){this.ev['defaultHide']=this.ev['hide'];}
this.ev['show']=options.show;this.ev['hide']=options.hide;},loading:function(msg){var self=this;this.type='loading';this._options={};this._reset();this.show();this.el.find(this.csCloser).hide();this.el.find(this.csTitleC).hide();this.el.find(this.csBtns).hide();this.el.find(this.csBotC).hide();this.el.find(this.csInnerC).html(this.template.loading);this.el.find(this.csMsg).html(msg);},alert:function(msg,options){var self=this;this.type='alert';this._options=options||{};this.el.find(this.csInnerC).html(this.template.ac);this._reset();this.show();this.el.find(this.csMsg).html(msg);},confirm:function(msg,options){var self=this;this.type='confirm';this._options=options||{};this.el.find(this.csInnerC).html(this.template.ac);this._reset();this.show();this.el.find(this.csMsg).html(msg);},html:function(selector,options){var self=this;this.type='html';this._options=options||{};this.selector=typeof selector==='string'?$(selector):selector;this.el.find(this.csInnerC).empty().append(this.selector.show());this._reset();this.show();},show:function(){var self=this,masker,dialog=this.el,timeout=this._options.timeout;this.timeout&&(clearTimeout(this.timeout),(this.timeout=null));if(!dialog)return;if(!this.elMasker){masker=this.elMasker=$("<div>");masker.css({position:'absolute',width:$(window).width(),height:Math.max($(window).height(),$(document.body).height()),left:0,top:0,backgroundColor:'#000',opacity:this.opacity,zIndex:this.zIndex});if(/msie\s*6.0/.test(navigator.userAgent.toLowerCase())){var _iframe=$("<iframe>");_iframe.css({position:'absolute',width:$(window).width(),height:Math.max($(window).height(),$(document.body).height()),left:0,top:0,opacity:0}).attr({src:'about:blank'});masker.append(_iframe);}
this.el.before(masker);}else{this.elMasker.show();}
dialog.show().css({position:'absolute',zIndex:this.zIndex});this._setCss();this._setPos();this.trigger('show');this.trigger('defaultShow');delete this.ev['show'];timeout&&!isNaN(timeout)&&(this.timeout=setTimeout(function(){self.el.is(':visible')&&self.hide();},timeout));Dialog.showRecords.push(this);},hide:function(){if(this.el.is(':hidden'))return;this.el.hide();this.elMasker.hide();this.type==='html'&&$(document.body).append(this.selector.hide());this.trigger('hide');this.trigger('defaultHide');delete this.ev['hide'];Dialog.showRecords.pop();},destory:function(){this.el&&this.el.remove();this.elMasker&&this.elMasker.remove();this.trigger('destory');delete Dialog.records[this.code];},_setCss:function(){var h=this.el.find(this.csInnerC).children().eq(0).outerHeight(true),w=this.el.find(this.csInnerC).children().eq(0).outerWidth(true);this.el.find(this.csDialogC).children().eq(0).css('width',w);h=this.el.find(this.csDialogC).children().eq(0).outerHeight(true);w=this.el.find(this.csDialogC).children().eq(0).outerWidth(true);w<this.minWidth&&(w=this.minWidth);this.el.find(this.csDialogC).css('width',w);this.el.css('width',this.el.find(this.csDialogC).outerWidth(true));},_setPos:function(){if(this.el.is(':hidden'))return;var h=this.el.height(),w=this.el.width();this.el.css({top:$(window).height()/2-h/2+$(window).scrollTop()+'px',left:$(window).width()/2-w/2+'px'});this.elMasker&&this.elMasker.css({width:$(window).width(),height:Math.max($(window).height(),$(document.body).height())});}});DH_SYI.Widget.Dialog=Dialog;})(window.jQuery);(function($){var Pager=DH_SYI.Base.create({template:{disabledPN:'<span class="disablebtn"><span><%=text%></span></span>',disabled:'<span class="disablebtn"><%=text%></span>',enabledPN:'<a href="javascript:;" class="<%=className%>"><span><%=text%></span></a>',enabled:'<a href="javascript:;" class="<%=className%>"<%=attr%>><%=text%></a>',current:'<b><%=text%></b>',pagesize:'<select class="j-pager-size"><%=pageSize%></select>',prefix:'<span class="pageleft"><span>共有<%=recordCount%>条记录，每页显示<%=pageSize%>条</span></span><span class="pageright"><span>',suffix:'</span><span class="gotopage">到<input type="text" class="inputtext j-pager-text" value="">页<span class="buttonpage"><input type="button" value="确 定" class="j-pager-btn"></span></span></span>',dotted:'<span>...</span>'},tag:{prev:'«上一页',next:'下一页»'},events:{'change .j-pager-size':'changeSize','click .j-pager-prev':'jumpPrev','click .j-pager-next':'jumpNext','click .j-pager-no':'jumpNo','click .j-pager-btn':'jumpText'},reset:function(options){if(!this.el||!options)return;this.pageIndex=1,this.pageRange=options.pageRange||5,this.pageSize=options.pageSize||10,this.recordCount=options.recordCount||0
this.csText='.j-pager-text';return this;},render:function(){var self=this,temp=[],pageIndex=+this.pageIndex,pageRange=this.pageRange,pageSize=this.pageSize,recordCount=this.recordCount,pageCount=Math.ceil(recordCount/pageSize)||1,template=this.template,tmpl=this.tmpl,tag=this.tag;if(typeof(pageSize)==='object'&&pageSize instanceof Array&&pageSize.length>1){var _sizes=[];!/^[1-9][0-9]*$/.test(this.currentPageSize)&&(this.currentPageSize=null);$(pageSize).each(function(m,n){if(/^[1-9][0-9]*$/.test(n)){_sizes.push('<option value="'+n+'"'+(self.currentPageSize===n?'selected="selected"':'')+'>'+n+'</option>');!self.currentPageSize&&(self.currentPageSize=n);}});pageSize=tmpl(template.pagesize,{pageSize:_sizes.join('')});pageCount=Math.ceil(recordCount/this.currentPageSize)||1;}
if(pageIndex<1||pageIndex>pageCount)return;this.pageCount=pageCount;temp.push(tmpl(template.prefix,{recordCount:recordCount,pageSize:pageSize}));if(pageCount===1){temp.push(tmpl(template.disabledPN,{text:tag.prev}));temp.push(tmpl(template.current,{text:1}));temp.push(tmpl(template.disabledPN,{text:tag.next}));}else{temp.push(pageIndex>1?tmpl(template.enabledPN,{className:'j-pager-prev',text:tag.prev}):tmpl(template.disabledPN,{text:tag.prev}));if(pageCount<pageRange+3){for(var i=1;i<=pageCount;i++){temp.push(pageIndex===i?tmpl(template.current,{text:i}):tmpl(template.enabled,{className:'j-pager-no',text:i,attr:' data-pageno="'+i+'"'}));}}else{if(pageIndex<pageRange+1){for(var i=1;i<=pageRange+1;i++){temp.push(pageIndex===i?tmpl(template.current,{text:i}):tmpl(template.enabled,{className:'j-pager-no',text:i,attr:' data-pageno="'+i+'"'}));}
temp.push(template.dotted);temp.push(tmpl(template.enabled,{className:'j-pager-no',text:pageCount,attr:' data-pageno="'+pageCount+'"'}));}else if(pageIndex>pageCount-pageRange){temp.push(tmpl(template.enabled,{className:'j-pager-no',text:1,attr:' data-pageno="1"'}));temp.push(template.dotted);for(var i=pageCount-pageRange;i<=pageCount;i++){temp.push(pageIndex===i?tmpl(template.current,{text:i}):tmpl(template.enabled,{className:'j-pager-no',text:i,attr:' data-pageno="'+i+'"'}));}}else{temp.push(tmpl(template.enabled,{className:'j-pager-no',text:1,attr:' data-pageno="1"'}));temp.push(template.dotted);for(var i=pageIndex-Math.floor(pageRange/2);i<pageIndex+Math.ceil(pageRange/2);i++){temp.push(pageIndex===i?tmpl(template.current,{text:i}):tmpl(template.enabled,{className:'j-pager-no',text:i,attr:' data-pageno="'+i+'"'}));}
temp.push(template.dotted);temp.push(tmpl(template.enabled,{className:'j-pager-no',text:pageCount,attr:' data-pageno="'+pageCount+'"'}));}}
temp.push(pageIndex<pageCount?tmpl(template.enabledPN,{className:'j-pager-next',text:tag.next}):tmpl(template.disabledPN,{text:tag.next}));}
temp.push(template.suffix);this.el.empty().append(temp.join(''));},changeSize:function(e){var self=this,$e=$(e.target),size=+$e.val(),page=1;this.currentPageSize=size;setTimeout(function(){self.jump(page);},0);},jumpPrev:function(){var page=this.pageIndex-1;if(!this.trigger('before',page))return;this.jump(page);},jumpNext:function(){var page=this.pageIndex+1;if(!this.trigger('before',page))return;this.jump(page);},jumpNo:function(e){var page=$(e.currentTarget).attr('data-pageno');if(!this.trigger('before',+page))return;this.jump(+page);},jumpText:function(){var page=+this.el.find(this.csText).val();if(isNaN(page)||page<1||page>this.pageCount||this.pageIndex==page)return;if(!this.trigger('before',+page))return;this.jump(+page);},jump:function(page){this.pageIndex=page;this.render();this.trigger('jump',this.pageIndex,this.currentPageSize);},flush:function(){this.render();this.trigger('jump',this.pageIndex,this.currentPageSize);}});DH_SYI.Widget.Pager=Pager;})(window.jQuery);(function($){var tempDialog;var template;var RelatedProduct=DH_SYI.Base.create({template:{dialog:['<div class="poppad01">','<div class="public-lr-box clearfix" >','<div class="public-r-box">','<span><input type="text" value="模板名称" class="public-txt-input color999 marginright10 j-temp-name" /></span><span class="tourBtn"><input type="button" value="搜 索" class="j-btn-search" /></span>','</div>','<div class="public-l-box marginleft10">','<span>最多可以选择 <b class="colorf50">3</b> 个关联产品模板</span>','</div>','</div>','<!-- 列表 开始 -->','<div class="bg-list rew-bg">','<table cellpadding="0" cellspacing="0" border="0"  width="100%">','<tr>','<th width="45%" class="padleft10">模板名称</th>','<th width="20%">使用此模板的产品</th>','<th width="20%">最后更新时间</th>','<th width="15%" class="last">操作</th>','</tr>','</table>','</div>','<div class="bg-list rew-hg">','<!-- 列表 开始 -->','<table cellpadding="0" cellspacing="0" border="0" width="100%" class="j-temp-list"></table>','</div>','<!-- 列表 结束 -->','<!--分页 开始-->','<div class="commonpage j-relatedproduct-pager"></div>','<!--分页 结束-->','<div class="margintop10 marginlr10 clearfix j-view-list"></div>','<div class="tips-common j-error-tip" style="display:none;">',' <span class="tips-error">错误提示</span>','</div>','</div>','   <div class="box1">','      <div class="align-center clearfix">','           <span class="bigyellow-button valmiddle marginright10"><input type="button" class="j-btn-confirm" value="确 定"></span>','           <span class="biggrey-button"><input type="button" class="j-btn-cancel" value="取 消"></span>','       </div>','   </div>'].join('')},init:function(){$.sub('relatedproduct.edite',$.proxy(this.showTemplate,this));$(document.body).append('<div class="j-dialog-relatedproduct" style="width:780px;display:none">'+this.template.dialog+'</div>');},showTemplate:function(){tempDialog.html('.j-dialog-relatedproduct',{title:'选择关联产品模板'});}});var Template=DH_SYI.Base.create({elements:{'.j-temp-list':'elTempList','.j-temp-name':'elTempName','.j-view-list':'elViewList','.j-error-tip':'elErrorTip'},events:{'click .j-temp-name':'clkName','blur .j-temp-name':'blurName','click .j-btn-search':'search','click .j-chk-item':'checkItem','click .j-view-remove':'removeView','click .j-btn-confirm':'confirm','click .j-btn-cancel':'cancel'},cgi:{getTemp:'/prodmanage/relModel/getRelModelPage.do'},tpl:{noTemp:['<tr>','<td colspan="6" class="tipmktd"><div class="tipmkbox"><span class="icon-bighighlight-warning marginright10"></span>您目前没有关联产品模板，请 <a class="lkundeline" href="http://seller.dhgate.com/prodmanage/relModel/createRelModel.do?dhpath=10001,21001,0220" target="_blank">添加关联产品模板</a>。</div></td>','</tr>'].join(''),noSearch:['<tr>','<td colspan="6" class="tipmktd"><div class="tipmkbox"><span class="icon-bighighlight-warning marginright10"></span>没有满足搜索条件的模板。</div></td>','</tr>'].join(''),tempItem:['<tr>','<td width="2%" class="padleft20"><input type="checkbox" class="j-chk-item" value="<%=relModelId%>" /></td>','<td width="42%"><%=modelName%></td>','<td width="20%" class="align-center"><%=count%></td>','<td width="20%" class="align-center"><%=updateDateStr%></td>','<td width="16%"class="operation">','<a href="/prodmanage/relModel/preview.do?relModelId=<%=relModelId%>" target="_blank">预览</a>','</td>','</tr>'].join(''),viewItem:['<div class="chouse-pro-name j-view-item" data-tid="<%=tid%>">','<span class="proshortnane"><%=tname%></span>','<span class="remove j-view-remove"></span>','</div>'].join('')},init:function(){var self=this;this.params={pageNum:1,pageSize:10};this.isInit=false;this.results=null;this.selects=[];this.maxNo=3;this.curNo=0;this.pager=new DH_SYI.Widget.Pager({el:'.j-relatedproduct-pager'}).bind('jump',function(page,size){$.extend(self.params,{pageNum:page,pageSize:size});self.getTemp();});},reset:function(){this.elTempList.find('.j-chk-item').attr('checked',false);this.elViewList.empty();this.curNo=0;this.selects=[];},clkName:function(e){var $e=$(e.target),val=$e.val();if('模板名称'===val){$e.val('');$e.removeClass('color999');}},blurName:function(e){var $e=$(e.target)
val=$e.val();if(''===val){$e.val('模板名称');$e.addClass('color999');}},checkItem:function(e){var $e=$(e.target),ischk=$e.attr('checked'),$item=$e.closest('.j-temp-item'),tid=+$e.val(),tname=this.results[tid].modelName;if(ischk){if(this.elViewList.find('.j-view-item[data-tid="'+tid+'"]').length===1)return;if(this.curNo===this.maxNo){alert('一个模板最多只能'+this.maxNo+'添加个产品。');return false;}
this.elViewList.append(this.tmpl(this.tpl.viewItem,{tid:tid,tname:tname}));this.addSelect(tid);this.curNo++;}else{this.elViewList.find('.j-view-item[data-tid="'+tid+'"]').remove();this.removeSelect(tid);this.curNo--;}
this.hideErr();},removeView:function(e){var $e=$(e.target),$item=$e.closest('.j-view-item'),tid=+$item.attr('data-tid');this.elTempList.find('.j-chk-item[value="'+tid+'"]').attr('checked',false);$item.remove();this.removeSelect(tid);this.curNo--;},addSelect:function(tid){this.selects.push(this.results[tid]);},removeSelect:function(tid){var self=this;$(this.selects).each(function(m,n){if(tid===n.relModelId){self.selects.splice(m,1);}});},search:function(){this.params={pageNum:1,pageSize:10};$.extend(this.params,{relModelName:(this.elTempName.val()==='模板名称'?'':this.elTempName.val())});this.isInit=false;this.getTemp();},getTemp:function(){var params={};this.elTempList.empty();$.extend(params,this.params);$.get(this.cgi.getTemp,params,$.proxy(this.getTempBack,this));},getTempBack:function(result){if(result&&+result.code>0){this.renderList(result.relModelDTOList);if(!this.isInit){this.pager.reset({recordCount:result.count,pageSize:10}).render();this.isInit=true;}}else{alert('获取产品列表失败。');}},renderList:function(list){var self=this,_list=[],_results=this.results={};if(list&&list.length){$(list).each(function(m,n){_list.push(self.tmpl(self.tpl.tempItem,n));_results[n.relModelId]=n;});this.elTempList.append(_list.join(''));}else{if(this.elTempName.val()!==''&&this.elTempName.val()!=='模板名称'){this.elTempList.append(this.tpl.noSearch);}else{this.elTempList.append(this.tpl.noprod);}}},insertTemp:function(item){$.pub('execCommand.edite',['inserthtml',['<img data-relateproduct="'+item.relModelId+'" style="cursor:pointer;" class="j-relatedproduct" src="http://css.dhresource.com/seller/product/relatedproducts/image/productmodel001.png" />']]);},confirm:function(){var self=this,selects=this.selects;if(!selects||!selects.length){this.showErr('请选择关联产品模板');return;}
if(selects&&selects.length){$(selects).each(function(m,n){self.insertTemp(n);});}
this.elTempList.find('.j-chk-item:checked').attr('checked',false);this.selects=[];this.elViewList.empty();this.curNo=0;tempDialog.hide();},cancel:function(){tempDialog.hide();},showErr:function(msg){this.elErrorTip.show().find('span').html(msg);},hideErr:function(){this.elErrorTip.hide();}});RelatedProduct.init=function(){$(function(){new RelatedProduct();tempDialog=new DH_SYI.Widget.Dialog();template=new Template({el:'.j-dialog-relatedproduct'});tempDialog.bind('show',function(){if(!template.isInit){template.getTemp();}else{template.reset();}});});}
window.RelatedProduct=RelatedProduct;})(window.jQuery);